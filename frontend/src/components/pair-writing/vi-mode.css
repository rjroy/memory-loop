/**
 * Vi Mode Styles
 *
 * Styles for vi mode UI elements: block cursor overlay, mode indicator,
 * and command line.
 *
 * @see .lore/plans/vi-mode-pair-writing.md (TD-10)
 */

/* Hide native caret in normal mode */
.pair-writing-editor__textarea--vi-normal {
  caret-color: transparent;
}

/* Hide native caret in command mode (cursor stays visible) */
.pair-writing-editor__textarea--vi-command {
  caret-color: transparent;
}

/* Block cursor overlay */
.vi-cursor {
  position: absolute;
  pointer-events: none;
  background-color: var(--color-text, #e0e0e0);
  opacity: 0.7;
  width: 0.6em;
  animation: vi-cursor-blink 1s step-end infinite;
  z-index: 5;
}

/* Blink animation for block cursor */
@keyframes vi-cursor-blink {
  0%,
  100% {
    opacity: 0.7;
  }
  50% {
    opacity: 0;
  }
}

/* Disable blink when textarea is not focused */
.pair-writing-editor:not(:focus-within) .vi-cursor {
  animation: none;
  opacity: 0.4;
}

/* ============================================
   Mode Indicator

   Displays current mode at bottom-left of editor.
   Vim-style appearance: monospace, bold, subtle.
   ============================================ */

.vi-mode-indicator {
  position: absolute;
  bottom: 8px;
  left: 8px;
  font-family: var(--font-mono);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-secondary);
  pointer-events: none;
  user-select: none;
  z-index: 5;
}

/* Mode-specific styling for visual distinction */
.vi-mode-indicator[data-mode="insert"] {
  color: var(--color-success);
}

.vi-mode-indicator[data-mode="command"] {
  color: var(--color-accent-quartary);
}

/* ============================================
   Command Line Input

   Vim-style command input at bottom of editor.
   Shows ":" prefix followed by input field.
   ============================================ */

.vi-command-line {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  align-items: center;
  padding: 4px 8px;
  background-color: var(--color-surface);
  border-top: 1px solid var(--color-border);
  font-family: var(--font-mono);
  font-size: var(--font-size-sm);
  z-index: 10;
}

.vi-command-line__prefix {
  color: var(--color-text);
  font-weight: var(--font-weight-bold);
  margin-right: 2px;
  user-select: none;
}

.vi-command-line__text {
  color: var(--color-text);
  white-space: pre;
}

.vi-command-line__cursor {
  display: inline-block;
  width: 0.6em;
  height: 1.1em;
  background-color: var(--color-text);
  opacity: 0.7;
  animation: vi-cursor-blink 1s step-end infinite;
  vertical-align: text-bottom;
}
