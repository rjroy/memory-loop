"use strict";exports.id=27,exports.ids=[27],exports.modules={1805:(a,b,c)=>{a.exports=c(4870)},8460:(a,b,c)=>{Object.defineProperty(b,"I",{enumerable:!0,get:function(){return g}});let d=c(9207),e=c(885),f=c(8662);async function g(a,b,c,g){if((0,d.isNodeNextResponse)(b)){var h;b.statusCode=c.status,b.statusMessage=c.statusText;let d=["set-cookie","www-authenticate","proxy-authenticate","vary"];null==(h=c.headers)||h.forEach((a,c)=>{if("x-middleware-set-cookie"!==c.toLowerCase())if("set-cookie"===c.toLowerCase())for(let d of(0,f.splitCookiesString)(a))b.appendHeader(c,d);else{let e=void 0!==b.getHeader(c);(d.includes(c.toLowerCase())||!e)&&b.appendHeader(c,a)}});let{originalResponse:i}=b;c.body&&"HEAD"!==a.method?await (0,e.pipeToNodeResponse)(c.body,i,g):i.end()}}},8723:(a,b,c)=>{c.d(b,{zMY:()=>fk,k5n:()=>f4,YjP:()=>eo});var d,e,f={};c.r(f),c.d(f,{base64:()=>aB,base64url:()=>aC,bigint:()=>aM,boolean:()=>aP,browserEmail:()=>au,cidrv4:()=>az,cidrv6:()=>aA,cuid:()=>ac,cuid2:()=>ad,date:()=>aH,datetime:()=>aK,domain:()=>aE,duration:()=>ai,e164:()=>aF,email:()=>ap,emoji:()=>av,extendedDuration:()=>aj,guid:()=>ak,hex:()=>aU,hostname:()=>aD,html5Email:()=>aq,idnEmail:()=>at,integer:()=>aN,ipv4:()=>aw,ipv6:()=>ax,ksuid:()=>ag,lowercase:()=>aS,mac:()=>ay,md5_base64:()=>aY,md5_base64url:()=>aZ,md5_hex:()=>aX,nanoid:()=>ah,null:()=>aQ,number:()=>aO,rfc5322Email:()=>ar,sha1_base64:()=>a_,sha1_base64url:()=>a0,sha1_hex:()=>a$,sha256_base64:()=>a2,sha256_base64url:()=>a3,sha256_hex:()=>a1,sha384_base64:()=>a5,sha384_base64url:()=>a6,sha384_hex:()=>a4,sha512_base64:()=>a8,sha512_base64url:()=>a9,sha512_hex:()=>a7,string:()=>aL,time:()=>aJ,ulid:()=>ae,undefined:()=>aR,unicodeEmail:()=>as,uppercase:()=>aT,uuid:()=>al,uuid4:()=>am,uuid6:()=>an,uuid7:()=>ao,xid:()=>af});var g={};c.r(g),c.d(g,{endsWith:()=>dJ,gt:()=>dr,gte:()=>ds,includes:()=>dH,length:()=>dD,lowercase:()=>dF,lt:()=>dp,lte:()=>dq,maxLength:()=>dB,maxSize:()=>dy,mime:()=>dL,minLength:()=>dC,minSize:()=>dz,multipleOf:()=>dx,negative:()=>du,nonnegative:()=>dw,nonpositive:()=>dv,normalize:()=>dN,overwrite:()=>dM,positive:()=>dt,property:()=>dK,regex:()=>dE,size:()=>dA,slugify:()=>dR,startsWith:()=>dI,toLowerCase:()=>dP,toUpperCase:()=>dQ,trim:()=>dO,uppercase:()=>dG});var h={};c.r(h),c.d(h,{ZodISODate:()=>d1,ZodISODateTime:()=>d_,ZodISODuration:()=>d5,ZodISOTime:()=>d3,date:()=>d2,datetime:()=>d0,duration:()=>d6,time:()=>d4});var i={};function j(a,b,c){function d(c,d){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:d,constr:g,traits:new Set},enumerable:!1}),c._zod.traits.has(a))return;c._zod.traits.add(a),b(c,d);let e=g.prototype,f=Object.keys(e);for(let a=0;a<f.length;a++){let b=f[a];b in c||(c[b]=e[b].bind(c))}}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}c.r(i),c.d(i,{ZodAny:()=>fw,ZodArray:()=>fG,ZodBase64:()=>e$,ZodBase64URL:()=>e0,ZodBigInt:()=>fl,ZodBigIntFormat:()=>fn,ZodBoolean:()=>fj,ZodCIDRv4:()=>eW,ZodCIDRv6:()=>eY,ZodCUID:()=>eG,ZodCUID2:()=>eI,ZodCatch:()=>gr,ZodCodec:()=>gx,ZodCustom:()=>gJ,ZodCustomStringFormat:()=>e6,ZodDate:()=>fE,ZodDefault:()=>gj,ZodDiscriminatedUnion:()=>fR,ZodE164:()=>e2,ZodEmail:()=>eq,ZodEmoji:()=>eC,ZodEnum:()=>f3,ZodExactOptional:()=>ge,ZodFile:()=>f8,ZodFunction:()=>gH,ZodGUID:()=>es,ZodIPv4:()=>eQ,ZodIPv6:()=>eU,ZodIntersection:()=>fT,ZodJWT:()=>e4,ZodKSUID:()=>eO,ZodLazy:()=>gD,ZodLiteral:()=>f6,ZodMAC:()=>eS,ZodMap:()=>f_,ZodNaN:()=>gt,ZodNanoID:()=>eE,ZodNever:()=>fA,ZodNonOptional:()=>gn,ZodNull:()=>fu,ZodNullable:()=>gg,ZodNumber:()=>fb,ZodNumberFormat:()=>fd,ZodObject:()=>fJ,ZodOptional:()=>gc,ZodPipe:()=>gv,ZodPrefault:()=>gl,ZodPromise:()=>gF,ZodReadonly:()=>gz,ZodRecord:()=>fX,ZodSet:()=>f1,ZodString:()=>en,ZodStringFormat:()=>ep,ZodSuccess:()=>gp,ZodSymbol:()=>fq,ZodTemplateLiteral:()=>gB,ZodTransform:()=>ga,ZodTuple:()=>fV,ZodType:()=>el,ZodULID:()=>eK,ZodURL:()=>ez,ZodUUID:()=>eu,ZodUndefined:()=>fs,ZodUnion:()=>fN,ZodUnknown:()=>fy,ZodVoid:()=>fC,ZodXID:()=>eM,ZodXor:()=>fP,_ZodString:()=>em,_default:()=>gk,_function:()=>gI,any:()=>fx,array:()=>fH,base64:()=>e_,base64url:()=>e1,bigint:()=>fm,boolean:()=>fk,catch:()=>gs,check:()=>gK,cidrv4:()=>eX,cidrv6:()=>eZ,codec:()=>gy,cuid:()=>eH,cuid2:()=>eJ,custom:()=>gL,date:()=>fF,describe:()=>gO,discriminatedUnion:()=>fS,e164:()=>e3,email:()=>er,emoji:()=>eD,enum:()=>f4,exactOptional:()=>gf,file:()=>f9,float32:()=>ff,float64:()=>fg,function:()=>gI,guid:()=>et,hash:()=>fa,hex:()=>e9,hostname:()=>e8,httpUrl:()=>eB,instanceof:()=>gQ,int:()=>fe,int32:()=>fh,int64:()=>fo,intersection:()=>fU,ipv4:()=>eR,ipv6:()=>eV,json:()=>gS,jwt:()=>e5,keyof:()=>fI,ksuid:()=>eP,lazy:()=>gE,literal:()=>f7,looseObject:()=>fM,looseRecord:()=>f$,mac:()=>eT,map:()=>f0,meta:()=>gP,nan:()=>gu,nanoid:()=>eF,nativeEnum:()=>f5,never:()=>fB,nonoptional:()=>go,null:()=>fv,nullable:()=>gh,nullish:()=>gi,number:()=>fc,object:()=>fK,optional:()=>gd,partialRecord:()=>fZ,pipe:()=>gw,prefault:()=>gm,preprocess:()=>gT,promise:()=>gG,readonly:()=>gA,record:()=>fY,refine:()=>gM,set:()=>f2,strictObject:()=>fL,string:()=>eo,stringFormat:()=>e7,stringbool:()=>gR,success:()=>gq,superRefine:()=>gN,symbol:()=>fr,templateLiteral:()=>gC,transform:()=>gb,tuple:()=>fW,uint32:()=>fi,uint64:()=>fp,ulid:()=>eL,undefined:()=>ft,union:()=>fO,unknown:()=>fz,url:()=>eA,uuid:()=>ev,uuidv4:()=>ew,uuidv6:()=>ex,uuidv7:()=>ey,void:()=>fD,xid:()=>eN,xor:()=>fQ}),Object.freeze({status:"aborted"}),Symbol("zod_brand");class k extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class l extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}let m={};function n(a){return a&&Object.assign(m,a),m}function o(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}function p(a,b="|"){return a.map(a=>J(a)).join(b)}function q(a,b){return"bigint"==typeof b?b.toString():b}function r(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function s(a){return null==a}function t(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}let u=Symbol("evaluating");function v(a,b,c){let d;Object.defineProperty(a,b,{get(){if(d!==u)return void 0===d&&(d=u,d=c()),d},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function w(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function x(...a){let b={};for(let c of a)Object.assign(b,Object.getOwnPropertyDescriptors(c));return Object.defineProperties({},b)}function y(a){return JSON.stringify(a)}let z="captureStackTrace"in Error?Error.captureStackTrace:(...a)=>{};function A(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let B=r(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function C(a){if(!1===A(a))return!1;let b=a.constructor;if(void 0===b||"function"!=typeof b)return!0;let c=b.prototype;return!1!==A(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}function D(a){return C(a)?{...a}:Array.isArray(a)?[...a]:a}let E=new Set(["string","number","symbol"]),F=new Set(["string","number","bigint","boolean","symbol","undefined"]);function G(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function H(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function I(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}function J(a){return"bigint"==typeof a?a.toString()+"n":"string"==typeof a?`"${a}"`:`${a}`}let K={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},L={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function M(a,b=0){if(!0===a.aborted)return!0;for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function N(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function O(a){return"string"==typeof a?a:a?.message}function P(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=O(a.inst?._zod.def?.error?.(a))??O(b?.error?.(a))??O(c.customError?.(a))??O(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function Q(a){return a instanceof Set?"set":a instanceof Map?"map":a instanceof File?"file":"unknown"}function R(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function S(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}let T=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),a.message=JSON.stringify(b,q,2),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},U=j("$ZodError",T),V=j("$ZodError",T,{Parent:Error}),W=a=>(b,c,d,e)=>{let f=d?Object.assign(d,{async:!1}):{async:!1},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise)throw new k;if(g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>P(a,f,n())));throw z(b,e?.callee),b}return g.value},X=W(V),Y=a=>async(b,c,d,e)=>{let f=d?Object.assign(d,{async:!0}):{async:!0},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise&&(g=await g),g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>P(a,f,n())));throw z(b,e?.callee),b}return g.value},Z=Y(V),$=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new k;return f.issues.length?{success:!1,error:new(a??U)(f.issues.map(a=>P(a,e,n())))}:{success:!0,data:f.value}},_=$(V),aa=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>P(a,e,n())))}:{success:!0,data:f.value}},ab=aa(V),ac=/^[cC][^\s-]{8,}$/,ad=/^[0-9a-z]+$/,ae=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,af=/^[0-9a-vA-V]{20}$/,ag=/^[A-Za-z0-9]{27}$/,ah=/^[a-zA-Z0-9_-]{21}$/,ai=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,aj=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ak=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,al=a=>a?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,am=al(4),an=al(6),ao=al(7),ap=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,aq=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ar=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,as=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,at=as,au=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function av(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let aw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ax=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,ay=a=>{let b=G(a??":");return RegExp(`^(?:[0-9A-F]{2}${b}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${b}){5}[0-9a-f]{2}$`)},az=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,aA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,aB=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,aC=/^[A-Za-z0-9_-]*$/,aD=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,aE=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,aF=/^\+[1-9]\d{6,14}$/,aG="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",aH=RegExp(`^${aG}$`);function aI(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}function aJ(a){return RegExp(`^${aI(a)}$`)}function aK(a){let b=aI({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let d=`${b}(?:${c.join("|")})`;return RegExp(`^${aG}T(?:${d})$`)}let aL=a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)},aM=/^-?\d+n?$/,aN=/^-?\d+$/,aO=/^-?\d+(?:\.\d+)?$/,aP=/^(?:true|false)$/i,aQ=/^null$/i,aR=/^undefined$/i,aS=/^[^A-Z]*$/,aT=/^[^a-z]*$/,aU=/^[0-9a-fA-F]*$/;function aV(a,b){return RegExp(`^[A-Za-z0-9+/]{${a}}${b}$`)}function aW(a){return RegExp(`^[A-Za-z0-9_-]{${a}}$`)}let aX=/^[0-9a-fA-F]{32}$/,aY=aV(22,"=="),aZ=aW(22),a$=/^[0-9a-fA-F]{40}$/,a_=aV(27,"="),a0=aW(27),a1=/^[0-9a-fA-F]{64}$/,a2=aV(43,"="),a3=aW(43),a4=/^[0-9a-fA-F]{96}$/,a5=aV(64,""),a6=aW(64),a7=/^[0-9a-fA-F]{128}$/,a8=aV(86,"=="),a9=aW(86),ba=j("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),bb={number:"number",bigint:"bigint",object:"date"},bc=j("$ZodCheckLessThan",(a,b)=>{ba.init(a,b);let c=bb[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.maximum:c.exclusiveMaximum)??1/0;b.value<d&&(b.inclusive?c.maximum=b.value:c.exclusiveMaximum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value<=b.value:d.value<b.value)||d.issues.push({origin:c,code:"too_big",maximum:"object"==typeof b.value?b.value.getTime():b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),bd=j("$ZodCheckGreaterThan",(a,b)=>{ba.init(a,b);let c=bb[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.minimum:c.exclusiveMinimum)??-1/0;b.value>d&&(b.inclusive?c.minimum=b.value:c.exclusiveMinimum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value>=b.value:d.value>b.value)||d.issues.push({origin:c,code:"too_small",minimum:"object"==typeof b.value?b.value.getTime():b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),be=j("$ZodCheckMultipleOf",(a,b)=>{ba.init(a,b),a._zod.onattach.push(a=>{var c;(c=a._zod.bag).multipleOf??(c.multipleOf=b.value)}),a._zod.check=c=>{if(typeof c.value!=typeof b.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof c.value?c.value%b.value===BigInt(0):0===function(a,b){let c=(a.toString().split(".")[1]||"").length,d=b.toString(),e=(d.split(".")[1]||"").length;if(0===e&&/\d?e-\d?/.test(d)){let a=d.match(/\d?e-(\d?)/);a?.[1]&&(e=Number.parseInt(a[1]))}let f=c>e?c:e;return Number.parseInt(a.toFixed(f).replace(".",""))%Number.parseInt(b.toFixed(f).replace(".",""))/10**f}(c.value,b.value))||c.issues.push({origin:typeof c.value,code:"not_multiple_of",divisor:b.value,input:c.value,inst:a,continue:!b.abort})}}),bf=j("$ZodCheckNumberFormat",(a,b)=>{ba.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=K[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=aN)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",continue:!1,input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,inclusive:!0,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,inclusive:!0,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inclusive:!0,inst:a,continue:!b.abort})}}),bg=j("$ZodCheckBigIntFormat",(a,b)=>{ba.init(a,b);let[c,d]=L[b.format];a._zod.onattach.push(a=>{let e=a._zod.bag;e.format=b.format,e.minimum=c,e.maximum=d}),a._zod.check=e=>{let f=e.value;f<c&&e.issues.push({origin:"bigint",input:f,code:"too_small",minimum:c,inclusive:!0,inst:a,continue:!b.abort}),f>d&&e.issues.push({origin:"bigint",input:f,code:"too_big",maximum:d,inclusive:!0,inst:a,continue:!b.abort})}}),bh=j("$ZodCheckMaxSize",(a,b)=>{var c;ba.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!s(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;d.size<=b.maximum||c.issues.push({origin:Q(d),code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bi=j("$ZodCheckMinSize",(a,b)=>{var c;ba.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!s(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;d.size>=b.minimum||c.issues.push({origin:Q(d),code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bj=j("$ZodCheckSizeEquals",(a,b)=>{var c;ba.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!s(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.size,c.maximum=b.size,c.size=b.size}),a._zod.check=c=>{let d=c.value,e=d.size;if(e===b.size)return;let f=e>b.size;c.issues.push({origin:Q(d),...f?{code:"too_big",maximum:b.size}:{code:"too_small",minimum:b.size},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),bk=j("$ZodCheckMaxLength",(a,b)=>{var c;ba.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!s(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=R(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bl=j("$ZodCheckMinLength",(a,b)=>{var c;ba.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!s(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=R(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bm=j("$ZodCheckLengthEquals",(a,b)=>{var c;ba.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!s(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=R(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),bn=j("$ZodCheckStringFormat",(a,b)=>{var c,d;ba.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})}),bo=j("$ZodCheckRegex",(a,b)=>{bn.init(a,b),a._zod.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:"regex",input:c.value,pattern:b.pattern.toString(),inst:a,continue:!b.abort})}}),bp=j("$ZodCheckLowerCase",(a,b)=>{b.pattern??(b.pattern=aS),bn.init(a,b)}),bq=j("$ZodCheckUpperCase",(a,b)=>{b.pattern??(b.pattern=aT),bn.init(a,b)}),br=j("$ZodCheckIncludes",(a,b)=>{ba.init(a,b);let c=G(b.includes),d=new RegExp("number"==typeof b.position?`^.{${b.position}}${c}`:c);b.pattern=d,a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(d)}),a._zod.check=c=>{c.value.includes(b.includes,b.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:b.includes,input:c.value,inst:a,continue:!b.abort})}}),bs=j("$ZodCheckStartsWith",(a,b)=>{ba.init(a,b);let c=RegExp(`^${G(b.prefix)}.*`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.startsWith(b.prefix)||c.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:b.prefix,input:c.value,inst:a,continue:!b.abort})}}),bt=j("$ZodCheckEndsWith",(a,b)=>{ba.init(a,b);let c=RegExp(`.*${G(b.suffix)}$`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.endsWith(b.suffix)||c.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:b.suffix,input:c.value,inst:a,continue:!b.abort})}});function bu(a,b,c){a.issues.length&&b.issues.push(...N(c,a.issues))}let bv=j("$ZodCheckProperty",(a,b)=>{ba.init(a,b),a._zod.check=a=>{let c=b.schema._zod.run({value:a.value[b.property],issues:[]},{});if(c instanceof Promise)return c.then(c=>bu(c,a,b.property));bu(c,a,b.property)}}),bw=j("$ZodCheckMimeType",(a,b)=>{ba.init(a,b);let c=new Set(b.mime);a._zod.onattach.push(a=>{a._zod.bag.mime=b.mime}),a._zod.check=d=>{c.has(d.value.type)||d.issues.push({code:"invalid_value",values:b.mime,input:d.value.type,inst:a,continue:!b.abort})}}),bx=j("$ZodCheckOverwrite",(a,b)=>{ba.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});class by{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}}let bz={major:4,minor:3,patch:5},bA=j("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=bz;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=M(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new k;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=M(a,b)))});else{if(a.issues.length===b)continue;e||(e=M(a,b))}}return d?d.then(()=>a):a},c=(c,e,f)=>{if(M(c))return c.aborted=!0,c;let g=b(e,d,f);if(g instanceof Promise){if(!1===f.async)throw new k;return g.then(b=>a._zod.parse(b,f))}return a._zod.parse(g,f)};a._zod.run=(e,f)=>{if(f.skipChecks)return a._zod.parse(e,f);if("backward"===f.direction){let b=a._zod.parse({value:e.value,issues:[]},{...f,skipChecks:!0});return b instanceof Promise?b.then(a=>c(a,e,f)):c(b,e,f)}let g=a._zod.parse(e,f);if(g instanceof Promise){if(!1===f.async)throw new k;return g.then(a=>b(a,d,f))}return b(g,d,f)}}v(a,"~standard",()=>({validate:b=>{try{let c=_(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return ab(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}))}),bB=j("$ZodString",(a,b)=>{bA.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??aL(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),bC=j("$ZodStringFormat",(a,b)=>{bn.init(a,b),bB.init(a,b)}),bD=j("$ZodGUID",(a,b)=>{b.pattern??(b.pattern=ak),bC.init(a,b)}),bE=j("$ZodUUID",(a,b)=>{if(b.version){let a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[b.version];if(void 0===a)throw Error(`Invalid UUID version: "${b.version}"`);b.pattern??(b.pattern=al(a))}else b.pattern??(b.pattern=al());bC.init(a,b)}),bF=j("$ZodEmail",(a,b)=>{b.pattern??(b.pattern=ap),bC.init(a,b)}),bG=j("$ZodURL",(a,b)=>{bC.init(a,b),a._zod.check=c=>{try{let d=c.value.trim(),e=new URL(d);b.hostname&&(b.hostname.lastIndex=0,b.hostname.test(e.hostname)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:b.hostname.source,input:c.value,inst:a,continue:!b.abort})),b.protocol&&(b.protocol.lastIndex=0,b.protocol.test(e.protocol.endsWith(":")?e.protocol.slice(0,-1):e.protocol)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:b.protocol.source,input:c.value,inst:a,continue:!b.abort})),b.normalize?c.value=e.href:c.value=d;return}catch(d){c.issues.push({code:"invalid_format",format:"url",input:c.value,inst:a,continue:!b.abort})}}}),bH=j("$ZodEmoji",(a,b)=>{b.pattern??(b.pattern=av()),bC.init(a,b)}),bI=j("$ZodNanoID",(a,b)=>{b.pattern??(b.pattern=ah),bC.init(a,b)}),bJ=j("$ZodCUID",(a,b)=>{b.pattern??(b.pattern=ac),bC.init(a,b)}),bK=j("$ZodCUID2",(a,b)=>{b.pattern??(b.pattern=ad),bC.init(a,b)}),bL=j("$ZodULID",(a,b)=>{b.pattern??(b.pattern=ae),bC.init(a,b)}),bM=j("$ZodXID",(a,b)=>{b.pattern??(b.pattern=af),bC.init(a,b)}),bN=j("$ZodKSUID",(a,b)=>{b.pattern??(b.pattern=ag),bC.init(a,b)}),bO=j("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=aK(b)),bC.init(a,b)}),bP=j("$ZodISODate",(a,b)=>{b.pattern??(b.pattern=aH),bC.init(a,b)}),bQ=j("$ZodISOTime",(a,b)=>{b.pattern??(b.pattern=aJ(b)),bC.init(a,b)}),bR=j("$ZodISODuration",(a,b)=>{b.pattern??(b.pattern=ai),bC.init(a,b)}),bS=j("$ZodIPv4",(a,b)=>{b.pattern??(b.pattern=aw),bC.init(a,b),a._zod.bag.format="ipv4"}),bT=j("$ZodIPv6",(a,b)=>{b.pattern??(b.pattern=ax),bC.init(a,b),a._zod.bag.format="ipv6",a._zod.check=c=>{try{new URL(`http://[${c.value}]`)}catch{c.issues.push({code:"invalid_format",format:"ipv6",input:c.value,inst:a,continue:!b.abort})}}}),bU=j("$ZodMAC",(a,b)=>{b.pattern??(b.pattern=ay(b.delimiter)),bC.init(a,b),a._zod.bag.format="mac"}),bV=j("$ZodCIDRv4",(a,b)=>{b.pattern??(b.pattern=az),bC.init(a,b)}),bW=j("$ZodCIDRv6",(a,b)=>{b.pattern??(b.pattern=aA),bC.init(a,b),a._zod.check=c=>{let d=c.value.split("/");try{if(2!==d.length)throw Error();let[a,b]=d;if(!b)throw Error();let c=Number(b);if(`${c}`!==b||c<0||c>128)throw Error();new URL(`http://[${a}]`)}catch{c.issues.push({code:"invalid_format",format:"cidrv6",input:c.value,inst:a,continue:!b.abort})}}});function bX(a){if(""===a)return!0;if(a.length%4!=0)return!1;try{return atob(a),!0}catch{return!1}}let bY=j("$ZodBase64",(a,b)=>{b.pattern??(b.pattern=aB),bC.init(a,b),a._zod.bag.contentEncoding="base64",a._zod.check=c=>{bX(c.value)||c.issues.push({code:"invalid_format",format:"base64",input:c.value,inst:a,continue:!b.abort})}}),bZ=j("$ZodBase64URL",(a,b)=>{b.pattern??(b.pattern=aC),bC.init(a,b),a._zod.bag.contentEncoding="base64url",a._zod.check=c=>{!function(a){if(!aC.test(a))return!1;let b=a.replace(/[-_]/g,a=>"-"===a?"+":"/");return bX(b.padEnd(4*Math.ceil(b.length/4),"="))}(c.value)&&c.issues.push({code:"invalid_format",format:"base64url",input:c.value,inst:a,continue:!b.abort})}}),b$=j("$ZodE164",(a,b)=>{b.pattern??(b.pattern=aF),bC.init(a,b)}),b_=j("$ZodJWT",(a,b)=>{bC.init(a,b),a._zod.check=c=>{!function(a,b=null){try{let c=a.split(".");if(3!==c.length)return!1;let[d]=c;if(!d)return!1;let e=JSON.parse(atob(d));if("typ"in e&&e?.typ!=="JWT"||!e.alg||b&&(!("alg"in e)||e.alg!==b))return!1;return!0}catch{return!1}}(c.value,b.alg)&&c.issues.push({code:"invalid_format",format:"jwt",input:c.value,inst:a,continue:!b.abort})}}),b0=j("$ZodCustomStringFormat",(a,b)=>{bC.init(a,b),a._zod.check=c=>{b.fn(c.value)||c.issues.push({code:"invalid_format",format:b.format,input:c.value,inst:a,continue:!b.abort})}}),b1=j("$ZodNumber",(a,b)=>{bA.init(a,b),a._zod.pattern=a._zod.bag.pattern??aO,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}}),b2=j("$ZodNumberFormat",(a,b)=>{bf.init(a,b),b1.init(a,b)}),b3=j("$ZodBoolean",(a,b)=>{bA.init(a,b),a._zod.pattern=aP,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),b4=j("$ZodBigInt",(a,b)=>{bA.init(a,b),a._zod.pattern=aM,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=BigInt(c.value)}catch(a){}return"bigint"==typeof c.value||c.issues.push({expected:"bigint",code:"invalid_type",input:c.value,inst:a}),c}}),b5=j("$ZodBigIntFormat",(a,b)=>{bg.init(a,b),b4.init(a,b)}),b6=j("$ZodSymbol",(a,b)=>{bA.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return"symbol"==typeof d||b.issues.push({expected:"symbol",code:"invalid_type",input:d,inst:a}),b}}),b7=j("$ZodUndefined",(a,b)=>{bA.init(a,b),a._zod.pattern=aR,a._zod.values=new Set([void 0]),a._zod.optin="optional",a._zod.optout="optional",a._zod.parse=(b,c)=>{let d=b.value;return void 0===d||b.issues.push({expected:"undefined",code:"invalid_type",input:d,inst:a}),b}}),b8=j("$ZodNull",(a,b)=>{bA.init(a,b),a._zod.pattern=aQ,a._zod.values=new Set([null]),a._zod.parse=(b,c)=>{let d=b.value;return null===d||b.issues.push({expected:"null",code:"invalid_type",input:d,inst:a}),b}}),b9=j("$ZodAny",(a,b)=>{bA.init(a,b),a._zod.parse=a=>a}),ca=j("$ZodUnknown",(a,b)=>{bA.init(a,b),a._zod.parse=a=>a}),cb=j("$ZodNever",(a,b)=>{bA.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)}),cc=j("$ZodVoid",(a,b)=>{bA.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return void 0===d||b.issues.push({expected:"void",code:"invalid_type",input:d,inst:a}),b}}),cd=j("$ZodDate",(a,b)=>{bA.init(a,b),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=new Date(c.value)}catch(a){}let e=c.value,f=e instanceof Date;return f&&!Number.isNaN(e.getTime())||c.issues.push({expected:"date",code:"invalid_type",input:e,...f?{received:"Invalid Date"}:{},inst:a}),c}});function ce(a,b,c){a.issues.length&&b.issues.push(...N(c,a.issues)),b.value[c]=a.value}let cf=j("$ZodArray",(a,b)=>{bA.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>ce(b,c,a))):ce(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function cg(a,b,c,d,e){if(a.issues.length){if(e&&!(c in d))return;b.issues.push(...N(c,a.issues))}void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}function ch(a){var b;let c=Object.keys(a.shape);for(let b of c)if(!a.shape?.[b]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${b}": expected a Zod schema`);let d=Object.keys(b=a.shape).filter(a=>"optional"===b[a]._zod.optin&&"optional"===b[a]._zod.optout);return{...a,keys:c,keySet:new Set(c),numKeys:c.length,optionalKeys:new Set(d)}}function ci(a,b,c,d,e,f){let g=[],h=e.keySet,i=e.catchall._zod,j=i.def.type,k="optional"===i.optout;for(let e in b){if(h.has(e))continue;if("never"===j){g.push(e);continue}let f=i.run({value:b[e],issues:[]},d);f instanceof Promise?a.push(f.then(a=>cg(a,c,e,b,k))):cg(f,c,e,b,k)}return(g.length&&c.issues.push({code:"unrecognized_keys",keys:g,input:b,inst:f}),a.length)?Promise.all(a).then(()=>c):c}let cj=j("$ZodObject",(a,b)=>{let c;bA.init(a,b);let d=Object.getOwnPropertyDescriptor(b,"shape");if(!d?.get){let a=b.shape;Object.defineProperty(b,"shape",{get:()=>{let c={...a};return Object.defineProperty(b,"shape",{value:c}),c}})}let e=r(()=>ch(b));v(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=b.catchall;a._zod.parse=(b,d)=>{c??(c=e.value);let g=b.value;if(!A(g))return b.issues.push({expected:"object",code:"invalid_type",input:g,inst:a}),b;b.value={};let h=[],i=c.shape;for(let a of c.keys){let c=i[a],e="optional"===c._zod.optout,f=c._zod.run({value:g[a],issues:[]},d);f instanceof Promise?h.push(f.then(c=>cg(c,b,a,g,e))):cg(f,b,a,g,e)}return f?ci(h,g,b,d,e.value,a):h.length?Promise.all(h).then(()=>b):b}}),ck=j("$ZodObjectJIT",(a,b)=>{let c,d;cj.init(a,b);let e=a._zod.parse,f=r(()=>ch(b)),g=!m.jitless,h=g&&B.value,i=b.catchall;a._zod.parse=(j,k)=>{d??(d=f.value);let l=j.value;return A(l)?g&&h&&k?.async===!1&&!0!==k.jitless?(c||(c=(a=>{let b=new by(["shape","payload","ctx"]),c=f.value,d=a=>{let b=y(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let e=Object.create(null),g=0;for(let a of c.keys)e[a]=`key_${g++}`;for(let f of(b.write("const newResult = {};"),c.keys)){let c=e[f],g=y(f),h=a[f],i=h?._zod?.optout==="optional";b.write(`const ${c} = ${d(f)};`),i?b.write(`
        if (${c}.issues.length) {
          if (${g} in input) {
            payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${g}, ...iss.path] : [${g}]
            })));
          }
        }
        
        if (${c}.value === undefined) {
          if (${g} in input) {
            newResult[${g}] = undefined;
          }
        } else {
          newResult[${g}] = ${c}.value;
        }
        
      `):b.write(`
        if (${c}.issues.length) {
          payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${g}, ...iss.path] : [${g}]
          })));
        }
        
        if (${c}.value === undefined) {
          if (${g} in input) {
            newResult[${g}] = undefined;
          }
        } else {
          newResult[${g}] = ${c}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),j=c(j,k),i)?ci([],l,j,k,d,a):j:e(j,k):(j.issues.push({expected:"object",code:"invalid_type",input:l,inst:a}),j)}});function cl(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;let e=a.filter(a=>!M(a));return 1===e.length?(b.value=e[0].value,e[0]):(b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>P(a,d,n())))}),b)}let cm=j("$ZodUnion",(a,b)=>{bA.init(a,b),v(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),v(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),v(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),v(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>t(a.source)).join("|")})$`)}});let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);if(b instanceof Promise)h.push(b),g=!0;else{if(0===b.issues.length)return b;h.push(b)}}return g?Promise.all(h).then(b=>cl(b,e,a,f)):cl(h,e,a,f)}});function cn(a,b,c,d){let e=a.filter(a=>0===a.issues.length);return 1===e.length?b.value=e[0].value:0===e.length?b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>P(a,d,n())))}):b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:[],inclusive:!1}),b}let co=j("$ZodXor",(a,b)=>{cm.init(a,b),b.inclusive=!1;let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);b instanceof Promise?(h.push(b),g=!0):h.push(b)}return g?Promise.all(h).then(b=>cn(b,e,a,f)):cn(h,e,a,f)}}),cp=j("$ZodDiscriminatedUnion",(a,b)=>{b.inclusive=!1,cm.init(a,b);let c=a._zod.parse;v(a._zod,"propValues",()=>{let a={};for(let c of b.options){let d=c._zod.propValues;if(!d||0===Object.keys(d).length)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(c)}"`);for(let[b,c]of Object.entries(d))for(let d of(a[b]||(a[b]=new Set),c))a[b].add(d)}return a});let d=r(()=>{let a=b.options,c=new Map;for(let d of a){let a=d._zod.propValues?.[b.discriminator];if(!a||0===a.size)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(d)}"`);for(let b of a){if(c.has(b))throw Error(`Duplicate discriminator value "${String(b)}"`);c.set(b,d)}}return c});a._zod.parse=(e,f)=>{let g=e.value;if(!A(g))return e.issues.push({code:"invalid_type",expected:"object",input:g,inst:a}),e;let h=d.value.get(g?.[b.discriminator]);return h?h._zod.run(e,f):b.unionFallback?c(e,f):(e.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:b.discriminator,input:g,path:[b.discriminator],inst:a}),e)}}),cq=j("$ZodIntersection",(a,b)=>{bA.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>cr(a,b,c)):cr(a,e,f)}});function cr(a,b,c){let d,e=new Map;for(let c of b.issues)if("unrecognized_keys"===c.code)for(let a of(d??(d=c),c.keys))e.has(a)||e.set(a,{}),e.get(a).l=!0;else a.issues.push(c);for(let b of c.issues)if("unrecognized_keys"===b.code)for(let a of b.keys)e.has(a)||e.set(a,{}),e.get(a).r=!0;else a.issues.push(b);let f=[...e].filter(([,a])=>a.l&&a.r).map(([a])=>a);if(f.length&&d&&a.issues.push({...d,keys:f}),M(a))return a;let g=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(C(b)&&C(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!g.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(g.mergeErrorPath)}`);return a.value=g.data,a}let cs=j("$ZodTuple",(a,b)=>{bA.init(a,b);let c=b.items;a._zod.parse=(d,e)=>{let f=d.value;if(!Array.isArray(f))return d.issues.push({input:f,inst:a,expected:"tuple",code:"invalid_type"}),d;d.value=[];let g=[],h=[...c].reverse().findIndex(a=>"optional"!==a._zod.optin),i=-1===h?0:c.length-h;if(!b.rest){let b=f.length>c.length,e=f.length<i-1;if(b||e)return d.issues.push({...b?{code:"too_big",maximum:c.length,inclusive:!0}:{code:"too_small",minimum:c.length},input:f,inst:a,origin:"array"}),d}let j=-1;for(let a of c){if(++j>=f.length&&j>=i)continue;let b=a._zod.run({value:f[j],issues:[]},e);b instanceof Promise?g.push(b.then(a=>ct(a,d,j))):ct(b,d,j)}if(b.rest)for(let a of f.slice(c.length)){j++;let c=b.rest._zod.run({value:a,issues:[]},e);c instanceof Promise?g.push(c.then(a=>ct(a,d,j))):ct(c,d,j)}return g.length?Promise.all(g).then(()=>d):d}});function ct(a,b,c){a.issues.length&&b.issues.push(...N(c,a.issues)),b.value[c]=a.value}let cu=j("$ZodRecord",(a,b)=>{bA.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!C(e))return c.issues.push({expected:"record",code:"invalid_type",input:e,inst:a}),c;let f=[],g=b.keyType._zod.values;if(g){let h;c.value={};let i=new Set;for(let a of g)if("string"==typeof a||"number"==typeof a||"symbol"==typeof a){i.add("number"==typeof a?a.toString():a);let g=b.valueType._zod.run({value:e[a],issues:[]},d);g instanceof Promise?f.push(g.then(b=>{b.issues.length&&c.issues.push(...N(a,b.issues)),c.value[a]=b.value})):(g.issues.length&&c.issues.push(...N(a,g.issues)),c.value[a]=g.value)}for(let a in e)i.has(a)||(h=h??[]).push(a);h&&h.length>0&&c.issues.push({code:"unrecognized_keys",input:e,inst:a,keys:h})}else for(let g of(c.value={},Reflect.ownKeys(e))){if("__proto__"===g)continue;let h=b.keyType._zod.run({value:g,issues:[]},d);if(h instanceof Promise)throw Error("Async schemas not supported in object keys currently");if("string"==typeof g&&aO.test(g)&&h.issues.length&&h.issues.some(a=>"invalid_type"===a.code&&"number"===a.expected)){let a=b.keyType._zod.run({value:Number(g),issues:[]},d);if(a instanceof Promise)throw Error("Async schemas not supported in object keys currently");0===a.issues.length&&(h=a)}if(h.issues.length){"loose"===b.mode?c.value[g]=e[g]:c.issues.push({code:"invalid_key",origin:"record",issues:h.issues.map(a=>P(a,d,n())),input:g,path:[g],inst:a});continue}let i=b.valueType._zod.run({value:e[g],issues:[]},d);i instanceof Promise?f.push(i.then(a=>{a.issues.length&&c.issues.push(...N(g,a.issues)),c.value[h.value]=a.value})):(i.issues.length&&c.issues.push(...N(g,i.issues)),c.value[h.value]=i.value)}return f.length?Promise.all(f).then(()=>c):c}}),cv=j("$ZodMap",(a,b)=>{bA.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!(e instanceof Map))return c.issues.push({expected:"map",code:"invalid_type",input:e,inst:a}),c;let f=[];for(let[g,h]of(c.value=new Map,e)){let i=b.keyType._zod.run({value:g,issues:[]},d),j=b.valueType._zod.run({value:h,issues:[]},d);i instanceof Promise||j instanceof Promise?f.push(Promise.all([i,j]).then(([b,f])=>{cw(b,f,c,g,e,a,d)})):cw(i,j,c,g,e,a,d)}return f.length?Promise.all(f).then(()=>c):c}});function cw(a,b,c,d,e,f,g){a.issues.length&&(E.has(typeof d)?c.issues.push(...N(d,a.issues)):c.issues.push({code:"invalid_key",origin:"map",input:e,inst:f,issues:a.issues.map(a=>P(a,g,n()))})),b.issues.length&&(E.has(typeof d)?c.issues.push(...N(d,b.issues)):c.issues.push({origin:"map",code:"invalid_element",input:e,inst:f,key:d,issues:b.issues.map(a=>P(a,g,n()))})),c.value.set(a.value,b.value)}let cx=j("$ZodSet",(a,b)=>{bA.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!(e instanceof Set))return c.issues.push({input:e,inst:a,expected:"set",code:"invalid_type"}),c;let f=[];for(let a of(c.value=new Set,e)){let e=b.valueType._zod.run({value:a,issues:[]},d);e instanceof Promise?f.push(e.then(a=>cy(a,c))):cy(e,c)}return f.length?Promise.all(f).then(()=>c):c}});function cy(a,b){a.issues.length&&b.issues.push(...a.issues),b.value.add(a.value)}let cz=j("$ZodEnum",(a,b)=>{bA.init(a,b);let c=o(b.entries),d=new Set(c);a._zod.values=d,a._zod.pattern=RegExp(`^(${c.filter(a=>E.has(typeof a)).map(a=>"string"==typeof a?G(a):a.toString()).join("|")})$`),a._zod.parse=(b,e)=>{let f=b.value;return d.has(f)||b.issues.push({code:"invalid_value",values:c,input:f,inst:a}),b}}),cA=j("$ZodLiteral",(a,b)=>{if(bA.init(a,b),0===b.values.length)throw Error("Cannot create literal schema with no valid values");let c=new Set(b.values);a._zod.values=c,a._zod.pattern=RegExp(`^(${b.values.map(a=>"string"==typeof a?G(a):a?G(a.toString()):String(a)).join("|")})$`),a._zod.parse=(d,e)=>{let f=d.value;return c.has(f)||d.issues.push({code:"invalid_value",values:b.values,input:f,inst:a}),d}}),cB=j("$ZodFile",(a,b)=>{bA.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return d instanceof File||b.issues.push({expected:"file",code:"invalid_type",input:d,inst:a}),b}}),cC=j("$ZodTransform",(a,b)=>{bA.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new l(a.constructor.name);let e=b.transform(c.value,c);if(d.async)return(e instanceof Promise?e:Promise.resolve(e)).then(a=>(c.value=a,c));if(e instanceof Promise)throw new k;return c.value=e,c}});function cD(a,b){return a.issues.length&&void 0===b?{issues:[],value:void 0}:a}let cE=j("$ZodOptional",(a,b)=>{bA.init(a,b),a._zod.optin="optional",a._zod.optout="optional",v(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),v(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${t(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>{if("optional"===b.innerType._zod.optin){let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>cD(b,a.value)):cD(d,a.value)}return void 0===a.value?a:b.innerType._zod.run(a,c)}}),cF=j("$ZodExactOptional",(a,b)=>{cE.init(a,b),v(a._zod,"values",()=>b.innerType._zod.values),v(a._zod,"pattern",()=>b.innerType._zod.pattern),a._zod.parse=(a,c)=>b.innerType._zod.run(a,c)}),cG=j("$ZodNullable",(a,b)=>{bA.init(a,b),v(a._zod,"optin",()=>b.innerType._zod.optin),v(a._zod,"optout",()=>b.innerType._zod.optout),v(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${t(a.source)}|null)$`):void 0}),v(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),cH=j("$ZodDefault",(a,b)=>{bA.init(a,b),a._zod.optin="optional",v(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>cI(a,b)):cI(d,b)}});function cI(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let cJ=j("$ZodPrefault",(a,b)=>{bA.init(a,b),a._zod.optin="optional",v(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>("backward"===c.direction||void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),cK=j("$ZodNonOptional",(a,b)=>{bA.init(a,b),v(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>cL(b,a)):cL(e,a)}});function cL(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}let cM=j("$ZodSuccess",(a,b)=>{bA.init(a,b),a._zod.parse=(a,c)=>{if("backward"===c.direction)throw new l("ZodSuccess");let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>(a.value=0===b.issues.length,a)):(a.value=0===d.issues.length,a)}}),cN=j("$ZodCatch",(a,b)=>{bA.init(a,b),v(a._zod,"optin",()=>b.innerType._zod.optin),v(a._zod,"optout",()=>b.innerType._zod.optout),v(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>P(a,c,n()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>P(a,c,n()))},input:a.value}),a.issues=[]),a)}}),cO=j("$ZodNaN",(a,b)=>{bA.init(a,b),a._zod.parse=(b,c)=>("number"==typeof b.value&&Number.isNaN(b.value)||b.issues.push({input:b.value,inst:a,expected:"nan",code:"invalid_type"}),b)}),cP=j("$ZodPipe",(a,b)=>{bA.init(a,b),v(a._zod,"values",()=>b.in._zod.values),v(a._zod,"optin",()=>b.in._zod.optin),v(a._zod,"optout",()=>b.out._zod.optout),v(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("backward"===c.direction){let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>cQ(a,b.in,c)):cQ(d,b.in,c)}let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>cQ(a,b.out,c)):cQ(d,b.out,c)}});function cQ(a,b,c){return a.issues.length?(a.aborted=!0,a):b._zod.run({value:a.value,issues:a.issues},c)}let cR=j("$ZodCodec",(a,b)=>{bA.init(a,b),v(a._zod,"values",()=>b.in._zod.values),v(a._zod,"optin",()=>b.in._zod.optin),v(a._zod,"optout",()=>b.out._zod.optout),v(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("forward"===(c.direction||"forward")){let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>cS(a,b,c)):cS(d,b,c)}{let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>cS(a,b,c)):cS(d,b,c)}}});function cS(a,b,c){if(a.issues.length)return a.aborted=!0,a;if("forward"===(c.direction||"forward")){let d=b.transform(a.value,a);return d instanceof Promise?d.then(d=>cT(a,d,b.out,c)):cT(a,d,b.out,c)}{let d=b.reverseTransform(a.value,a);return d instanceof Promise?d.then(d=>cT(a,d,b.in,c)):cT(a,d,b.in,c)}}function cT(a,b,c,d){return a.issues.length?(a.aborted=!0,a):c._zod.run({value:b,issues:a.issues},d)}let cU=j("$ZodReadonly",(a,b)=>{bA.init(a,b),v(a._zod,"propValues",()=>b.innerType._zod.propValues),v(a._zod,"values",()=>b.innerType._zod.values),v(a._zod,"optin",()=>b.innerType?._zod?.optin),v(a._zod,"optout",()=>b.innerType?._zod?.optout),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(cV):cV(d)}});function cV(a){return a.value=Object.freeze(a.value),a}let cW=j("$ZodTemplateLiteral",(a,b)=>{bA.init(a,b);let c=[];for(let a of b.parts)if("object"==typeof a&&null!==a){if(!a._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...a._zod.traits].shift()}`);let b=a._zod.pattern instanceof RegExp?a._zod.pattern.source:a._zod.pattern;if(!b)throw Error(`Invalid template literal part: ${a._zod.traits}`);let d=+!!b.startsWith("^"),e=b.endsWith("$")?b.length-1:b.length;c.push(b.slice(d,e))}else if(null===a||F.has(typeof a))c.push(G(`${a}`));else throw Error(`Invalid template literal part: ${a}`);a._zod.pattern=RegExp(`^${c.join("")}$`),a._zod.parse=(c,d)=>("string"!=typeof c.value?c.issues.push({input:c.value,inst:a,expected:"string",code:"invalid_type"}):(a._zod.pattern.lastIndex=0,a._zod.pattern.test(c.value)||c.issues.push({input:c.value,inst:a,code:"invalid_format",format:b.format??"template_literal",pattern:a._zod.pattern.source})),c)}),cX=j("$ZodFunction",(a,b)=>(bA.init(a,b),a._def=b,a._zod.def=b,a.implement=b=>{if("function"!=typeof b)throw Error("implement() must be called with a function");return function(...c){let d=Reflect.apply(b,this,a._def.input?X(a._def.input,c):c);return a._def.output?X(a._def.output,d):d}},a.implementAsync=b=>{if("function"!=typeof b)throw Error("implementAsync() must be called with a function");return async function(...c){let d=a._def.input?await Z(a._def.input,c):c,e=await Reflect.apply(b,this,d);return a._def.output?await Z(a._def.output,e):e}},a._zod.parse=(b,c)=>("function"!=typeof b.value?b.issues.push({code:"invalid_type",expected:"function",input:b.value,inst:a}):a._def.output&&"promise"===a._def.output._zod.def.type?b.value=a.implementAsync(b.value):b.value=a.implement(b.value),b),a.input=(...b)=>{let c=a.constructor;return new c(Array.isArray(b[0])?{type:"function",input:new cs({type:"tuple",items:b[0],rest:b[1]}),output:a._def.output}:{type:"function",input:b[0],output:a._def.output})},a.output=b=>new a.constructor({type:"function",input:a._def.input,output:b}),a)),cY=j("$ZodPromise",(a,b)=>{bA.init(a,b),a._zod.parse=(a,c)=>Promise.resolve(a.value).then(a=>b.innerType._zod.run({value:a,issues:[]},c))}),cZ=j("$ZodLazy",(a,b)=>{bA.init(a,b),v(a._zod,"innerType",()=>b.getter()),v(a._zod,"pattern",()=>a._zod.innerType?._zod?.pattern),v(a._zod,"propValues",()=>a._zod.innerType?._zod?.propValues),v(a._zod,"optin",()=>a._zod.innerType?._zod?.optin??void 0),v(a._zod,"optout",()=>a._zod.innerType?._zod?.optout??void 0),a._zod.parse=(b,c)=>a._zod.innerType._zod.run(b,c)}),c$=j("$ZodCustom",(a,b)=>{ba.init(a,b),bA.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>c_(b,c,d,a));c_(e,c,d,a)}});function c_(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(S(a))}}Symbol("ZodOutput"),Symbol("ZodInput");class c0{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...b){let c=b[0];return this._map.set(a,c),c&&"object"==typeof c&&"id"in c&&this._idmap.set(c.id,a),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};delete c.id;let d={...c,...this._map.get(a)};return Object.keys(d).length?d:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}(d=globalThis).__zod_globalRegistry??(d.__zod_globalRegistry=new c0);let c1=globalThis.__zod_globalRegistry;function c2(a,b){return new a({type:"string",format:"email",check:"string_format",abort:!1,...I(b)})}function c3(a,b){return new a({type:"string",format:"guid",check:"string_format",abort:!1,...I(b)})}function c4(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,...I(b)})}function c5(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...I(b)})}function c6(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...I(b)})}function c7(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...I(b)})}function c8(a,b){return new a({type:"string",format:"url",check:"string_format",abort:!1,...I(b)})}function c9(a,b){return new a({type:"string",format:"emoji",check:"string_format",abort:!1,...I(b)})}function da(a,b){return new a({type:"string",format:"nanoid",check:"string_format",abort:!1,...I(b)})}function db(a,b){return new a({type:"string",format:"cuid",check:"string_format",abort:!1,...I(b)})}function dc(a,b){return new a({type:"string",format:"cuid2",check:"string_format",abort:!1,...I(b)})}function dd(a,b){return new a({type:"string",format:"ulid",check:"string_format",abort:!1,...I(b)})}function de(a,b){return new a({type:"string",format:"xid",check:"string_format",abort:!1,...I(b)})}function df(a,b){return new a({type:"string",format:"ksuid",check:"string_format",abort:!1,...I(b)})}function dg(a,b){return new a({type:"string",format:"ipv4",check:"string_format",abort:!1,...I(b)})}function dh(a,b){return new a({type:"string",format:"ipv6",check:"string_format",abort:!1,...I(b)})}function di(a,b){return new a({type:"string",format:"cidrv4",check:"string_format",abort:!1,...I(b)})}function dj(a,b){return new a({type:"string",format:"cidrv6",check:"string_format",abort:!1,...I(b)})}function dk(a,b){return new a({type:"string",format:"base64",check:"string_format",abort:!1,...I(b)})}function dl(a,b){return new a({type:"string",format:"base64url",check:"string_format",abort:!1,...I(b)})}function dm(a,b){return new a({type:"string",format:"e164",check:"string_format",abort:!1,...I(b)})}function dn(a,b){return new a({type:"string",format:"jwt",check:"string_format",abort:!1,...I(b)})}function dp(a,b){return new bc({check:"less_than",...I(b),value:a,inclusive:!1})}function dq(a,b){return new bc({check:"less_than",...I(b),value:a,inclusive:!0})}function dr(a,b){return new bd({check:"greater_than",...I(b),value:a,inclusive:!1})}function ds(a,b){return new bd({check:"greater_than",...I(b),value:a,inclusive:!0})}function dt(a){return dr(0,a)}function du(a){return dp(0,a)}function dv(a){return dq(0,a)}function dw(a){return ds(0,a)}function dx(a,b){return new be({check:"multiple_of",...I(b),value:a})}function dy(a,b){return new bh({check:"max_size",...I(b),maximum:a})}function dz(a,b){return new bi({check:"min_size",...I(b),minimum:a})}function dA(a,b){return new bj({check:"size_equals",...I(b),size:a})}function dB(a,b){return new bk({check:"max_length",...I(b),maximum:a})}function dC(a,b){return new bl({check:"min_length",...I(b),minimum:a})}function dD(a,b){return new bm({check:"length_equals",...I(b),length:a})}function dE(a,b){return new bo({check:"string_format",format:"regex",...I(b),pattern:a})}function dF(a){return new bp({check:"string_format",format:"lowercase",...I(a)})}function dG(a){return new bq({check:"string_format",format:"uppercase",...I(a)})}function dH(a,b){return new br({check:"string_format",format:"includes",...I(b),includes:a})}function dI(a,b){return new bs({check:"string_format",format:"starts_with",...I(b),prefix:a})}function dJ(a,b){return new bt({check:"string_format",format:"ends_with",...I(b),suffix:a})}function dK(a,b,c){return new bv({check:"property",property:a,schema:b,...I(c)})}function dL(a,b){return new bw({check:"mime_type",mime:a,...I(b)})}function dM(a){return new bx({check:"overwrite",tx:a})}function dN(a){return dM(b=>b.normalize(a))}function dO(){return dM(a=>a.trim())}function dP(){return dM(a=>a.toLowerCase())}function dQ(){return dM(a=>a.toUpperCase())}function dR(){return dM(a=>a.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""))}function dS(a,b,c,d={}){let e=I(d),f={...I(d),check:"string_format",type:"string",format:b,fn:"function"==typeof c?c:a=>c.test(a),...e};return c instanceof RegExp&&(f.pattern=c),new a(f)}function dT(a){let b=a?.target??"draft-2020-12";return"draft-4"===b&&(b="draft-04"),"draft-7"===b&&(b="draft-07"),{processors:a.processors??{},metadataRegistry:a?.metadata??c1,target:b,unrepresentable:a?.unrepresentable??"throw",override:a?.override??(()=>{}),io:a?.io??"output",counter:0,seen:new Map,cycles:a?.cycles??"ref",reused:a?.reused??"inline",external:a?.external??void 0}}function dU(a,b,c={path:[],schemaPath:[]}){var d;let e=a._zod.def,f=b.seen.get(a);if(f)return f.count++,c.schemaPath.includes(a)&&(f.cycle=c.path),f.schema;let g={schema:{},count:1,cycle:void 0,path:c.path};b.seen.set(a,g);let h=a._zod.toJSONSchema?.();if(h)g.schema=h;else{let d={...c,schemaPath:[...c.schemaPath,a],path:c.path};if(a._zod.processJSONSchema)a._zod.processJSONSchema(b,g.schema,d);else{let c=g.schema,f=b.processors[e.type];if(!f)throw Error(`[toJSONSchema]: Non-representable type encountered: ${e.type}`);f(a,b,c,d)}let f=a._zod.parent;f&&(g.ref||(g.ref=f),dU(f,b,d),b.seen.get(f).isParent=!0)}let i=b.metadataRegistry.get(a);return i&&Object.assign(g.schema,i),"input"===b.io&&function a(b,c){let d=c??{seen:new Set};if(d.seen.has(b))return!1;d.seen.add(b);let e=b._zod.def;if("transform"===e.type)return!0;if("array"===e.type)return a(e.element,d);if("set"===e.type)return a(e.valueType,d);if("lazy"===e.type)return a(e.getter(),d);if("promise"===e.type||"optional"===e.type||"nonoptional"===e.type||"nullable"===e.type||"readonly"===e.type||"default"===e.type||"prefault"===e.type)return a(e.innerType,d);if("intersection"===e.type)return a(e.left,d)||a(e.right,d);if("record"===e.type||"map"===e.type)return a(e.keyType,d)||a(e.valueType,d);if("pipe"===e.type)return a(e.in,d)||a(e.out,d);if("object"===e.type){for(let b in e.shape)if(a(e.shape[b],d))return!0;return!1}if("union"===e.type){for(let b of e.options)if(a(b,d))return!0;return!1}if("tuple"===e.type){for(let b of e.items)if(a(b,d))return!0;if(e.rest&&a(e.rest,d))return!0}return!1}(a)&&(delete g.schema.examples,delete g.schema.default),"input"===b.io&&g.schema._prefault&&((d=g.schema).default??(d.default=g.schema._prefault)),delete g.schema._prefault,b.seen.get(a).schema}function dV(a,b){let c=a.seen.get(b);if(!c)throw Error("Unprocessed schema. This is a bug in Zod.");let d=new Map;for(let b of a.seen.entries()){let c=a.metadataRegistry.get(b[0])?.id;if(c){let a=d.get(c);if(a&&a!==b[0])throw Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);d.set(c,b[0])}}let e=b=>{if(b[1].schema.$ref)return;let d=b[1],{ref:e,defId:f}=(b=>{let d="draft-2020-12"===a.target?"$defs":"definitions";if(a.external){let c=a.external.registry.get(b[0])?.id,e=a.external.uri??(a=>a);if(c)return{ref:e(c)};let f=b[1].defId??b[1].schema.id??`schema${a.counter++}`;return b[1].defId=f,{defId:f,ref:`${e("__shared")}#/${d}/${f}`}}if(b[1]===c)return{ref:"#"};let e=`#/${d}/`,f=b[1].schema.id??`__schema${a.counter++}`;return{defId:f,ref:e+f}})(b);d.def={...d.schema},f&&(d.defId=f);let g=d.schema;for(let a in g)delete g[a];g.$ref=e};if("throw"===a.cycles)for(let b of a.seen.entries()){let a=b[1];if(a.cycle)throw Error(`Cycle detected: #/${a.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let c of a.seen.entries()){let d=c[1];if(b===c[0]){e(c);continue}if(a.external){let d=a.external.registry.get(c[0])?.id;if(b!==c[0]&&d){e(c);continue}}if(a.metadataRegistry.get(c[0])?.id||d.cycle||d.count>1&&"ref"===a.reused){e(c);continue}}}function dW(a,b){let c=a.seen.get(b);if(!c)throw Error("Unprocessed schema. This is a bug in Zod.");let d=b=>{let c=a.seen.get(b);if(null===c.ref)return;let e=c.def??c.schema,f={...e},g=c.ref;if(c.ref=null,g){d(g);let c=a.seen.get(g),h=c.schema;if(h.$ref&&("draft-07"===a.target||"draft-04"===a.target||"openapi-3.0"===a.target)?(e.allOf=e.allOf??[],e.allOf.push(h)):Object.assign(e,h),Object.assign(e,f),b._zod.parent===g)for(let a in e)"$ref"!==a&&"allOf"!==a&&(a in f||delete e[a]);if(h.$ref)for(let a in e)"$ref"!==a&&"allOf"!==a&&a in c.def&&JSON.stringify(e[a])===JSON.stringify(c.def[a])&&delete e[a]}let h=b._zod.parent;if(h&&h!==g){d(h);let b=a.seen.get(h);if(b?.schema.$ref&&(e.$ref=b.schema.$ref,b.def))for(let a in e)"$ref"!==a&&"allOf"!==a&&a in b.def&&JSON.stringify(e[a])===JSON.stringify(b.def[a])&&delete e[a]}a.override({zodSchema:b,jsonSchema:e,path:c.path??[]})};for(let b of[...a.seen.entries()].reverse())d(b[0]);let e={};if("draft-2020-12"===a.target?e.$schema="https://json-schema.org/draft/2020-12/schema":"draft-07"===a.target?e.$schema="http://json-schema.org/draft-07/schema#":"draft-04"===a.target?e.$schema="http://json-schema.org/draft-04/schema#":a.target,a.external?.uri){let c=a.external.registry.get(b)?.id;if(!c)throw Error("Schema is missing an `id` property");e.$id=a.external.uri(c)}Object.assign(e,c.def??c.schema);let f=a.external?.defs??{};for(let b of a.seen.entries()){let a=b[1];a.def&&a.defId&&(f[a.defId]=a.def)}a.external||Object.keys(f).length>0&&("draft-2020-12"===a.target?e.$defs=f:e.definitions=f);try{let c=JSON.parse(JSON.stringify(e));return Object.defineProperty(c,"~standard",{value:{...b["~standard"],jsonSchema:{input:dX(b,"input",a.processors),output:dX(b,"output",a.processors)}},enumerable:!1,writable:!1}),c}catch(a){throw Error("Error converting schema to JSON.")}}let dX=(a,b,c={})=>d=>{let{libraryOptions:e,target:f}=d??{},g=dT({...e??{},target:f,io:b,processors:c});return dU(a,g),dV(g,a),dW(g,a)},dY={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},dZ=(a,b,c,d)=>{let e=a._zod.def,f=!1===e.inclusive,g=e.options.map((a,c)=>dU(a,b,{...d,path:[...d.path,f?"oneOf":"anyOf",c]}));f?c.oneOf=g:c.anyOf=g},d$=(a,b,c,d)=>{let e=a._zod.def;dU(e.innerType,b,d),b.seen.get(a).ref=e.innerType},d_=j("ZodISODateTime",(a,b)=>{bO.init(a,b),ep.init(a,b)});function d0(a){return new d_({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...I(a)})}let d1=j("ZodISODate",(a,b)=>{bP.init(a,b),ep.init(a,b)});function d2(a){return new d1({type:"string",format:"date",check:"string_format",...I(a)})}let d3=j("ZodISOTime",(a,b)=>{bQ.init(a,b),ep.init(a,b)});function d4(a){return new d3({type:"string",format:"time",check:"string_format",precision:null,...I(a)})}let d5=j("ZodISODuration",(a,b)=>{bR.init(a,b),ep.init(a,b)});function d6(a){return new d5({type:"string",format:"duration",check:"string_format",...I(a)})}let d7=(a,b)=>{U.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>(function(a,b=a=>a.message){let c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code&&e.errors.length)e.errors.map(a=>d({issues:a}));else if("invalid_key"===e.code)d({issues:e.issues});else if("invalid_element"===e.code)d({issues:e.issues});else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(a),c})(a,b)},flatten:{value:b=>(function(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}})(a,b)},addIssue:{value:b=>{a.issues.push(b),a.message=JSON.stringify(a.issues,q,2)}},addIssues:{value:b=>{a.issues.push(...b),a.message=JSON.stringify(a.issues,q,2)}},isEmpty:{get:()=>0===a.issues.length}})};j("ZodError",d7);let d8=j("ZodError",d7,{Parent:Error}),d9=W(d8),ea=Y(d8),eb=$(d8),ec=aa(d8),ed=(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return W(d8)(a,b,d)},ee=(a,b,c)=>W(d8)(a,b,c),ef=async(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return Y(d8)(a,b,d)},eg=async(a,b,c)=>Y(d8)(a,b,c),eh=(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return $(d8)(a,b,d)},ei=(a,b,c)=>$(d8)(a,b,c),ej=async(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return aa(d8)(a,b,d)},ek=async(a,b,c)=>aa(d8)(a,b,c),el=j("ZodType",(a,b)=>(bA.init(a,b),Object.assign(a["~standard"],{jsonSchema:{input:dX(a,"input"),output:dX(a,"output")}}),a.toJSONSchema=((a,b={})=>c=>{let d=dT({...c,processors:b});return dU(a,d),dV(d,a),dW(d,a)})(a,{}),a.def=b,a.type=b.type,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone(x(b,{checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),{parent:!0}),a.with=a.check,a.clone=(b,c)=>H(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>d9(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>eb(a,b,c),a.parseAsync=async(b,c)=>ea(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>ec(a,b,c),a.spa=a.safeParseAsync,a.encode=(b,c)=>ed(a,b,c),a.decode=(b,c)=>ee(a,b,c),a.encodeAsync=async(b,c)=>ef(a,b,c),a.decodeAsync=async(b,c)=>eg(a,b,c),a.safeEncode=(b,c)=>eh(a,b,c),a.safeDecode=(b,c)=>ei(a,b,c),a.safeEncodeAsync=async(b,c)=>ej(a,b,c),a.safeDecodeAsync=async(b,c)=>ek(a,b,c),a.refine=(b,c)=>a.check(gM(b,c)),a.superRefine=b=>a.check(gN(b)),a.overwrite=b=>a.check(dM(b)),a.optional=()=>gd(a),a.exactOptional=()=>gf(a),a.nullable=()=>gh(a),a.nullish=()=>gd(gh(a)),a.nonoptional=b=>go(a,b),a.array=()=>fH(a),a.or=b=>fO([a,b]),a.and=b=>fU(a,b),a.transform=b=>gw(a,gb(b)),a.default=b=>gk(a,b),a.prefault=b=>gm(a,b),a.catch=b=>gs(a,b),a.pipe=b=>gw(a,b),a.readonly=()=>gA(a),a.describe=b=>{let c=a.clone();return c1.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>c1.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return c1.get(a);let c=a.clone();return c1.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a.apply=b=>b(a),a)),em=j("_ZodString",(a,b)=>{bB.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{c.type="string";let{minimum:e,maximum:f,format:g,patterns:h,contentEncoding:i}=a._zod.bag;if("number"==typeof e&&(c.minLength=e),"number"==typeof f&&(c.maxLength=f),g&&(c.format=dY[g]??g,""===c.format&&delete c.format,"time"===g&&delete c.format),i&&(c.contentEncoding=i),h&&h.size>0){let a=[...h];1===a.length?c.pattern=a[0].source:a.length>1&&(c.allOf=[...a.map(a=>({..."draft-07"===b.target||"draft-04"===b.target||"openapi-3.0"===b.target?{type:"string"}:{},pattern:a.source}))])}})(a,b,c,0);let c=a._zod.bag;a.format=c.format??null,a.minLength=c.minimum??null,a.maxLength=c.maximum??null,a.regex=(...b)=>a.check(dE(...b)),a.includes=(...b)=>a.check(dH(...b)),a.startsWith=(...b)=>a.check(dI(...b)),a.endsWith=(...b)=>a.check(dJ(...b)),a.min=(...b)=>a.check(dC(...b)),a.max=(...b)=>a.check(dB(...b)),a.length=(...b)=>a.check(dD(...b)),a.nonempty=(...b)=>a.check(dC(1,...b)),a.lowercase=b=>a.check(dF(b)),a.uppercase=b=>a.check(dG(b)),a.trim=()=>a.check(dO()),a.normalize=(...b)=>a.check(dN(...b)),a.toLowerCase=()=>a.check(dP()),a.toUpperCase=()=>a.check(dQ()),a.slugify=()=>a.check(dR())}),en=j("ZodString",(a,b)=>{bB.init(a,b),em.init(a,b),a.email=b=>a.check(c2(eq,b)),a.url=b=>a.check(c8(ez,b)),a.jwt=b=>a.check(dn(e4,b)),a.emoji=b=>a.check(c9(eC,b)),a.guid=b=>a.check(c3(es,b)),a.uuid=b=>a.check(c4(eu,b)),a.uuidv4=b=>a.check(c5(eu,b)),a.uuidv6=b=>a.check(c6(eu,b)),a.uuidv7=b=>a.check(c7(eu,b)),a.nanoid=b=>a.check(da(eE,b)),a.guid=b=>a.check(c3(es,b)),a.cuid=b=>a.check(db(eG,b)),a.cuid2=b=>a.check(dc(eI,b)),a.ulid=b=>a.check(dd(eK,b)),a.base64=b=>a.check(dk(e$,b)),a.base64url=b=>a.check(dl(e0,b)),a.xid=b=>a.check(de(eM,b)),a.ksuid=b=>a.check(df(eO,b)),a.ipv4=b=>a.check(dg(eQ,b)),a.ipv6=b=>a.check(dh(eU,b)),a.cidrv4=b=>a.check(di(eW,b)),a.cidrv6=b=>a.check(dj(eY,b)),a.e164=b=>a.check(dm(e2,b)),a.datetime=b=>a.check(d0(b)),a.date=b=>a.check(d2(b)),a.time=b=>a.check(d4(b)),a.duration=b=>a.check(d6(b))});function eo(a){return new en({type:"string",...I(a)})}let ep=j("ZodStringFormat",(a,b)=>{bC.init(a,b),em.init(a,b)}),eq=j("ZodEmail",(a,b)=>{bF.init(a,b),ep.init(a,b)});function er(a){return c2(eq,a)}let es=j("ZodGUID",(a,b)=>{bD.init(a,b),ep.init(a,b)});function et(a){return c3(es,a)}let eu=j("ZodUUID",(a,b)=>{bE.init(a,b),ep.init(a,b)});function ev(a){return c4(eu,a)}function ew(a){return c5(eu,a)}function ex(a){return c6(eu,a)}function ey(a){return c7(eu,a)}let ez=j("ZodURL",(a,b)=>{bG.init(a,b),ep.init(a,b)});function eA(a){return c8(ez,a)}function eB(a){return c8(ez,{protocol:/^https?$/,hostname:aE,...I(a)})}let eC=j("ZodEmoji",(a,b)=>{bH.init(a,b),ep.init(a,b)});function eD(a){return c9(eC,a)}let eE=j("ZodNanoID",(a,b)=>{bI.init(a,b),ep.init(a,b)});function eF(a){return da(eE,a)}let eG=j("ZodCUID",(a,b)=>{bJ.init(a,b),ep.init(a,b)});function eH(a){return db(eG,a)}let eI=j("ZodCUID2",(a,b)=>{bK.init(a,b),ep.init(a,b)});function eJ(a){return dc(eI,a)}let eK=j("ZodULID",(a,b)=>{bL.init(a,b),ep.init(a,b)});function eL(a){return dd(eK,a)}let eM=j("ZodXID",(a,b)=>{bM.init(a,b),ep.init(a,b)});function eN(a){return de(eM,a)}let eO=j("ZodKSUID",(a,b)=>{bN.init(a,b),ep.init(a,b)});function eP(a){return df(eO,a)}let eQ=j("ZodIPv4",(a,b)=>{bS.init(a,b),ep.init(a,b)});function eR(a){return dg(eQ,a)}let eS=j("ZodMAC",(a,b)=>{bU.init(a,b),ep.init(a,b)});function eT(a){return new eS({type:"string",format:"mac",check:"string_format",abort:!1,...I(a)})}let eU=j("ZodIPv6",(a,b)=>{bT.init(a,b),ep.init(a,b)});function eV(a){return dh(eU,a)}let eW=j("ZodCIDRv4",(a,b)=>{bV.init(a,b),ep.init(a,b)});function eX(a){return di(eW,a)}let eY=j("ZodCIDRv6",(a,b)=>{bW.init(a,b),ep.init(a,b)});function eZ(a){return dj(eY,a)}let e$=j("ZodBase64",(a,b)=>{bY.init(a,b),ep.init(a,b)});function e_(a){return dk(e$,a)}let e0=j("ZodBase64URL",(a,b)=>{bZ.init(a,b),ep.init(a,b)});function e1(a){return dl(e0,a)}let e2=j("ZodE164",(a,b)=>{b$.init(a,b),ep.init(a,b)});function e3(a){return dm(e2,a)}let e4=j("ZodJWT",(a,b)=>{b_.init(a,b),ep.init(a,b)});function e5(a){return dn(e4,a)}let e6=j("ZodCustomStringFormat",(a,b)=>{b0.init(a,b),ep.init(a,b)});function e7(a,b,c={}){return dS(e6,a,b,c)}function e8(a){return dS(e6,"hostname",aD,a)}function e9(a){return dS(e6,"hex",aU,a)}function fa(a,b){let c=b?.enc??"hex",d=`${a}_${c}`,e=f[d];if(!e)throw Error(`Unrecognized hash format: ${d}`);return dS(e6,d,e,b)}let fb=j("ZodNumber",(a,b)=>{b1.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let{minimum:e,maximum:f,format:g,multipleOf:h,exclusiveMaximum:i,exclusiveMinimum:j}=a._zod.bag;"string"==typeof g&&g.includes("int")?c.type="integer":c.type="number","number"==typeof j&&("draft-04"===b.target||"openapi-3.0"===b.target?(c.minimum=j,c.exclusiveMinimum=!0):c.exclusiveMinimum=j),"number"==typeof e&&(c.minimum=e,"number"==typeof j&&"draft-04"!==b.target&&(j>=e?delete c.minimum:delete c.exclusiveMinimum)),"number"==typeof i&&("draft-04"===b.target||"openapi-3.0"===b.target?(c.maximum=i,c.exclusiveMaximum=!0):c.exclusiveMaximum=i),"number"==typeof f&&(c.maximum=f,"number"==typeof i&&"draft-04"!==b.target&&(i<=f?delete c.maximum:delete c.exclusiveMaximum)),"number"==typeof h&&(c.multipleOf=h)})(a,b,c,0),a.gt=(b,c)=>a.check(dr(b,c)),a.gte=(b,c)=>a.check(ds(b,c)),a.min=(b,c)=>a.check(ds(b,c)),a.lt=(b,c)=>a.check(dp(b,c)),a.lte=(b,c)=>a.check(dq(b,c)),a.max=(b,c)=>a.check(dq(b,c)),a.int=b=>a.check(fe(b)),a.safe=b=>a.check(fe(b)),a.positive=b=>a.check(dr(0,b)),a.nonnegative=b=>a.check(ds(0,b)),a.negative=b=>a.check(dp(0,b)),a.nonpositive=b=>a.check(dq(0,b)),a.multipleOf=(b,c)=>a.check(dx(b,c)),a.step=(b,c)=>a.check(dx(b,c)),a.finite=()=>a;let c=a._zod.bag;a.minValue=Math.max(c.minimum??-1/0,c.exclusiveMinimum??-1/0)??null,a.maxValue=Math.min(c.maximum??1/0,c.exclusiveMaximum??1/0)??null,a.isInt=(c.format??"").includes("int")||Number.isSafeInteger(c.multipleOf??.5),a.isFinite=!0,a.format=c.format??null});function fc(a){return new fb({type:"number",checks:[],...I(a)})}let fd=j("ZodNumberFormat",(a,b)=>{b2.init(a,b),fb.init(a,b)});function fe(a){return new fd({type:"number",check:"number_format",abort:!1,format:"safeint",...I(a)})}function ff(a){return new fd({type:"number",check:"number_format",abort:!1,format:"float32",...I(a)})}function fg(a){return new fd({type:"number",check:"number_format",abort:!1,format:"float64",...I(a)})}function fh(a){return new fd({type:"number",check:"number_format",abort:!1,format:"int32",...I(a)})}function fi(a){return new fd({type:"number",check:"number_format",abort:!1,format:"uint32",...I(a)})}let fj=j("ZodBoolean",(a,b)=>{b3.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>{b.type="boolean"}});function fk(a){return new fj({type:"boolean",...I(a)})}let fl=j("ZodBigInt",(a,b)=>{b4.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema")})(0,a,0,0),a.gte=(b,c)=>a.check(ds(b,c)),a.min=(b,c)=>a.check(ds(b,c)),a.gt=(b,c)=>a.check(dr(b,c)),a.gte=(b,c)=>a.check(ds(b,c)),a.min=(b,c)=>a.check(ds(b,c)),a.lt=(b,c)=>a.check(dp(b,c)),a.lte=(b,c)=>a.check(dq(b,c)),a.max=(b,c)=>a.check(dq(b,c)),a.positive=b=>a.check(dr(BigInt(0),b)),a.negative=b=>a.check(dp(BigInt(0),b)),a.nonpositive=b=>a.check(dq(BigInt(0),b)),a.nonnegative=b=>a.check(ds(BigInt(0),b)),a.multipleOf=(b,c)=>a.check(dx(b,c));let c=a._zod.bag;a.minValue=c.minimum??null,a.maxValue=c.maximum??null,a.format=c.format??null});function fm(a){return new fl({type:"bigint",...I(a)})}let fn=j("ZodBigIntFormat",(a,b)=>{b5.init(a,b),fl.init(a,b)});function fo(a){return new fn({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...I(a)})}function fp(a){return new fn({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...I(a)})}let fq=j("ZodSymbol",(a,b)=>{b6.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema")})(0,a,0,0)});function fr(a){return new fq({type:"symbol",...I(a)})}let fs=j("ZodUndefined",(a,b)=>{b7.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema")})(0,a,0,0)});function ft(a){return new fs({type:"undefined",...I(a)})}let fu=j("ZodNull",(a,b)=>{b8.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{"openapi-3.0"===b.target?(c.type="string",c.nullable=!0,c.enum=[null]):c.type="null"})(0,a,b,0)});function fv(a){return new fu({type:"null",...I(a)})}let fw=j("ZodAny",(a,b)=>{b9.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>{}});function fx(){return new fw({type:"any"})}let fy=j("ZodUnknown",(a,b)=>{ca.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>{}});function fz(){return new fy({type:"unknown"})}let fA=j("ZodNever",(a,b)=>{cb.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>{b.not={}}});function fB(a){return new fA({type:"never",...I(a)})}let fC=j("ZodVoid",(a,b)=>{cc.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Void cannot be represented in JSON Schema")})(0,a,0,0)});function fD(a){return new fC({type:"void",...I(a)})}let fE=j("ZodDate",(a,b)=>{cd.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Date cannot be represented in JSON Schema")})(0,a,0,0),a.min=(b,c)=>a.check(ds(b,c)),a.max=(b,c)=>a.check(dq(b,c));let c=a._zod.bag;a.minDate=c.minimum?new Date(c.minimum):null,a.maxDate=c.maximum?new Date(c.maximum):null});function fF(a){return new fE({type:"date",...I(a)})}let fG=j("ZodArray",(a,b)=>{cf.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def,{minimum:f,maximum:g}=a._zod.bag;"number"==typeof f&&(c.minItems=f),"number"==typeof g&&(c.maxItems=g),c.type="array",c.items=dU(e.element,b,{...d,path:[...d.path,"items"]})})(a,b,c,d),a.element=b.element,a.min=(b,c)=>a.check(dC(b,c)),a.nonempty=b=>a.check(dC(1,b)),a.max=(b,c)=>a.check(dB(b,c)),a.length=(b,c)=>a.check(dD(b,c)),a.unwrap=()=>a.element});function fH(a,b){return new fG({type:"array",element:a,...I(b)})}function fI(a){return f4(Object.keys(a._zod.def.shape))}let fJ=j("ZodObject",(a,b)=>{ck.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def;c.type="object",c.properties={};let f=e.shape;for(let a in f)c.properties[a]=dU(f[a],b,{...d,path:[...d.path,"properties",a]});let g=new Set([...new Set(Object.keys(f))].filter(a=>{let c=e.shape[a]._zod;return"input"===b.io?void 0===c.optin:void 0===c.optout}));g.size>0&&(c.required=Array.from(g)),e.catchall?._zod.def.type==="never"?c.additionalProperties=!1:e.catchall?e.catchall&&(c.additionalProperties=dU(e.catchall,b,{...d,path:[...d.path,"additionalProperties"]})):"output"===b.io&&(c.additionalProperties=!1)})(a,b,c,d),v(a,"shape",()=>b.shape),a.keyof=()=>f4(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:fz()}),a.loose=()=>a.clone({...a._zod.def,catchall:fz()}),a.strict=()=>a.clone({...a._zod.def,catchall:fB()}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>(function(a,b){if(!C(b))throw Error("Invalid input to extend: expected a plain object");let c=a._zod.def.checks;if(c&&c.length>0){let c=a._zod.def.shape;for(let a in b)if(void 0!==Object.getOwnPropertyDescriptor(c,a))throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let d=x(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return w(this,"shape",c),c}});return H(a,d)})(a,b),a.safeExtend=b=>(function(a,b){if(!C(b))throw Error("Invalid input to safeExtend: expected a plain object");let c=x(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return w(this,"shape",c),c}});return H(a,c)})(a,b),a.merge=b=>(function(a,b){let c=x(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return w(this,"shape",c),c},get catchall(){return b._zod.def.catchall},checks:[]});return H(a,c)})(a,b),a.pick=b=>(function(a,b){let c=a._zod.def,d=c.checks;if(d&&d.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let e=x(a._zod.def,{get shape(){let a={};for(let d in b){if(!(d in c.shape))throw Error(`Unrecognized key: "${d}"`);b[d]&&(a[d]=c.shape[d])}return w(this,"shape",a),a},checks:[]});return H(a,e)})(a,b),a.omit=b=>(function(a,b){let c=a._zod.def,d=c.checks;if(d&&d.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let e=x(a._zod.def,{get shape(){let d={...a._zod.def.shape};for(let a in b){if(!(a in c.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete d[a]}return w(this,"shape",d),d},checks:[]});return H(a,e)})(a,b),a.partial=(...b)=>(function(a,b,c){let d=b._zod.def.checks;if(d&&d.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let e=x(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return w(this,"shape",e),e},checks:[]});return H(b,e)})(gc,a,b[0]),a.required=(...b)=>(function(a,b,c){let d=x(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return w(this,"shape",e),e}});return H(b,d)})(gn,a,b[0])});function fK(a,b){return new fJ({type:"object",shape:a??{},...I(b)})}function fL(a,b){return new fJ({type:"object",shape:a,catchall:fB(),...I(b)})}function fM(a,b){return new fJ({type:"object",shape:a,catchall:fz(),...I(b)})}let fN=j("ZodUnion",(a,b)=>{cm.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>dZ(a,b,c,d),a.options=b.options});function fO(a,b){return new fN({type:"union",options:a,...I(b)})}let fP=j("ZodXor",(a,b)=>{fN.init(a,b),co.init(a,b),a._zod.processJSONSchema=(b,c,d)=>dZ(a,b,c,d),a.options=b.options});function fQ(a,b){return new fP({type:"union",options:a,inclusive:!1,...I(b)})}let fR=j("ZodDiscriminatedUnion",(a,b)=>{fN.init(a,b),cp.init(a,b)});function fS(a,b,c){return new fR({type:"union",options:b,discriminator:a,...I(c)})}let fT=j("ZodIntersection",(a,b)=>{cq.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def,f=dU(e.left,b,{...d,path:[...d.path,"allOf",0]}),g=dU(e.right,b,{...d,path:[...d.path,"allOf",1]}),h=a=>"allOf"in a&&1===Object.keys(a).length;c.allOf=[...h(f)?f.allOf:[f],...h(g)?g.allOf:[g]]})(a,b,c,d)});function fU(a,b){return new fT({type:"intersection",left:a,right:b})}let fV=j("ZodTuple",(a,b)=>{cs.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def;c.type="array";let f="draft-2020-12"===b.target?"prefixItems":"items",g="draft-2020-12"===b.target||"openapi-3.0"===b.target?"items":"additionalItems",h=e.items.map((a,c)=>dU(a,b,{...d,path:[...d.path,f,c]})),i=e.rest?dU(e.rest,b,{...d,path:[...d.path,g,..."openapi-3.0"===b.target?[e.items.length]:[]]}):null;"draft-2020-12"===b.target?(c.prefixItems=h,i&&(c.items=i)):"openapi-3.0"===b.target?(c.items={anyOf:h},i&&c.items.anyOf.push(i),c.minItems=h.length,i||(c.maxItems=h.length)):(c.items=h,i&&(c.additionalItems=i));let{minimum:j,maximum:k}=a._zod.bag;"number"==typeof j&&(c.minItems=j),"number"==typeof k&&(c.maxItems=k)})(a,b,c,d),a.rest=b=>a.clone({...a._zod.def,rest:b})});function fW(a,b,c){let d=b instanceof bA,e=d?c:b;return new fV({type:"tuple",items:a,rest:d?b:null,...I(e)})}let fX=j("ZodRecord",(a,b)=>{cu.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def;c.type="object";let f=e.keyType,g=f._zod.bag,h=g?.patterns;if("loose"===e.mode&&h&&h.size>0){let a=dU(e.valueType,b,{...d,path:[...d.path,"patternProperties","*"]});for(let b of(c.patternProperties={},h))c.patternProperties[b.source]=a}else("draft-07"===b.target||"draft-2020-12"===b.target)&&(c.propertyNames=dU(e.keyType,b,{...d,path:[...d.path,"propertyNames"]})),c.additionalProperties=dU(e.valueType,b,{...d,path:[...d.path,"additionalProperties"]});let i=f._zod.values;if(i){let a=[...i].filter(a=>"string"==typeof a||"number"==typeof a);a.length>0&&(c.required=a)}})(a,b,c,d),a.keyType=b.keyType,a.valueType=b.valueType});function fY(a,b,c){return new fX({type:"record",keyType:a,valueType:b,...I(c)})}function fZ(a,b,c){let d=H(a);return d._zod.values=void 0,new fX({type:"record",keyType:d,valueType:b,...I(c)})}function f$(a,b,c){return new fX({type:"record",keyType:a,valueType:b,mode:"loose",...I(c)})}let f_=j("ZodMap",(a,b)=>{cv.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Map cannot be represented in JSON Schema")})(0,a,0,0),a.keyType=b.keyType,a.valueType=b.valueType,a.min=(...b)=>a.check(dz(...b)),a.nonempty=b=>a.check(dz(1,b)),a.max=(...b)=>a.check(dy(...b)),a.size=(...b)=>a.check(dA(...b))});function f0(a,b,c){return new f_({type:"map",keyType:a,valueType:b,...I(c)})}let f1=j("ZodSet",(a,b)=>{cx.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Set cannot be represented in JSON Schema")})(0,a,0,0),a.min=(...b)=>a.check(dz(...b)),a.nonempty=b=>a.check(dz(1,b)),a.max=(...b)=>a.check(dy(...b)),a.size=(...b)=>a.check(dA(...b))});function f2(a,b){return new f1({type:"set",valueType:a,...I(b)})}let f3=j("ZodEnum",(a,b)=>{cz.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=o(a._zod.def.entries);e.every(a=>"number"==typeof a)&&(c.type="number"),e.every(a=>"string"==typeof a)&&(c.type="string"),c.enum=e})(a,0,c,0),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new f3({...b,checks:[],...I(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new f3({...b,checks:[],...I(d),entries:e})}});function f4(a,b){return new f3({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...I(b)})}function f5(a,b){return new f3({type:"enum",entries:a,...I(b)})}let f6=j("ZodLiteral",(a,b)=>{cA.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def,f=[];for(let a of e.values)if(void 0===a){if("throw"===b.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof a)if("throw"===b.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else f.push(Number(a));else f.push(a);if(0===f.length);else if(1===f.length){let a=f[0];c.type=null===a?"null":typeof a,"draft-04"===b.target||"openapi-3.0"===b.target?c.enum=[a]:c.const=a}else f.every(a=>"number"==typeof a)&&(c.type="number"),f.every(a=>"string"==typeof a)&&(c.type="string"),f.every(a=>"boolean"==typeof a)&&(c.type="boolean"),f.every(a=>null===a)&&(c.type="null"),c.enum=f})(a,b,c,0),a.values=new Set(b.values),Object.defineProperty(a,"value",{get(){if(b.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return b.values[0]}})});function f7(a,b){return new f6({type:"literal",values:Array.isArray(a)?a:[a],...I(b)})}let f8=j("ZodFile",(a,b)=>{cB.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e={type:"string",format:"binary",contentEncoding:"binary"},{minimum:f,maximum:g,mime:h}=a._zod.bag;void 0!==f&&(e.minLength=f),void 0!==g&&(e.maxLength=g),h?1===h.length?(e.contentMediaType=h[0],Object.assign(c,e)):(Object.assign(c,e),c.anyOf=h.map(a=>({contentMediaType:a}))):Object.assign(c,e)})(a,0,c,0),a.min=(b,c)=>a.check(dz(b,c)),a.max=(b,c)=>a.check(dy(b,c)),a.mime=(b,c)=>a.check(dL(Array.isArray(b)?b:[b],c))});function f9(a){return new f8({type:"file",...I(a)})}let ga=j("ZodTransform",(a,b)=>{cC.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema")})(0,a,0,0),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new l(a.constructor.name);c.addIssue=d=>{"string"==typeof d?c.issues.push(S(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),c.issues.push(S(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}});function gb(a){return new ga({type:"transform",transform:a})}let gc=j("ZodOptional",(a,b)=>{cE.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>d$(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function gd(a){return new gc({type:"optional",innerType:a})}let ge=j("ZodExactOptional",(a,b)=>{cF.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>d$(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function gf(a){return new ge({type:"optional",innerType:a})}let gg=j("ZodNullable",(a,b)=>{cG.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def,f=dU(e.innerType,b,d),g=b.seen.get(a);"openapi-3.0"===b.target?(g.ref=e.innerType,c.nullable=!0):c.anyOf=[f,{type:"null"}]})(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function gh(a){return new gg({type:"nullable",innerType:a})}function gi(a){return gd(gh(a))}let gj=j("ZodDefault",(a,b)=>{cH.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def;dU(e.innerType,b,d),b.seen.get(a).ref=e.innerType,c.default=JSON.parse(JSON.stringify(e.defaultValue))})(a,b,c,d),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap});function gk(a,b){return new gj({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():D(b)}})}let gl=j("ZodPrefault",(a,b)=>{cJ.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def;dU(e.innerType,b,d),b.seen.get(a).ref=e.innerType,"input"===b.io&&(c._prefault=JSON.parse(JSON.stringify(e.defaultValue)))})(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function gm(a,b){return new gl({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():D(b)}})}let gn=j("ZodNonOptional",(a,b)=>{cK.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def;dU(e.innerType,b,d),b.seen.get(a).ref=e.innerType})(a,b,0,d),a.unwrap=()=>a._zod.def.innerType});function go(a,b){return new gn({type:"nonoptional",innerType:a,...I(b)})}let gp=j("ZodSuccess",(a,b)=>{cM.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>{b.type="boolean"},a.unwrap=()=>a._zod.def.innerType});function gq(a){return new gp({type:"success",innerType:a})}let gr=j("ZodCatch",(a,b)=>{cN.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e,f=a._zod.def;dU(f.innerType,b,d),b.seen.get(a).ref=f.innerType;try{e=f.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}c.default=e})(a,b,c,d),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap});function gs(a,b){return new gr({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})}let gt=j("ZodNaN",(a,b)=>{cO.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("NaN cannot be represented in JSON Schema")})(0,a,0,0)});function gu(a){return new gt({type:"nan",...I(a)})}let gv=j("ZodPipe",(a,b)=>{cP.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def,f="input"===b.io?"transform"===e.in._zod.def.type?e.out:e.in:e.out;dU(f,b,d),b.seen.get(a).ref=f})(a,b,0,d),a.in=b.in,a.out=b.out});function gw(a,b){return new gv({type:"pipe",in:a,out:b})}let gx=j("ZodCodec",(a,b)=>{gv.init(a,b),cR.init(a,b)});function gy(a,b,c){return new gx({type:"pipe",in:a,out:b,transform:c.decode,reverseTransform:c.encode})}let gz=j("ZodReadonly",(a,b)=>{cU.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def;dU(e.innerType,b,d),b.seen.get(a).ref=e.innerType,c.readOnly=!0})(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function gA(a){return new gz({type:"readonly",innerType:a})}let gB=j("ZodTemplateLiteral",(a,b)=>{cW.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.pattern;if(!e)throw Error("Pattern not found in template literal");c.type="string",c.pattern=e.source})(a,0,c,0)});function gC(a,b){return new gB({type:"template_literal",parts:a,...I(b)})}let gD=j("ZodLazy",(a,b)=>{cZ.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.innerType;dU(e,b,d),b.seen.get(a).ref=e})(a,b,0,d),a.unwrap=()=>a._zod.def.getter()});function gE(a){return new gD({type:"lazy",getter:a})}let gF=j("ZodPromise",(a,b)=>{cY.init(a,b),el.init(a,b),a._zod.processJSONSchema=(b,c,d)=>((a,b,c,d)=>{let e=a._zod.def;dU(e.innerType,b,d),b.seen.get(a).ref=e.innerType})(a,b,0,d),a.unwrap=()=>a._zod.def.innerType});function gG(a){return new gF({type:"promise",innerType:a})}let gH=j("ZodFunction",(a,b)=>{cX.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")})(0,a,0,0)});function gI(a){return new gH({type:"function",input:Array.isArray(a?.input)?fW(a?.input):a?.input??fH(fz()),output:a?.output??fz()})}let gJ=j("ZodCustom",(a,b)=>{c$.init(a,b),el.init(a,b),a._zod.processJSONSchema=(a,b,c)=>((a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")})(0,a,0,0)});function gK(a){let b=new ba({check:"custom"});return b._zod.check=a,b}function gL(a,b){let c=I(b);return c.abort??(c.abort=!0),new gJ({type:"custom",check:"custom",fn:a??(()=>!0),...c})}function gM(a,b={}){return new gJ({type:"custom",check:"custom",fn:a,...I(b)})}function gN(a){let b=function(a,b){let c=new ba({check:"custom",...I(void 0)});return c._zod.check=a,c}(c=>(c.addIssue=a=>{"string"==typeof a?c.issues.push(S(a,c.value,b._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=c.value),a.inst??(a.inst=b),a.continue??(a.continue=!b._zod.def.abort),c.issues.push(S(a)))},a(c.value,c)));return b}let gO=function(a){let b=new ba({check:"describe"});return b._zod.onattach=[b=>{let c=c1.get(b)??{};c1.add(b,{...c,description:a})}],b._zod.check=()=>{},b},gP=function(a){let b=new ba({check:"meta"});return b._zod.onattach=[b=>{let c=c1.get(b)??{};c1.add(b,{...c,...a})}],b._zod.check=()=>{},b};function gQ(a,b={}){let c=new gJ({type:"custom",check:"custom",fn:b=>b instanceof a,abort:!0,...I(b)});return c._zod.bag.Class=a,c._zod.check=b=>{b.value instanceof a||b.issues.push({code:"invalid_type",expected:a.name,input:b.value,inst:c,path:[...c._zod.def.path??[]]})},c}let gR=(...a)=>(function(a,b){let c=I(b),d=c.truthy??["true","1","yes","on","y","enabled"],e=c.falsy??["false","0","no","off","n","disabled"];"sensitive"!==c.case&&(d=d.map(a=>"string"==typeof a?a.toLowerCase():a),e=e.map(a=>"string"==typeof a?a.toLowerCase():a));let f=new Set(d),g=new Set(e),h=a.Codec??cR,i=a.Boolean??b3,j=new h({type:"pipe",in:new(a.String??bB)({type:"string",error:c.error}),out:new i({type:"boolean",error:c.error}),transform:(a,b)=>{let d=a;return"sensitive"!==c.case&&(d=d.toLowerCase()),!!f.has(d)||!g.has(d)&&(b.issues.push({code:"invalid_value",expected:"stringbool",values:[...f,...g],input:b.value,inst:j,continue:!1}),{})},reverseTransform:(a,b)=>!0===a?d[0]||"true":e[0]||"false",error:c.error});return j})({Codec:gx,Boolean:fj,String:en},...a);function gS(a){let b=gE(()=>fO([eo(a),fc(),fk(),fv(),fH(b),fY(eo(),b)]));return b}function gT(a,b){return gw(gb(a),b)}e||(e={}),n({localeError:(()=>{let a={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}},b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},c={nan:"NaN"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=function(a){let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"nan":"number";case"object":if(null===a)return"null";if(Array.isArray(a))return"array";if(a&&Object.getPrototypeOf(a)!==Object.prototype&&"constructor"in a&&a.constructor)return a.constructor.name}return b}(d.input),e=c[b]??b;return`Invalid input: expected ${a}, received ${e}`}case"invalid_value":if(1===d.values.length)return`Invalid input: expected ${J(d.values[0])}`;return`Invalid option: expected one of ${p(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Too big: expected ${d.origin??"value"} to have ${b}${d.maximum.toString()} ${c.unit??"elements"}`;return`Too big: expected ${d.origin??"value"} to be ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Too small: expected ${d.origin} to have ${b}${d.minimum.toString()} ${c.unit}`;return`Too small: expected ${d.origin} to be ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Invalid string: must start with "${d.prefix}"`;if("ends_with"===d.format)return`Invalid string: must end with "${d.suffix}"`;if("includes"===d.format)return`Invalid string: must include "${d.includes}"`;if("regex"===d.format)return`Invalid string: must match pattern ${d.pattern}`;return`Invalid ${b[d.format]??d.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${d.divisor}`;case"unrecognized_keys":return`Unrecognized key${d.keys.length>1?"s":""}: ${p(d.keys,", ")}`;case"invalid_key":return`Invalid key in ${d.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${d.origin}`}}})()})},9334:(a,b,c)=>{c.d(b,{IO:()=>j9,z6:()=>j8});var d,e,f,g,h,i,j,k,l,m,n,o=c(3873),p=(c(9551),c(4735)),q=c(9646),r=c(4984),s=c(9021),t=c(9748),u=c(1820),v=c(9771),w=c(5511),x=Object.create,y=Object.getPrototypeOf,z=Object.defineProperty,A=Object.getOwnPropertyNames,B=Object.prototype.hasOwnProperty,C=(a,b,c)=>{c=null!=a?x(y(a)):{};let d=!b&&a&&a.__esModule?c:z(c,"default",{value:a,enumerable:!0});for(let b of A(a))B.call(d,b)||z(d,b,{get:()=>a[b],enumerable:!0});return d},D=(a,b)=>()=>(b||a((b={exports:{}}).exports,b),b.exports),E=(a,b)=>{for(var c in b)z(a,c,{get:b[c],enumerable:!0,configurable:!0,set:a=>b[c]=()=>a})};Symbol.dispose,Symbol.asyncDispose;var F=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.regexpCode=a.getEsmExportName=a.getProperty=a.safeStringify=a.stringify=a.strConcat=a.addCodeArg=a.str=a._=a.nil=a._Code=a.Name=a.IDENTIFIER=a._CodeOrName=void 0;class b{}a._CodeOrName=b,a.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class c extends b{constructor(b){if(super(),!a.IDENTIFIER.test(b))throw Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}a.Name=c;class d extends b{constructor(a){super(),this._items="string"==typeof a?[a]:a}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let a=this._items[0];return""===a||'""'===a}get str(){var a;return null!=(a=this._str)?a:this._str=this._items.reduce((a,b)=>`${a}${b}`,"")}get names(){var a;return null!=(a=this._names)?a:this._names=this._items.reduce((a,b)=>(b instanceof c&&(a[b.str]=(a[b.str]||0)+1),a),{})}}function e(a,...b){let c=[a[0]],f=0;for(;f<b.length;)h(c,b[f]),c.push(a[++f]);return new d(c)}a._Code=d,a.nil=new d(""),a._=e;var f=new d("+");function g(a,...b){let e=[i(a[0])],j=0;for(;j<b.length;)e.push(f),h(e,b[j]),e.push(f,i(a[++j]));return function(a){let b=1;for(;b<a.length-1;){if(a[b]===f){var d,e;let f=(d=a[b-1],'""'===(e=a[b+1])?d:'""'===d?e:"string"==typeof d?e instanceof c||'"'!==d[d.length-1]?void 0:"string"!=typeof e?`${d.slice(0,-1)}${e}"`:'"'===e[0]?d.slice(0,-1)+e.slice(1):void 0:"string"!=typeof e||'"'!==e[0]||d instanceof c?void 0:`"${d}${e.slice(1)}`);if(void 0!==f){a.splice(b-1,3,f);continue}a[b++]="+"}b++}}(e),new d(e)}function h(a,b){var e;b instanceof d?a.push(...b._items):b instanceof c?a.push(b):a.push("number"==typeof(e=b)||"boolean"==typeof e||null===e?e:i(Array.isArray(e)?e.join(","):e))}function i(a){return JSON.stringify(a).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}a.str=g,a.addCodeArg=h,a.strConcat=function(a,b){return b.emptyStr()?a:a.emptyStr()?b:g`${a}${b}`},a.stringify=function(a){return new d(i(a))},a.safeStringify=i,a.getProperty=function(b){return"string"==typeof b&&a.IDENTIFIER.test(b)?new d(`.${b}`):e`[${b}]`},a.getEsmExportName=function(b){if("string"==typeof b&&a.IDENTIFIER.test(b))return new d(`${b}`);throw Error(`CodeGen: invalid export name: ${b}, use explicit $id name mapping`)},a.regexpCode=function(a){return new d(a.toString())}}),G=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ValueScope=a.ValueScopeName=a.Scope=a.varKinds=a.UsedValueState=void 0;var b,c=F();class d extends Error{constructor(a){super(`CodeGen: "code" for ${a} not defined`),this.value=a.value}}!function(a){a[a.Started=0]="Started",a[a.Completed=1]="Completed"}(b||(a.UsedValueState=b={})),a.varKinds={const:new c.Name("const"),let:new c.Name("let"),var:new c.Name("var")};class e{constructor({prefixes:a,parent:b}={}){this._names={},this._prefixes=a,this._parent=b}toName(a){return a instanceof c.Name?a:this.name(a)}name(a){return new c.Name(this._newName(a))}_newName(a){let b=this._names[a]||this._nameGroup(a);return`${a}${b.index++}`}_nameGroup(a){var b,c;if((null==(c=null==(b=this._parent)?void 0:b._prefixes)?void 0:c.has(a))||this._prefixes&&!this._prefixes.has(a))throw Error(`CodeGen: prefix "${a}" is not allowed in this scope`);return this._names[a]={prefix:a,index:0}}}a.Scope=e;class f extends c.Name{constructor(a,b){super(b),this.prefix=a}setValue(a,{property:b,itemIndex:d}){this.value=a,this.scopePath=(0,c._)`.${new c.Name(b)}[${d}]`}}a.ValueScopeName=f;var g=(0,c._)`\n`;class h extends e{constructor(a){super(a),this._values={},this._scope=a.scope,this.opts={...a,_n:a.lines?g:c.nil}}get(){return this._scope}name(a){return new f(a,this._newName(a))}value(a,b){var c;if(void 0===b.ref)throw Error("CodeGen: ref must be passed in value");let d=this.toName(a),{prefix:e}=d,f=null!=(c=b.key)?c:b.ref,g=this._values[e];if(g){let a=g.get(f);if(a)return a}else g=this._values[e]=new Map;g.set(f,d);let h=this._scope[e]||(this._scope[e]=[]),i=h.length;return h[i]=b.ref,d.setValue(b,{property:e,itemIndex:i}),d}getValue(a,b){let c=this._values[a];if(c)return c.get(b)}scopeRefs(a,b=this._values){return this._reduceValues(b,b=>{if(void 0===b.scopePath)throw Error(`CodeGen: name "${b}" has no value`);return(0,c._)`${a}${b.scopePath}`})}scopeCode(a=this._values,b,c){return this._reduceValues(a,a=>{if(void 0===a.value)throw Error(`CodeGen: name "${a}" has no value`);return a.value.code},b,c)}_reduceValues(e,f,g={},h){let i=c.nil;for(let j in e){let k=e[j];if(!k)continue;let l=g[j]=g[j]||new Map;k.forEach(e=>{if(l.has(e))return;l.set(e,b.Started);let g=f(e);if(g){let b=this.opts.es5?a.varKinds.var:a.varKinds.const;i=(0,c._)`${i}${b} ${e} = ${g};${this.opts._n}`}else if(g=null==h?void 0:h(e))i=(0,c._)`${i}${g}${this.opts._n}`;else throw new d(e);l.set(e,b.Completed)})}return i}}a.ValueScope=h}),H=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.or=a.and=a.not=a.CodeGen=a.operators=a.varKinds=a.ValueScopeName=a.ValueScope=a.Scope=a.Name=a.regexpCode=a.stringify=a.getProperty=a.nil=a.strConcat=a.str=a._=void 0;var b=F(),c=G(),d=F();Object.defineProperty(a,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(a,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(a,"strConcat",{enumerable:!0,get:function(){return d.strConcat}}),Object.defineProperty(a,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(a,"getProperty",{enumerable:!0,get:function(){return d.getProperty}}),Object.defineProperty(a,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(a,"regexpCode",{enumerable:!0,get:function(){return d.regexpCode}}),Object.defineProperty(a,"Name",{enumerable:!0,get:function(){return d.Name}});var e=G();Object.defineProperty(a,"Scope",{enumerable:!0,get:function(){return e.Scope}}),Object.defineProperty(a,"ValueScope",{enumerable:!0,get:function(){return e.ValueScope}}),Object.defineProperty(a,"ValueScopeName",{enumerable:!0,get:function(){return e.ValueScopeName}}),Object.defineProperty(a,"varKinds",{enumerable:!0,get:function(){return e.varKinds}}),a.operators={GT:new b._Code(">"),GTE:new b._Code(">="),LT:new b._Code("<"),LTE:new b._Code("<="),EQ:new b._Code("==="),NEQ:new b._Code("!=="),NOT:new b._Code("!"),OR:new b._Code("||"),AND:new b._Code("&&"),ADD:new b._Code("+")};class f{optimizeNodes(){return this}optimizeNames(a,b){return this}}class g extends f{constructor(a,b,c){super(),this.varKind=a,this.name=b,this.rhs=c}render({es5:a,_n:b}){let d=a?c.varKinds.var:this.varKind,e=void 0===this.rhs?"":` = ${this.rhs}`;return`${d} ${this.name}${e};`+b}optimizeNames(a,b){if(a[this.name.str])return this.rhs&&(this.rhs=E(this.rhs,a,b)),this}get names(){return this.rhs instanceof b._CodeOrName?this.rhs.names:{}}}class h extends f{constructor(a,b,c){super(),this.lhs=a,this.rhs=b,this.sideEffects=c}render({_n:a}){return`${this.lhs} = ${this.rhs};`+a}optimizeNames(a,c){if(!(this.lhs instanceof b.Name)||a[this.lhs.str]||this.sideEffects)return this.rhs=E(this.rhs,a,c),this}get names(){return D(this.lhs instanceof b.Name?{}:{...this.lhs.names},this.rhs)}}class i extends h{constructor(a,b,c,d){super(a,c,d),this.op=b}render({_n:a}){return`${this.lhs} ${this.op}= ${this.rhs};`+a}}class j extends f{constructor(a){super(),this.label=a,this.names={}}render({_n:a}){return`${this.label}:`+a}}class k extends f{constructor(a){super(),this.label=a,this.names={}}render({_n:a}){let b=this.label?` ${this.label}`:"";return`break${b};`+a}}class l extends f{constructor(a){super(),this.error=a}render({_n:a}){return`throw ${this.error};`+a}get names(){return this.error.names}}class m extends f{constructor(a){super(),this.code=a}render({_n:a}){return`${this.code};`+a}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(a,b){return this.code=E(this.code,a,b),this}get names(){return this.code instanceof b._CodeOrName?this.code.names:{}}}class n extends f{constructor(a=[]){super(),this.nodes=a}render(a){return this.nodes.reduce((b,c)=>b+c.render(a),"")}optimizeNodes(){let{nodes:a}=this,b=a.length;for(;b--;){let c=a[b].optimizeNodes();Array.isArray(c)?a.splice(b,1,...c):c?a[b]=c:a.splice(b,1)}return a.length>0?this:void 0}optimizeNames(a,b){let{nodes:c}=this,d=c.length;for(;d--;){let e=c[d];e.optimizeNames(a,b)||(function(a,b){for(let c in b)a[c]=(a[c]||0)-(b[c]||0)}(a,e.names),c.splice(d,1))}return c.length>0?this:void 0}get names(){return this.nodes.reduce((a,b)=>C(a,b.names),{})}}class o extends n{render(a){return"{"+a._n+super.render(a)+"}"+a._n}}class p extends n{}class q extends o{}q.kind="else";class r extends o{constructor(a,b){super(b),this.condition=a}render(a){let b=`if(${this.condition})`+super.render(a);return this.else&&(b+="else "+this.else.render(a)),b}optimizeNodes(){super.optimizeNodes();let a=this.condition;if(!0===a)return this.nodes;let b=this.else;if(b){let a=b.optimizeNodes();b=this.else=Array.isArray(a)?new q(a):a}return b?!1===a?b instanceof r?b:b.nodes:this.nodes.length?this:new r(H(a),b instanceof r?[b]:b.nodes):!1!==a&&this.nodes.length?this:void 0}optimizeNames(a,b){var c;if(this.else=null==(c=this.else)?void 0:c.optimizeNames(a,b),super.optimizeNames(a,b)||this.else)return this.condition=E(this.condition,a,b),this}get names(){let a=super.names;return D(a,this.condition),this.else&&C(a,this.else.names),a}}r.kind="if";class s extends o{}s.kind="for";class t extends s{constructor(a){super(),this.iteration=a}render(a){return`for(${this.iteration})`+super.render(a)}optimizeNames(a,b){if(super.optimizeNames(a,b))return this.iteration=E(this.iteration,a,b),this}get names(){return C(super.names,this.iteration.names)}}class u extends s{constructor(a,b,c,d){super(),this.varKind=a,this.name=b,this.from=c,this.to=d}render(a){let b=a.es5?c.varKinds.var:this.varKind,{name:d,from:e,to:f}=this;return`for(${b} ${d}=${e}; ${d}<${f}; ${d}++)`+super.render(a)}get names(){let a=D(super.names,this.from);return D(a,this.to)}}class v extends s{constructor(a,b,c,d){super(),this.loop=a,this.varKind=b,this.name=c,this.iterable=d}render(a){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(a)}optimizeNames(a,b){if(super.optimizeNames(a,b))return this.iterable=E(this.iterable,a,b),this}get names(){return C(super.names,this.iterable.names)}}class w extends o{constructor(a,b,c){super(),this.name=a,this.args=b,this.async=c}render(a){let b=this.async?"async ":"";return`${b}function ${this.name}(${this.args})`+super.render(a)}}w.kind="func";class x extends n{render(a){return"return "+super.render(a)}}x.kind="return";class y extends o{render(a){let b="try"+super.render(a);return this.catch&&(b+=this.catch.render(a)),this.finally&&(b+=this.finally.render(a)),b}optimizeNodes(){var a,b;return super.optimizeNodes(),null==(a=this.catch)||a.optimizeNodes(),null==(b=this.finally)||b.optimizeNodes(),this}optimizeNames(a,b){var c,d;return super.optimizeNames(a,b),null==(c=this.catch)||c.optimizeNames(a,b),null==(d=this.finally)||d.optimizeNames(a,b),this}get names(){let a=super.names;return this.catch&&C(a,this.catch.names),this.finally&&C(a,this.finally.names),a}}class z extends o{constructor(a){super(),this.error=a}render(a){return`catch(${this.error})`+super.render(a)}}z.kind="catch";class A extends o{render(a){return"finally"+super.render(a)}}A.kind="finally";class B{constructor(a,b={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...b,_n:b.lines?`
`:""},this._extScope=a,this._scope=new c.Scope({parent:a}),this._nodes=[new p]}toString(){return this._root.render(this.opts)}name(a){return this._scope.name(a)}scopeName(a){return this._extScope.name(a)}scopeValue(a,b){let c=this._extScope.value(a,b);return(this._values[c.prefix]||(this._values[c.prefix]=new Set)).add(c),c}getScopeValue(a,b){return this._extScope.getValue(a,b)}scopeRefs(a){return this._extScope.scopeRefs(a,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(a,b,c,d){let e=this._scope.toName(b);return void 0!==c&&d&&(this._constants[e.str]=c),this._leafNode(new g(a,e,c)),e}const(a,b,d){return this._def(c.varKinds.const,a,b,d)}let(a,b,d){return this._def(c.varKinds.let,a,b,d)}var(a,b,d){return this._def(c.varKinds.var,a,b,d)}assign(a,b,c){return this._leafNode(new h(a,b,c))}add(b,c){return this._leafNode(new i(b,a.operators.ADD,c))}code(a){return"function"==typeof a?a():a!==b.nil&&this._leafNode(new m(a)),this}object(...a){let c=["{"];for(let[d,e]of a)c.length>1&&c.push(","),c.push(d),(d!==e||this.opts.es5)&&(c.push(":"),(0,b.addCodeArg)(c,e));return c.push("}"),new b._Code(c)}if(a,b,c){if(this._blockNode(new r(a)),b&&c)this.code(b).else().code(c).endIf();else if(b)this.code(b).endIf();else if(c)throw Error('CodeGen: "else" body without "then" body');return this}elseIf(a){return this._elseNode(new r(a))}else(){return this._elseNode(new q)}endIf(){return this._endBlockNode(r,q)}_for(a,b){return this._blockNode(a),b&&this.code(b).endFor(),this}for(a,b){return this._for(new t(a),b)}forRange(a,b,d,e,f=this.opts.es5?c.varKinds.var:c.varKinds.let){let g=this._scope.toName(a);return this._for(new u(f,g,b,d),()=>e(g))}forOf(a,d,e,f=c.varKinds.const){let g=this._scope.toName(a);if(this.opts.es5){let a=d instanceof b.Name?d:this.var("_arr",d);return this.forRange("_i",0,(0,b._)`${a}.length`,c=>{this.var(g,(0,b._)`${a}[${c}]`),e(g)})}return this._for(new v("of",f,g,d),()=>e(g))}forIn(a,d,e,f=this.opts.es5?c.varKinds.var:c.varKinds.const){if(this.opts.ownProperties)return this.forOf(a,(0,b._)`Object.keys(${d})`,e);let g=this._scope.toName(a);return this._for(new v("in",f,g,d),()=>e(g))}endFor(){return this._endBlockNode(s)}label(a){return this._leafNode(new j(a))}break(a){return this._leafNode(new k(a))}return(a){let b=new x;if(this._blockNode(b),this.code(a),1!==b.nodes.length)throw Error('CodeGen: "return" should have one node');return this._endBlockNode(x)}try(a,b,c){if(!b&&!c)throw Error('CodeGen: "try" without "catch" and "finally"');let d=new y;if(this._blockNode(d),this.code(a),b){let a=this.name("e");this._currNode=d.catch=new z(a),b(a)}return c&&(this._currNode=d.finally=new A,this.code(c)),this._endBlockNode(z,A)}throw(a){return this._leafNode(new l(a))}block(a,b){return this._blockStarts.push(this._nodes.length),a&&this.code(a).endBlock(b),this}endBlock(a){let b=this._blockStarts.pop();if(void 0===b)throw Error("CodeGen: not in self-balancing block");let c=this._nodes.length-b;if(c<0||void 0!==a&&c!==a)throw Error(`CodeGen: wrong number of nodes: ${c} vs ${a} expected`);return this._nodes.length=b,this}func(a,c=b.nil,d,e){return this._blockNode(new w(a,c,d)),e&&this.code(e).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(a=1){for(;a-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(a){return this._currNode.nodes.push(a),this}_blockNode(a){this._currNode.nodes.push(a),this._nodes.push(a)}_endBlockNode(a,b){let c=this._currNode;if(c instanceof a||b&&c instanceof b)return this._nodes.pop(),this;throw Error(`CodeGen: not in block "${b?`${a.kind}/${b.kind}`:a.kind}"`)}_elseNode(a){let b=this._currNode;if(!(b instanceof r))throw Error('CodeGen: "else" without "if"');return this._currNode=b.else=a,this}get _root(){return this._nodes[0]}get _currNode(){let a=this._nodes;return a[a.length-1]}set _currNode(a){let b=this._nodes;b[b.length-1]=a}}function C(a,b){for(let c in b)a[c]=(a[c]||0)+(b[c]||0);return a}function D(a,c){return c instanceof b._CodeOrName?C(a,c.names):a}function E(a,c,d){var e;if(a instanceof b.Name)return f(a);if(!((e=a)instanceof b._Code&&e._items.some(a=>a instanceof b.Name&&1===c[a.str]&&void 0!==d[a.str])))return a;return new b._Code(a._items.reduce((a,c)=>(c instanceof b.Name&&(c=f(c)),c instanceof b._Code?a.push(...c._items):a.push(c),a),[]));function f(a){let b=d[a.str];return void 0===b||1!==c[a.str]?a:(delete c[a.str],b)}}function H(a){return"boolean"==typeof a||"number"==typeof a||null===a?!a:(0,b._)`!${L(a)}`}a.CodeGen=B,a.not=H;var I=K(a.operators.AND);a.and=function(...a){return a.reduce(I)};var J=K(a.operators.OR);function K(a){return(c,d)=>c===b.nil?d:d===b.nil?c:(0,b._)`${L(c)} ${a} ${L(d)}`}function L(a){return a instanceof b.Name?a:(0,b._)`(${a})`}a.or=function(...a){return a.reduce(J)}}),I=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.checkStrictMode=a.getErrorPath=a.Type=a.useFunc=a.setEvaluated=a.evaluatedPropsToName=a.mergeEvaluated=a.eachItem=a.unescapeJsonPointer=a.escapeJsonPointer=a.escapeFragment=a.unescapeFragment=a.schemaRefOrVal=a.schemaHasRulesButRef=a.schemaHasRules=a.checkUnknownRules=a.alwaysValidSchema=a.toHash=void 0;var b,c=H(),d=F();function e(a,b=a.schema){let{opts:c,self:d}=a;if(!c.strictSchema||"boolean"==typeof b)return;let f=d.RULES.keywords;for(let c in b)f[c]||m(a,`unknown keyword: "${c}"`)}function f(a,b){if("boolean"==typeof a)return!a;for(let c in a)if(b[c])return!0;return!1}function g(a){return"number"==typeof a?`${a}`:a.replace(/~/g,"~0").replace(/\//g,"~1")}function h(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}function i({mergeNames:a,mergeToName:b,mergeValues:d,resultToName:e}){return(f,g,h,i)=>{let j=void 0===h?g:h instanceof c.Name?(g instanceof c.Name?a(f,g,h):b(f,g,h),h):g instanceof c.Name?(b(f,h,g),g):d(g,h);return i!==c.Name||j instanceof c.Name?j:e(f,j)}}function j(a,b){if(!0===b)return a.var("props",!0);let d=a.var("props",(0,c._)`{}`);return void 0!==b&&k(a,d,b),d}function k(a,b,d){Object.keys(d).forEach(d=>a.assign((0,c._)`${b}${(0,c.getProperty)(d)}`,!0))}a.toHash=function(a){let b={};for(let c of a)b[c]=!0;return b},a.alwaysValidSchema=function(a,b){return"boolean"==typeof b?b:0===Object.keys(b).length||(e(a,b),!f(b,a.self.RULES.all))},a.checkUnknownRules=e,a.schemaHasRules=f,a.schemaHasRulesButRef=function(a,b){if("boolean"==typeof a)return!a;for(let c in a)if("$ref"!==c&&b.all[c])return!0;return!1},a.schemaRefOrVal=function({topSchemaRef:a,schemaPath:b},d,e,f){if(!f){if("number"==typeof d||"boolean"==typeof d)return d;if("string"==typeof d)return(0,c._)`${d}`}return(0,c._)`${a}${b}${(0,c.getProperty)(e)}`},a.unescapeFragment=function(a){return h(decodeURIComponent(a))},a.escapeFragment=function(a){return encodeURIComponent(g(a))},a.escapeJsonPointer=g,a.unescapeJsonPointer=h,a.eachItem=function(a,b){if(Array.isArray(a))for(let c of a)b(c);else b(a)},a.mergeEvaluated={props:i({mergeNames:(a,b,d)=>a.if((0,c._)`${d} !== true && ${b} !== undefined`,()=>{a.if((0,c._)`${b} === true`,()=>a.assign(d,!0),()=>a.assign(d,(0,c._)`${d} || {}`).code((0,c._)`Object.assign(${d}, ${b})`))}),mergeToName:(a,b,d)=>a.if((0,c._)`${d} !== true`,()=>{!0===b?a.assign(d,!0):(a.assign(d,(0,c._)`${d} || {}`),k(a,d,b))}),mergeValues:(a,b)=>!0===a||{...a,...b},resultToName:j}),items:i({mergeNames:(a,b,d)=>a.if((0,c._)`${d} !== true && ${b} !== undefined`,()=>a.assign(d,(0,c._)`${b} === true ? true : ${d} > ${b} ? ${d} : ${b}`)),mergeToName:(a,b,d)=>a.if((0,c._)`${d} !== true`,()=>a.assign(d,!0===b||(0,c._)`${d} > ${b} ? ${d} : ${b}`)),mergeValues:(a,b)=>!0===a||Math.max(a,b),resultToName:(a,b)=>a.var("items",b)})},a.evaluatedPropsToName=j,a.setEvaluated=k;var l={};function m(a,b,c=a.opts.strictSchema){if(c){if(b=`strict mode: ${b}`,!0===c)throw Error(b);a.self.logger.warn(b)}}a.useFunc=function(a,b){return a.scopeValue("func",{ref:b,code:l[b.code]||(l[b.code]=new d._Code(b.code))})},function(a){a[a.Num=0]="Num",a[a.Str=1]="Str"}(b||(a.Type=b={})),a.getErrorPath=function(a,d,e){if(a instanceof c.Name){let f=d===b.Num;return e?f?(0,c._)`"[" + ${a} + "]"`:(0,c._)`"['" + ${a} + "']"`:f?(0,c._)`"/" + ${a}`:(0,c._)`"/" + ${a}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return e?(0,c.getProperty)(a).toString():"/"+g(a)},a.checkStrictMode=m}),J=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H();a.default={data:new b.Name("data"),valCxt:new b.Name("valCxt"),instancePath:new b.Name("instancePath"),parentData:new b.Name("parentData"),parentDataProperty:new b.Name("parentDataProperty"),rootData:new b.Name("rootData"),dynamicAnchors:new b.Name("dynamicAnchors"),vErrors:new b.Name("vErrors"),errors:new b.Name("errors"),this:new b.Name("this"),self:new b.Name("self"),scope:new b.Name("scope"),json:new b.Name("json"),jsonPos:new b.Name("jsonPos"),jsonLen:new b.Name("jsonLen"),jsonPart:new b.Name("jsonPart")}}),K=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.extendErrors=a.resetErrorsCount=a.reportExtraError=a.reportError=a.keyword$DataError=a.keywordError=void 0;var b=H(),c=I(),d=J();function e(a,c){let e=a.const("err",c);a.if((0,b._)`${d.default.vErrors} === null`,()=>a.assign(d.default.vErrors,(0,b._)`[${e}]`),(0,b._)`${d.default.vErrors}.push(${e})`),a.code((0,b._)`${d.default.errors}++`)}function f(a,c){let{gen:d,validateName:e,schemaEnv:f}=a;f.$async?d.throw((0,b._)`new ${a.ValidationError}(${c})`):(d.assign((0,b._)`${e}.errors`,c),d.return(!1))}a.keywordError={message:({keyword:a})=>(0,b.str)`must pass "${a}" keyword validation`},a.keyword$DataError={message:({keyword:a,schemaType:c})=>c?(0,b.str)`"${a}" keyword must be ${c} ($data)`:(0,b.str)`"${a}" keyword is invalid ($data)`},a.reportError=function(c,d=a.keywordError,g,i){let{it:j}=c,{gen:k,compositeRule:l,allErrors:m}=j,n=h(c,d,g);(null!=i?i:l||m)?e(k,n):f(j,(0,b._)`[${n}]`)},a.reportExtraError=function(b,c=a.keywordError,g){let{it:i}=b,{gen:j,compositeRule:k,allErrors:l}=i;e(j,h(b,c,g)),k||l||f(i,d.default.vErrors)},a.resetErrorsCount=function(a,c){a.assign(d.default.errors,c),a.if((0,b._)`${d.default.vErrors} !== null`,()=>a.if(c,()=>a.assign((0,b._)`${d.default.vErrors}.length`,c),()=>a.assign(d.default.vErrors,null)))},a.extendErrors=function({gen:a,keyword:c,schemaValue:e,data:f,errsCount:g,it:h}){if(void 0===g)throw Error("ajv implementation error");let i=a.name("err");a.forRange("i",g,d.default.errors,g=>{a.const(i,(0,b._)`${d.default.vErrors}[${g}]`),a.if((0,b._)`${i}.instancePath === undefined`,()=>a.assign((0,b._)`${i}.instancePath`,(0,b.strConcat)(d.default.instancePath,h.errorPath))),a.assign((0,b._)`${i}.schemaPath`,(0,b.str)`${h.errSchemaPath}/${c}`),h.opts.verbose&&(a.assign((0,b._)`${i}.schema`,e),a.assign((0,b._)`${i}.data`,f))})};var g={keyword:new b.Name("keyword"),schemaPath:new b.Name("schemaPath"),params:new b.Name("params"),propertyName:new b.Name("propertyName"),message:new b.Name("message"),schema:new b.Name("schema"),parentSchema:new b.Name("parentSchema")};function h(a,e,f){let{createErrors:h}=a.it;return!1===h?(0,b._)`{}`:function(a,e,f={}){let{gen:h,it:i}=a,j=[function({errorPath:a},{instancePath:e}){let f=e?(0,b.str)`${a}${(0,c.getErrorPath)(e,c.Type.Str)}`:a;return[d.default.instancePath,(0,b.strConcat)(d.default.instancePath,f)]}(i,f),function({keyword:a,it:{errSchemaPath:d}},{schemaPath:e,parentSchema:f}){let h=f?d:(0,b.str)`${d}/${a}`;return e&&(h=(0,b.str)`${h}${(0,c.getErrorPath)(e,c.Type.Str)}`),[g.schemaPath,h]}(a,f)];return function(a,{params:c,message:e},f){let{keyword:h,data:i,schemaValue:j,it:k}=a,{opts:l,propertyName:m,topSchemaRef:n,schemaPath:o}=k;f.push([g.keyword,h],[g.params,"function"==typeof c?c(a):c||(0,b._)`{}`]),l.messages&&f.push([g.message,"function"==typeof e?e(a):e]),l.verbose&&f.push([g.schema,j],[g.parentSchema,(0,b._)`${n}${o}`],[d.default.data,i]),m&&f.push([g.propertyName,m])}(a,e,j),h.object(...j)}(a,e,f)}}),L=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.boolOrEmptySchema=a.topBoolOrEmptySchema=void 0;var b=K(),c=H(),d=J(),e={message:"boolean schema is false"};function f(a,c){let{gen:d,data:f}=a;(0,b.reportError)({gen:d,keyword:"false schema",data:f,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a},e,void 0,c)}a.topBoolOrEmptySchema=function(a){let{gen:b,schema:e,validateName:g}=a;!1===e?f(a,!1):"object"==typeof e&&!0===e.$async?b.return(d.default.data):(b.assign((0,c._)`${g}.errors`,null),b.return(!0))},a.boolOrEmptySchema=function(a,b){let{gen:c,schema:d}=a;!1===d?(c.var(b,!1),f(a)):c.var(b,!0)}}),M=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRules=a.isJSONType=void 0;var b=new Set(["string","number","integer","boolean","null","object","array"]);a.isJSONType=function(a){return"string"==typeof a&&b.has(a)},a.getRules=function(){let a={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...a,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},a.number,a.string,a.array,a.object],post:{rules:[]},all:{},keywords:{}}}}),N=D(a=>{function b(a,b){return b.rules.some(b=>c(a,b))}function c(a,b){var c;return void 0!==a[b.keyword]||(null==(c=b.definition.implements)?void 0:c.some(b=>void 0!==a[b]))}Object.defineProperty(a,"__esModule",{value:!0}),a.shouldUseRule=a.shouldUseGroup=a.schemaHasRulesForType=void 0,a.schemaHasRulesForType=function({schema:a,self:c},d){let e=c.RULES.types[d];return e&&!0!==e&&b(a,e)},a.shouldUseGroup=b,a.shouldUseRule=c}),O=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.reportTypeError=a.checkDataTypes=a.checkDataType=a.coerceAndCheckDataType=a.getJSONTypes=a.getSchemaTypes=a.DataType=void 0;var b,c=M(),d=N(),e=K(),f=H(),g=I();function h(a){let b=Array.isArray(a)?a:a?[a]:[];if(b.every(c.isJSONType))return b;throw Error("type must be JSONType or JSONType[]: "+b.join(","))}!function(a){a[a.Correct=0]="Correct",a[a.Wrong=1]="Wrong"}(b||(a.DataType=b={})),a.getSchemaTypes=function(a){let b=h(a.type);if(b.includes("null")){if(!1===a.nullable)throw Error("type: null contradicts nullable: false")}else{if(!b.length&&void 0!==a.nullable)throw Error('"nullable" cannot be used without "type"');!0===a.nullable&&b.push("null")}return b},a.getJSONTypes=h,a.coerceAndCheckDataType=function(a,c){var e,g;let{gen:h,data:j,opts:l}=a,n=(e=c,(g=l.coerceTypes)?e.filter(a=>i.has(a)||"array"===g&&"array"===a):[]),o=c.length>0&&!(0===n.length&&1===c.length&&(0,d.schemaHasRulesForType)(a,c[0]));if(o){let d=k(c,j,l.strictNumbers,b.Wrong);h.if(d,()=>{n.length?function(a,b,c){let{gen:d,data:e,opts:g}=a,h=d.let("dataType",(0,f._)`typeof ${e}`),j=d.let("coerced",(0,f._)`undefined`);for(let a of("array"===g.coerceTypes&&d.if((0,f._)`${h} == 'object' && Array.isArray(${e}) && ${e}.length == 1`,()=>d.assign(e,(0,f._)`${e}[0]`).assign(h,(0,f._)`typeof ${e}`).if(k(b,e,g.strictNumbers),()=>d.assign(j,e))),d.if((0,f._)`${j} !== undefined`),c))(i.has(a)||"array"===a&&"array"===g.coerceTypes)&&function(a){switch(a){case"string":d.elseIf((0,f._)`${h} == "number" || ${h} == "boolean"`).assign(j,(0,f._)`"" + ${e}`).elseIf((0,f._)`${e} === null`).assign(j,(0,f._)`""`);return;case"number":d.elseIf((0,f._)`${h} == "boolean" || ${e} === null
              || (${h} == "string" && ${e} && ${e} == +${e})`).assign(j,(0,f._)`+${e}`);return;case"integer":d.elseIf((0,f._)`${h} === "boolean" || ${e} === null
              || (${h} === "string" && ${e} && ${e} == +${e} && !(${e} % 1))`).assign(j,(0,f._)`+${e}`);return;case"boolean":d.elseIf((0,f._)`${e} === "false" || ${e} === 0 || ${e} === null`).assign(j,!1).elseIf((0,f._)`${e} === "true" || ${e} === 1`).assign(j,!0);return;case"null":d.elseIf((0,f._)`${e} === "" || ${e} === 0 || ${e} === false`),d.assign(j,null);return;case"array":d.elseIf((0,f._)`${h} === "string" || ${h} === "number"
              || ${h} === "boolean" || ${e} === null`).assign(j,(0,f._)`[${e}]`)}}(a);d.else(),m(a),d.endIf(),d.if((0,f._)`${j} !== undefined`,()=>{d.assign(e,j),function({gen:a,parentData:b,parentDataProperty:c},d){a.if((0,f._)`${b} !== undefined`,()=>a.assign((0,f._)`${b}[${c}]`,d))}(a,j)})}(a,c,n):m(a)})}return o};var i=new Set(["string","number","integer","boolean","null"]);function j(a,c,d,e=b.Correct){let g,h=e===b.Correct?f.operators.EQ:f.operators.NEQ;switch(a){case"null":return(0,f._)`${c} ${h} null`;case"array":g=(0,f._)`Array.isArray(${c})`;break;case"object":g=(0,f._)`${c} && typeof ${c} == "object" && !Array.isArray(${c})`;break;case"integer":g=i((0,f._)`!(${c} % 1) && !isNaN(${c})`);break;case"number":g=i();break;default:return(0,f._)`typeof ${c} ${h} ${a}`}return e===b.Correct?g:(0,f.not)(g);function i(a=f.nil){return(0,f.and)((0,f._)`typeof ${c} == "number"`,a,d?(0,f._)`isFinite(${c})`:f.nil)}}function k(a,b,c,d){let e;if(1===a.length)return j(a[0],b,c,d);let h=(0,g.toHash)(a);if(h.array&&h.object){let a=(0,f._)`typeof ${b} != "object"`;e=h.null?a:(0,f._)`!${b} || ${a}`,delete h.null,delete h.array,delete h.object}else e=f.nil;for(let a in h.number&&delete h.integer,h)e=(0,f.and)(e,j(a,b,c,d));return e}a.checkDataType=j,a.checkDataTypes=k;var l={message:({schema:a})=>`must be ${a}`,params:({schema:a,schemaValue:b})=>"string"==typeof a?(0,f._)`{type: ${a}}`:(0,f._)`{type: ${b}}`};function m(a){let b=function(a){let{gen:b,data:c,schema:d}=a,e=(0,g.schemaRefOrVal)(a,d,"type");return{gen:b,keyword:"type",data:c,schema:d.type,schemaCode:e,schemaValue:e,parentSchema:d,params:{},it:a}}(a);(0,e.reportError)(b,l)}a.reportTypeError=m}),P=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.assignDefaults=void 0;var b=H(),c=I();function d(a,d,e){let{gen:f,compositeRule:g,data:h,opts:i}=a;if(void 0===e)return;let j=(0,b._)`${h}${(0,b.getProperty)(d)}`;if(g)return void(0,c.checkStrictMode)(a,`default is ignored for: ${j}`);let k=(0,b._)`${j} === undefined`;"empty"===i.useDefaults&&(k=(0,b._)`${k} || ${j} === null || ${j} === ""`),f.if(k,(0,b._)`${j} = ${(0,b.stringify)(e)}`)}a.assignDefaults=function(a,b){let{properties:c,items:e}=a.schema;if("object"===b&&c)for(let b in c)d(a,b,c[b].default);else"array"===b&&Array.isArray(e)&&e.forEach((b,c)=>d(a,c,b.default))}}),Q=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.validateUnion=a.validateArray=a.usePattern=a.callValidateCode=a.schemaProperties=a.allSchemaProperties=a.noPropertyInData=a.propertyInData=a.isOwnProperty=a.hasPropFunc=a.reportMissingProp=a.checkMissingProp=a.checkReportMissingProp=void 0;var b=H(),c=I(),d=J(),e=I();function f(a){return a.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,b._)`Object.prototype.hasOwnProperty`})}function g(a,c,d){return(0,b._)`${f(a)}.call(${c}, ${d})`}function h(a,c,d,e){let f=(0,b._)`${c}${(0,b.getProperty)(d)} === undefined`;return e?(0,b.or)(f,(0,b.not)(g(a,c,d))):f}function i(a){return a?Object.keys(a).filter(a=>"__proto__"!==a):[]}a.checkReportMissingProp=function(a,c){let{gen:d,data:e,it:f}=a;d.if(h(d,e,c,f.opts.ownProperties),()=>{a.setParams({missingProperty:(0,b._)`${c}`},!0),a.error()})},a.checkMissingProp=function({gen:a,data:c,it:{opts:d}},e,f){return(0,b.or)(...e.map(e=>(0,b.and)(h(a,c,e,d.ownProperties),(0,b._)`${f} = ${e}`)))},a.reportMissingProp=function(a,b){a.setParams({missingProperty:b},!0),a.error()},a.hasPropFunc=f,a.isOwnProperty=g,a.propertyInData=function(a,c,d,e){let f=(0,b._)`${c}${(0,b.getProperty)(d)} !== undefined`;return e?(0,b._)`${f} && ${g(a,c,d)}`:f},a.noPropertyInData=h,a.allSchemaProperties=i,a.schemaProperties=function(a,b){return i(b).filter(d=>!(0,c.alwaysValidSchema)(a,b[d]))},a.callValidateCode=function({schemaCode:a,data:c,it:{gen:e,topSchemaRef:f,schemaPath:g,errorPath:h},it:i},j,k,l){let m=l?(0,b._)`${a}, ${c}, ${f}${g}`:c,n=[[d.default.instancePath,(0,b.strConcat)(d.default.instancePath,h)],[d.default.parentData,i.parentData],[d.default.parentDataProperty,i.parentDataProperty],[d.default.rootData,d.default.rootData]];i.opts.dynamicRef&&n.push([d.default.dynamicAnchors,d.default.dynamicAnchors]);let o=(0,b._)`${m}, ${e.object(...n)}`;return k!==b.nil?(0,b._)`${j}.call(${k}, ${o})`:(0,b._)`${j}(${o})`};var j=(0,b._)`new RegExp`;a.usePattern=function({gen:a,it:{opts:c}},d){let f=c.unicodeRegExp?"u":"",{regExp:g}=c.code,h=g(d,f);return a.scopeValue("pattern",{key:h.toString(),ref:h,code:(0,b._)`${"new RegExp"===g.code?j:(0,e.useFunc)(a,g)}(${d}, ${f})`})},a.validateArray=function(a){let{gen:d,data:e,keyword:f,it:g}=a,h=d.name("valid");if(g.allErrors){let a=d.let("valid",!0);return i(()=>d.assign(a,!1)),a}return d.var(h,!0),i(()=>d.break()),h;function i(g){let i=d.const("len",(0,b._)`${e}.length`);d.forRange("i",0,i,e=>{a.subschema({keyword:f,dataProp:e,dataPropType:c.Type.Num},h),d.if((0,b.not)(h),g)})}},a.validateUnion=function(a){let{gen:d,schema:e,keyword:f,it:g}=a;if(!Array.isArray(e))throw Error("ajv implementation error");if(e.some(a=>(0,c.alwaysValidSchema)(g,a))&&!g.opts.unevaluated)return;let h=d.let("valid",!1),i=d.name("_valid");d.block(()=>e.forEach((c,e)=>{let g=a.subschema({keyword:f,schemaProp:e,compositeRule:!0},i);d.assign(h,(0,b._)`${h} || ${i}`),a.mergeValidEvaluated(g,i)||d.if((0,b.not)(h))})),a.result(h,()=>a.reset(),()=>a.error(!0))}}),R=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.validateKeywordUsage=a.validSchemaType=a.funcKeywordCode=a.macroKeywordCode=void 0;var b=H(),c=J(),d=Q(),e=K();function f(a){let{gen:c,data:d,it:e}=a;c.if(e.parentData,()=>c.assign(d,(0,b._)`${e.parentData}[${e.parentDataProperty}]`))}function g(a,c,d){if(void 0===d)throw Error(`keyword "${c}" failed to compile`);return a.scopeValue("keyword","function"==typeof d?{ref:d}:{ref:d,code:(0,b.stringify)(d)})}a.macroKeywordCode=function(a,c){let{gen:d,keyword:e,schema:f,parentSchema:h,it:i}=a,j=c.macro.call(i.self,f,h,i),k=g(d,e,j);!1!==i.opts.validateSchema&&i.self.validateSchema(j,!0);let l=d.name("valid");a.subschema({schema:j,schemaPath:b.nil,errSchemaPath:`${i.errSchemaPath}/${e}`,topSchemaRef:k,compositeRule:!0},l),a.pass(l,()=>a.error(!0))},a.funcKeywordCode=function(a,h){var i;let{gen:j,keyword:k,schema:l,parentSchema:m,$data:n,it:o}=a;!function({schemaEnv:a},b){if(b.async&&!a.$async)throw Error("async keyword in sync schema")}(o,h);let p=g(j,k,!n&&h.compile?h.compile.call(o.self,l,m,o):h.validate),q=j.let("valid");function r(e=h.async?(0,b._)`await `:b.nil){let f=o.opts.passContext?c.default.this:c.default.self,g=!("compile"in h&&!n||!1===h.schema);j.assign(q,(0,b._)`${e}${(0,d.callValidateCode)(a,p,f,g)}`,h.modifying)}function s(a){var c;j.if((0,b.not)(null!=(c=h.valid)?c:q),a)}a.block$data(q,function(){if(!1===h.errors)r(),h.modifying&&f(a),s(()=>a.error());else{let d=h.async?function(){let a=j.let("ruleErrs",null);return j.try(()=>r((0,b._)`await `),c=>j.assign(q,!1).if((0,b._)`${c} instanceof ${o.ValidationError}`,()=>j.assign(a,(0,b._)`${c}.errors`),()=>j.throw(c))),a}():function(){let a=(0,b._)`${p}.errors`;return j.assign(a,null),r(b.nil),a}();h.modifying&&f(a),s(()=>(function(a,d){let{gen:f}=a;f.if((0,b._)`Array.isArray(${d})`,()=>{f.assign(c.default.vErrors,(0,b._)`${c.default.vErrors} === null ? ${d} : ${c.default.vErrors}.concat(${d})`).assign(c.default.errors,(0,b._)`${c.default.vErrors}.length`),(0,e.extendErrors)(a)},()=>a.error())})(a,d))}}),a.ok(null!=(i=h.valid)?i:q)},a.validSchemaType=function(a,b,c=!1){return!b.length||b.some(b=>"array"===b?Array.isArray(a):"object"===b?a&&"object"==typeof a&&!Array.isArray(a):typeof a==b||c&&void 0===a)},a.validateKeywordUsage=function({schema:a,opts:b,self:c,errSchemaPath:d},e,f){if(Array.isArray(e.keyword)?!e.keyword.includes(f):e.keyword!==f)throw Error("ajv implementation error");let g=e.dependencies;if(null==g?void 0:g.some(b=>!Object.prototype.hasOwnProperty.call(a,b)))throw Error(`parent schema must have dependencies of ${f}: ${g.join(",")}`);if(e.validateSchema&&!e.validateSchema(a[f])){let a=`keyword "${f}" value is invalid at path "${d}": `+c.errorsText(e.validateSchema.errors);if("log"===b.validateSchema)c.logger.error(a);else throw Error(a)}}}),S=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.extendSubschemaMode=a.extendSubschemaData=a.getSubschema=void 0;var b=H(),c=I();a.getSubschema=function(a,{keyword:d,schemaProp:e,schema:f,schemaPath:g,errSchemaPath:h,topSchemaRef:i}){if(void 0!==d&&void 0!==f)throw Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==d){let f=a.schema[d];return void 0===e?{schema:f,schemaPath:(0,b._)`${a.schemaPath}${(0,b.getProperty)(d)}`,errSchemaPath:`${a.errSchemaPath}/${d}`}:{schema:f[e],schemaPath:(0,b._)`${a.schemaPath}${(0,b.getProperty)(d)}${(0,b.getProperty)(e)}`,errSchemaPath:`${a.errSchemaPath}/${d}/${(0,c.escapeFragment)(e)}`}}if(void 0!==f){if(void 0===g||void 0===h||void 0===i)throw Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:f,schemaPath:g,topSchemaRef:i,errSchemaPath:h}}throw Error('either "keyword" or "schema" must be passed')},a.extendSubschemaData=function(a,d,{dataProp:e,dataPropType:f,data:g,dataTypes:h,propertyName:i}){if(void 0!==g&&void 0!==e)throw Error('both "data" and "dataProp" passed, only one allowed');let{gen:j}=d;if(void 0!==e){let{errorPath:g,dataPathArr:h,opts:i}=d;k(j.let("data",(0,b._)`${d.data}${(0,b.getProperty)(e)}`,!0)),a.errorPath=(0,b.str)`${g}${(0,c.getErrorPath)(e,f,i.jsPropertySyntax)}`,a.parentDataProperty=(0,b._)`${e}`,a.dataPathArr=[...h,a.parentDataProperty]}function k(b){a.data=b,a.dataLevel=d.dataLevel+1,a.dataTypes=[],d.definedProperties=new Set,a.parentData=d.data,a.dataNames=[...d.dataNames,b]}void 0!==g&&(k(g instanceof b.Name?g:j.let("data",g,!0)),void 0!==i&&(a.propertyName=i)),h&&(a.dataTypes=h)},a.extendSubschemaMode=function(a,{jtdDiscriminator:b,jtdMetadata:c,compositeRule:d,createErrors:e,allErrors:f}){void 0!==d&&(a.compositeRule=d),void 0!==e&&(a.createErrors=e),void 0!==f&&(a.allErrors=f),a.jtdDiscriminator=b,a.jtdMetadata=c}}),T=D((a,b)=>{b.exports=function a(b,c){if(b===c)return!0;if(b&&c&&"object"==typeof b&&"object"==typeof c){if(b.constructor!==c.constructor)return!1;if(Array.isArray(b)){if((d=b.length)!=c.length)return!1;for(e=d;0!=e--;)if(!a(b[e],c[e]))return!1;return!0}if(b.constructor===RegExp)return b.source===c.source&&b.flags===c.flags;if(b.valueOf!==Object.prototype.valueOf)return b.valueOf()===c.valueOf();if(b.toString!==Object.prototype.toString)return b.toString()===c.toString();if((d=(f=Object.keys(b)).length)!==Object.keys(c).length)return!1;for(e=d;0!=e--;)if(!Object.prototype.hasOwnProperty.call(c,f[e]))return!1;for(e=d;0!=e--;){var d,e,f,g=f[e];if(!a(b[g],c[g]))return!1}return!0}return b!=b&&c!=c}}),U=D((a,b)=>{var c=b.exports=function(a,b,d){"function"==typeof b&&(d=b,b={});var e="function"==typeof(d=b.cb||d)?d:d.pre||function(){};!function a(b,d,e,f,g,h,i,j,k,l){if(f&&"object"==typeof f&&!Array.isArray(f)){for(var m in d(f,g,h,i,j,k,l),f){var n=f[m];if(Array.isArray(n)){if(m in c.arrayKeywords)for(var o=0;o<n.length;o++)a(b,d,e,n[o],g+"/"+m+"/"+o,h,g,m,f,o)}else if(m in c.propsKeywords){if(n&&"object"==typeof n)for(var p in n)a(b,d,e,n[p],g+"/"+m+"/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),h,g,m,f,p)}else(m in c.keywords||b.allKeys&&!(m in c.skipKeywords))&&a(b,d,e,n,g+"/"+m,h,g,m,f)}e(f,g,h,i,j,k,l)}}(b,e,d.post||function(){},a,"",a)};c.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},c.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},c.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},c.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}}),V=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getSchemaRefs=a.resolveUrl=a.normalizeId=a._getFullPath=a.getFullPath=a.inlineRef=void 0;var b=I(),c=T(),d=U(),e=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);a.inlineRef=function(a,c=!0){return"boolean"==typeof a||(!0===c?!function a(b){for(let c in b){if(f.has(c))return!0;let d=b[c];if(Array.isArray(d)&&d.some(a)||"object"==typeof d&&a(d))return!0}return!1}(a):!!c&&function a(c){let d=0;for(let f in c)if("$ref"===f||(d++,!e.has(f)&&("object"==typeof c[f]&&(0,b.eachItem)(c[f],b=>d+=a(b)),d===1/0)))return 1/0;return d}(a)<=c)};var f=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function g(a,b="",c){!1!==c&&(b=j(b));let d=a.parse(b);return h(a,d)}function h(a,b){return a.serialize(b).split("#")[0]+"#"}a.getFullPath=g,a._getFullPath=h;var i=/#\/?$/;function j(a){return a?a.replace(i,""):""}a.normalizeId=j,a.resolveUrl=function(a,b,c){return c=j(c),a.resolve(b,c)};var k=/^[a-z_][-a-z0-9._]*$/i;a.getSchemaRefs=function(a,b){if("boolean"==typeof a)return{};let{schemaId:e,uriResolver:f}=this.opts,h=j(a[e]||b),i={"":h},l=g(f,h,!1),m={},n=new Set;return d(a,{allKeys:!0},(a,b,c,d)=>{if(void 0===d)return;let f=l+b,g=i[d];function h(b){let c=this.opts.uriResolver.resolve;if(b=j(g?c(g,b):b),n.has(b))throw p(b);n.add(b);let d=this.refs[b];return"string"==typeof d&&(d=this.refs[d]),"object"==typeof d?o(a,d.schema,b):b!==j(f)&&("#"===b[0]?(o(a,m[b],b),m[b]=a):this.refs[b]=f),b}function q(a){if("string"==typeof a){if(!k.test(a))throw Error(`invalid anchor "${a}"`);h.call(this,`#${a}`)}}"string"==typeof a[e]&&(g=h.call(this,a[e])),q.call(this,a.$anchor),q.call(this,a.$dynamicAnchor),i[b]=g}),m;function o(a,b,d){if(void 0!==b&&!c(a,b))throw p(d)}function p(a){return Error(`reference "${a}" resolves to more than one schema`)}}}),W=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getData=a.KeywordCxt=a.validateFunctionCode=void 0;var b=L(),c=O(),d=N(),e=O(),f=P(),g=R(),h=S(),i=H(),j=J(),k=V(),l=I(),m=K();function n({gen:a,validateName:b,schema:c,schemaEnv:d,opts:e},f){var g;e.code.es5?a.func(b,(0,i._)`${j.default.data}, ${j.default.valCxt}`,d.$async,()=>{var b,d;a.code((0,i._)`"use strict"; ${o(c,e)}`),b=a,d=e,b.if(j.default.valCxt,()=>{b.var(j.default.instancePath,(0,i._)`${j.default.valCxt}.${j.default.instancePath}`),b.var(j.default.parentData,(0,i._)`${j.default.valCxt}.${j.default.parentData}`),b.var(j.default.parentDataProperty,(0,i._)`${j.default.valCxt}.${j.default.parentDataProperty}`),b.var(j.default.rootData,(0,i._)`${j.default.valCxt}.${j.default.rootData}`),d.dynamicRef&&b.var(j.default.dynamicAnchors,(0,i._)`${j.default.valCxt}.${j.default.dynamicAnchors}`)},()=>{b.var(j.default.instancePath,(0,i._)`""`),b.var(j.default.parentData,(0,i._)`undefined`),b.var(j.default.parentDataProperty,(0,i._)`undefined`),b.var(j.default.rootData,j.default.data),d.dynamicRef&&b.var(j.default.dynamicAnchors,(0,i._)`{}`)}),a.code(f)}):a.func(b,(0,i._)`${j.default.data}, ${(g=e,(0,i._)`{${j.default.instancePath}="", ${j.default.parentData}, ${j.default.parentDataProperty}, ${j.default.rootData}=${j.default.data}${g.dynamicRef?(0,i._)`, ${j.default.dynamicAnchors}={}`:i.nil}}={}`)}`,d.$async,()=>a.code(o(c,e)).code(f))}function o(a,b){let c="object"==typeof a&&a[b.schemaId];return c&&(b.code.source||b.code.process)?(0,i._)`/*# sourceURL=${c} */`:i.nil}function p({schema:a,self:b}){if("boolean"==typeof a)return!a;for(let c in a)if(b.RULES.all[c])return!0;return!1}function q(a){return"boolean"!=typeof a.schema}function r(a){(0,l.checkUnknownRules)(a),function(a){let{schema:b,errSchemaPath:c,opts:d,self:e}=a;b.$ref&&d.ignoreKeywordsWithRef&&(0,l.schemaHasRulesButRef)(b,e.RULES)&&e.logger.warn(`$ref: keywords ignored in schema at path "${c}"`)}(a)}function s(a,b){if(a.opts.jtd)return u(a,[],!1,b);let d=(0,c.getSchemaTypes)(a.schema),e=(0,c.coerceAndCheckDataType)(a,d);u(a,d,!e,b)}function t({gen:a,schemaEnv:b,schema:c,errSchemaPath:d,opts:e}){let f=c.$comment;if(!0===e.$comment)a.code((0,i._)`${j.default.self}.logger.log(${f})`);else if("function"==typeof e.$comment){let c=(0,i.str)`${d}/$comment`,e=a.scopeValue("root",{ref:b.root});a.code((0,i._)`${j.default.self}.opts.$comment(${f}, ${c}, ${e}.schema)`)}}function u(a,b,c,f){var g,h,k,m;let{gen:n,schema:o,data:p,allErrors:q,opts:r,self:s}=a,{RULES:t}=s;if(o.$ref&&(r.ignoreKeywordsWithRef||!(0,l.schemaHasRulesButRef)(o,t)))return void n.block(()=>z(a,"$ref",t.all.$ref.definition));function u(g){(0,d.shouldUseGroup)(o,g)&&(g.type?(n.if((0,e.checkDataType)(g.type,p,r.strictNumbers)),v(a,g),1===b.length&&b[0]===g.type&&c&&(n.else(),(0,e.reportTypeError)(a)),n.endIf()):v(a,g),q||n.if((0,i._)`${j.default.errors} === ${f||0}`))}r.jtd||(g=a,h=b,!g.schemaEnv.meta&&g.opts.strictTypes&&(function(a,b){if(b.length){if(!a.dataTypes.length){a.dataTypes=b;return}b.forEach(b=>{w(a.dataTypes,b)||x(a,`type "${b}" not allowed by context "${a.dataTypes.join(",")}"`)}),function(a,b){let c=[];for(let d of a.dataTypes)w(b,d)?c.push(d):b.includes("integer")&&"number"===d&&c.push("integer");a.dataTypes=c}(a,b)}}(g,h),g.opts.allowUnionTypes||(k=g,(m=h).length>1&&!(2===m.length&&m.includes("null"))&&x(k,"use allowUnionTypes to allow union type keyword")),function(a,b){let c=a.self.RULES.all;for(let e in c){let f=c[e];if("object"==typeof f&&(0,d.shouldUseRule)(a.schema,f)){let{type:c}=f.definition;c.length&&!c.some(a=>{var c,d;return c=b,d=a,c.includes(d)||"number"===d&&c.includes("integer")})&&x(a,`missing type "${c.join(",")}" for keyword "${e}"`)}}}(g,g.dataTypes))),n.block(()=>{for(let a of t.rules)u(a);u(t.post)})}function v(a,b){let{gen:c,schema:e,opts:{useDefaults:g}}=a;g&&(0,f.assignDefaults)(a,b.type),c.block(()=>{for(let c of b.rules)(0,d.shouldUseRule)(e,c)&&z(a,c.keyword,c.definition,b.type)})}function w(a,b){return a.includes(b)||"integer"===b&&a.includes("number")}function x(a,b){let c=a.schemaEnv.baseId+a.errSchemaPath;b+=` at "${c}" (strictTypes)`,(0,l.checkStrictMode)(a,b,a.opts.strictTypes)}a.validateFunctionCode=function(a){if(q(a)&&(r(a),p(a)))return void function(a){let{schema:b,opts:c,gen:d}=a;n(a,()=>{c.$comment&&b.$comment&&t(a),function(a){let{schema:b,opts:c}=a;void 0!==b.default&&c.useDefaults&&c.strictSchema&&(0,l.checkStrictMode)(a,"default is ignored in the schema root")}(a),d.let(j.default.vErrors,null),d.let(j.default.errors,0),c.unevaluated&&function(a){let{gen:b,validateName:c}=a;a.evaluated=b.const("evaluated",(0,i._)`${c}.evaluated`),b.if((0,i._)`${a.evaluated}.dynamicProps`,()=>b.assign((0,i._)`${a.evaluated}.props`,(0,i._)`undefined`)),b.if((0,i._)`${a.evaluated}.dynamicItems`,()=>b.assign((0,i._)`${a.evaluated}.items`,(0,i._)`undefined`))}(a),s(a),function(a){let{gen:b,schemaEnv:c,validateName:d,ValidationError:e,opts:f}=a;c.$async?b.if((0,i._)`${j.default.errors} === 0`,()=>b.return(j.default.data),()=>b.throw((0,i._)`new ${e}(${j.default.vErrors})`)):(b.assign((0,i._)`${d}.errors`,j.default.vErrors),f.unevaluated&&function({gen:a,evaluated:b,props:c,items:d}){c instanceof i.Name&&a.assign((0,i._)`${b}.props`,c),d instanceof i.Name&&a.assign((0,i._)`${b}.items`,d)}(a),b.return((0,i._)`${j.default.errors} === 0`))}(a)})}(a);n(a,()=>(0,b.topBoolOrEmptySchema)(a))};class y{constructor(a,b,c){if((0,g.validateKeywordUsage)(a,b,c),this.gen=a.gen,this.allErrors=a.allErrors,this.keyword=c,this.data=a.data,this.schema=a.schema[c],this.$data=b.$data&&a.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,l.schemaRefOrVal)(a,this.schema,c,this.$data),this.schemaType=b.schemaType,this.parentSchema=a.schema,this.params={},this.it=a,this.def=b,this.$data)this.schemaCode=a.gen.const("vSchema",C(this.$data,a));else if(this.schemaCode=this.schemaValue,!(0,g.validSchemaType)(this.schema,b.schemaType,b.allowUndefined))throw Error(`${c} value must be ${JSON.stringify(b.schemaType)}`);("code"in b?b.trackErrors:!1!==b.errors)&&(this.errsCount=a.gen.const("_errs",j.default.errors))}result(a,b,c){this.failResult((0,i.not)(a),b,c)}failResult(a,b,c){this.gen.if(a),c?c():this.error(),b?(this.gen.else(),b(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(a,b){this.failResult((0,i.not)(a),void 0,b)}fail(a){if(void 0===a){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(a),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(a){if(!this.$data)return this.fail(a);let{schemaCode:b}=this;this.fail((0,i._)`${b} !== undefined && (${(0,i.or)(this.invalid$data(),a)})`)}error(a,b,c){if(b){this.setParams(b),this._error(a,c),this.setParams({});return}this._error(a,c)}_error(a,b){(a?m.reportExtraError:m.reportError)(this,this.def.error,b)}$dataError(){(0,m.reportError)(this,this.def.$dataError||m.keyword$DataError)}reset(){if(void 0===this.errsCount)throw Error('add "trackErrors" to keyword definition');(0,m.resetErrorsCount)(this.gen,this.errsCount)}ok(a){this.allErrors||this.gen.if(a)}setParams(a,b){b?Object.assign(this.params,a):this.params=a}block$data(a,b,c=i.nil){this.gen.block(()=>{this.check$data(a,c),b()})}check$data(a=i.nil,b=i.nil){if(!this.$data)return;let{gen:c,schemaCode:d,schemaType:e,def:f}=this;c.if((0,i.or)((0,i._)`${d} === undefined`,b)),a!==i.nil&&c.assign(a,!0),(e.length||f.validateSchema)&&(c.elseIf(this.invalid$data()),this.$dataError(),a!==i.nil&&c.assign(a,!1)),c.else()}invalid$data(){let{gen:a,schemaCode:b,schemaType:c,def:d,it:f}=this;return(0,i.or)(function(){if(c.length){if(!(b instanceof i.Name))throw Error("ajv implementation error");let a=Array.isArray(c)?c:[c];return(0,i._)`${(0,e.checkDataTypes)(a,b,f.opts.strictNumbers,e.DataType.Wrong)}`}return i.nil}(),function(){if(d.validateSchema){let c=a.scopeValue("validate$data",{ref:d.validateSchema});return(0,i._)`!${c}(${b})`}return i.nil}())}subschema(a,c){let d=(0,h.getSubschema)(this.it,a);(0,h.extendSubschemaData)(d,this.it,a),(0,h.extendSubschemaMode)(d,a);let e={...this.it,...d,items:void 0,props:void 0};return!function(a,c){if(q(a)&&(r(a),p(a))){var d=a,e=c;let{schema:b,gen:f,opts:g}=d;g.$comment&&b.$comment&&t(d),function(a){let b=a.schema[a.opts.schemaId];b&&(a.baseId=(0,k.resolveUrl)(a.opts.uriResolver,a.baseId,b))}(d),function(a){if(a.schema.$async&&!a.schemaEnv.$async)throw Error("async schema in sync schema")}(d);let h=f.const("_errs",j.default.errors);s(d,h),f.var(e,(0,i._)`${h} === ${j.default.errors}`);return}(0,b.boolOrEmptySchema)(a,c)}(e,c),e}mergeEvaluated(a,b){let{it:c,gen:d}=this;c.opts.unevaluated&&(!0!==c.props&&void 0!==a.props&&(c.props=l.mergeEvaluated.props(d,a.props,c.props,b)),!0!==c.items&&void 0!==a.items&&(c.items=l.mergeEvaluated.items(d,a.items,c.items,b)))}mergeValidEvaluated(a,b){let{it:c,gen:d}=this;if(c.opts.unevaluated&&(!0!==c.props||!0!==c.items))return d.if(b,()=>this.mergeEvaluated(a,i.Name)),!0}}function z(a,b,c,d){let e=new y(a,c,b);"code"in c?c.code(e,d):e.$data&&c.validate?(0,g.funcKeywordCode)(e,c):"macro"in c?(0,g.macroKeywordCode)(e,c):(c.compile||c.validate)&&(0,g.funcKeywordCode)(e,c)}a.KeywordCxt=y;var A=/^\/(?:[^~]|~0|~1)*$/,B=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function C(a,{dataLevel:b,dataNames:c,dataPathArr:d}){let e,f;if(""===a)return j.default.rootData;if("/"===a[0]){if(!A.test(a))throw Error(`Invalid JSON-pointer: ${a}`);e=a,f=j.default.rootData}else{let g=B.exec(a);if(!g)throw Error(`Invalid JSON-pointer: ${a}`);let i=+g[1];if("#"===(e=g[2])){if(i>=b)throw Error(h("property/index",i));return d[b-i]}if(i>b)throw Error(h("data",i));if(f=c[b-i],!e)return f}let g=f;for(let a of e.split("/"))a&&(f=(0,i._)`${f}${(0,i.getProperty)((0,l.unescapeJsonPointer)(a))}`,g=(0,i._)`${g} && ${f}`);return g;function h(a,c){return`Cannot access ${a} ${c} levels up, current level is ${b}`}}a.getData=C}),X=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});class b extends Error{constructor(a){super("validation failed"),this.errors=a,this.ajv=this.validation=!0}}a.default=b}),Y=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=V();class c extends Error{constructor(a,c,d,e){super(e||`can't resolve reference ${d} from id ${c}`),this.missingRef=(0,b.resolveUrl)(a,c,d),this.missingSchema=(0,b.normalizeId)((0,b.getFullPath)(a,this.missingRef))}}a.default=c}),Z=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.resolveSchema=a.getCompilingSchema=a.resolveRef=a.compileSchema=a.SchemaEnv=void 0;var b=H(),c=X(),d=J(),e=V(),f=I(),g=W();class h{constructor(a){var b;let c;this.refs={},this.dynamicAnchors={},"object"==typeof a.schema&&(c=a.schema),this.schema=a.schema,this.schemaId=a.schemaId,this.root=a.root||this,this.baseId=null!=(b=a.baseId)?b:(0,e.normalizeId)(null==c?void 0:c[a.schemaId||"$id"]),this.schemaPath=a.schemaPath,this.localRefs=a.localRefs,this.meta=a.meta,this.$async=null==c?void 0:c.$async,this.refs={}}}function i(a){let f,h,i=k.call(this,a);if(i)return i;let j=(0,e.getFullPath)(this.opts.uriResolver,a.root.baseId),{es5:l,lines:m}=this.opts.code,{ownProperties:n}=this.opts,o=new b.CodeGen(this.scope,{es5:l,lines:m,ownProperties:n});a.$async&&(f=o.scopeValue("Error",{ref:c.default,code:(0,b._)`require("ajv/dist/runtime/validation_error").default`}));let p=o.scopeName("validate");a.validateName=p;let q={gen:o,allErrors:this.opts.allErrors,data:d.default.data,parentData:d.default.parentData,parentDataProperty:d.default.parentDataProperty,dataNames:[d.default.data],dataPathArr:[b.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",!0===this.opts.code.source?{ref:a.schema,code:(0,b.stringify)(a.schema)}:{ref:a.schema}),validateName:p,ValidationError:f,schema:a.schema,schemaEnv:a,rootId:j,baseId:a.baseId||j,schemaPath:b.nil,errSchemaPath:a.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,b._)`""`,opts:this.opts,self:this};try{this._compilations.add(a),(0,g.validateFunctionCode)(q),o.optimize(this.opts.code.optimize);let c=o.toString();h=`${o.scopeRefs(d.default.scope)}return ${c}`,this.opts.code.process&&(h=this.opts.code.process(h,a));let e=Function(`${d.default.self}`,`${d.default.scope}`,h)(this,this.scope.get());if(this.scope.value(p,{ref:e}),e.errors=null,e.schema=a.schema,e.schemaEnv=a,a.$async&&(e.$async=!0),!0===this.opts.code.source&&(e.source={validateName:p,validateCode:c,scopeValues:o._values}),this.opts.unevaluated){let{props:a,items:c}=q;e.evaluated={props:a instanceof b.Name?void 0:a,items:c instanceof b.Name?void 0:c,dynamicProps:a instanceof b.Name,dynamicItems:c instanceof b.Name},e.source&&(e.source.evaluated=(0,b.stringify)(e.evaluated))}return a.validate=e,a}catch(b){throw delete a.validate,delete a.validateName,h&&this.logger.error("Error compiling schema, function code:",h),b}finally{this._compilations.delete(a)}}function j(a){return(0,e.inlineRef)(a.schema,this.opts.inlineRefs)?a.schema:a.validate?a:i.call(this,a)}function k(a){for(let d of this._compilations){var b,c;if(b=d,c=a,b.schema===c.schema&&b.root===c.root&&b.baseId===c.baseId)return d}}function l(a,b){let c;for(;"string"==typeof(c=this.refs[b]);)b=c;return c||this.schemas[b]||m.call(this,a,b)}function m(a,b){let c=this.opts.uriResolver.parse(b),d=(0,e._getFullPath)(this.opts.uriResolver,c),f=(0,e.getFullPath)(this.opts.uriResolver,a.baseId,void 0);if(Object.keys(a.schema).length>0&&d===f)return o.call(this,c,a);let g=(0,e.normalizeId)(d),j=this.refs[g]||this.schemas[g];if("string"==typeof j){let b=m.call(this,a,j);if("object"!=typeof(null==b?void 0:b.schema))return;return o.call(this,c,b)}if("object"==typeof(null==j?void 0:j.schema)){if(j.validate||i.call(this,j),g===(0,e.normalizeId)(b)){let{schema:b}=j,{schemaId:c}=this.opts,d=b[c];return d&&(f=(0,e.resolveUrl)(this.opts.uriResolver,f,d)),new h({schema:b,schemaId:c,root:a,baseId:f})}return o.call(this,c,j)}}a.SchemaEnv=h,a.compileSchema=i,a.resolveRef=function(a,b,c){var d;c=(0,e.resolveUrl)(this.opts.uriResolver,b,c);let f=a.refs[c];if(f)return f;let g=l.call(this,a,c);if(void 0===g){let e=null==(d=a.localRefs)?void 0:d[c],{schemaId:f}=this.opts;e&&(g=new h({schema:e,schemaId:f,root:a,baseId:b}))}if(void 0!==g)return a.refs[c]=j.call(this,g)},a.getCompilingSchema=k,a.resolveSchema=m;var n=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function o(a,{baseId:b,schema:c,root:d}){var g;let i;if((null==(g=a.fragment)?void 0:g[0])!=="/")return;for(let d of a.fragment.slice(1).split("/")){if("boolean"==typeof c)return;let a=c[(0,f.unescapeFragment)(d)];if(void 0===a)return;let g="object"==typeof(c=a)&&c[this.opts.schemaId];!n.has(d)&&g&&(b=(0,e.resolveUrl)(this.opts.uriResolver,b,g))}if("boolean"!=typeof c&&c.$ref&&!(0,f.schemaHasRulesButRef)(c,this.RULES)){let a=(0,e.resolveUrl)(this.opts.uriResolver,b,c.$ref);i=m.call(this,d,a)}let{schemaId:j}=this.opts;if((i=i||new h({schema:c,schemaId:j,root:d,baseId:b})).schema!==i.root.schema)return i}}),$=D((a,b)=>{b.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}}),_=D((a,b)=>{b.exports={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}}),aa=D((a,b)=>{var{HEX:c}=_(),d=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function e(a){if(3>h(a,"."))return{host:a,isIPV4:!1};let[b]=a.match(d)||[];return b?{host:function(a,b){let c="",d=!0,e=a.length;for(let f=0;f<e;f++){let g=a[f];"0"===g&&d?(f+1<=e&&"."===a[f+1]||f+1===e)&&(c+=g,d=!1):(d=g===b,c+=g)}return c}(b,"."),isIPV4:!0}:{host:a,isIPV4:!1}}function f(a,b=!1){let d="",e=!0;for(let b of a){if(void 0===c[b])return;"0"!==b&&!0===e&&(e=!1),e||(d+=b)}return b&&0===d.length&&(d="0"),d}function g(a){if(2>h(a,":"))return{host:a,isIPV6:!1};let b=function(a){let b=0,c={error:!1,address:"",zone:""},d=[],e=[],g=!1,h=!1,i=!1;function j(){if(e.length){if(!1===g){let a=f(e);if(void 0===a)return c.error=!0,!1;d.push(a)}e.length=0}return!0}for(let f=0;f<a.length;f++){let k=a[f];if("["!==k&&"]"!==k)if(":"===k){if(!0===h&&(i=!0),!j())break;if(b++,d.push(":"),b>7){c.error=!0;break}f-1>=0&&":"===a[f-1]&&(h=!0);continue}else if("%"===k){if(!j())break;g=!0}else{e.push(k);continue}}return e.length&&(g?c.zone=e.join(""):i?d.push(e.join("")):d.push(f(e))),c.address=d.join(""),c}(a);if(b.error)return{host:a,isIPV6:!1};{let a=b.address,c=b.address;return b.zone&&(a+="%"+b.zone,c+="%25"+b.zone),{host:a,escapedHost:c,isIPV6:!0}}}function h(a,b){let c=0;for(let d=0;d<a.length;d++)a[d]===b&&c++;return c}var i=/^\.\.?\//u,j=/^\/\.(?:\/|$)/u,k=/^\/\.\.(?:\/|$)/u,l=/^\/?(?:.|\n)*?(?=\/|$)/u;b.exports={recomposeAuthority:function(a){let b=[];if(void 0!==a.userinfo&&(b.push(a.userinfo),b.push("@")),void 0!==a.host){let c=unescape(a.host),d=e(c);if(d.isIPV4)c=d.host;else{let b=g(d.host);c=!0===b.isIPV6?`[${b.escapedHost}]`:a.host}b.push(c)}return("number"==typeof a.port||"string"==typeof a.port)&&(b.push(":"),b.push(String(a.port))),b.length?b.join(""):void 0},normalizeComponentEncoding:function(a,b){let c=!0!==b?escape:unescape;return void 0!==a.scheme&&(a.scheme=c(a.scheme)),void 0!==a.userinfo&&(a.userinfo=c(a.userinfo)),void 0!==a.host&&(a.host=c(a.host)),void 0!==a.path&&(a.path=c(a.path)),void 0!==a.query&&(a.query=c(a.query)),void 0!==a.fragment&&(a.fragment=c(a.fragment)),a},removeDotSegments:function(a){let b=[];for(;a.length;)if(a.match(i))a=a.replace(i,"");else if(a.match(j))a=a.replace(j,"/");else if(a.match(k))a=a.replace(k,"/"),b.pop();else if("."===a||".."===a)a="";else{let c=a.match(l);if(c){let d=c[0];a=a.slice(d.length),b.push(d)}else throw Error("Unexpected dot segment condition")}return b.join("")},normalizeIPv4:e,normalizeIPv6:g,stringArrayToHexStripped:f}}),ab=D((a,b)=>{var c=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,d=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function e(a){return"boolean"==typeof a.secure?a.secure:"wss"===String(a.scheme).toLowerCase()}function f(a){return a.host||(a.error=a.error||"HTTP URIs must have a host."),a}function g(a){let b="https"===String(a.scheme).toLowerCase();return(a.port===(b?443:80)||""===a.port)&&(a.port=void 0),a.path||(a.path="/"),a}var h={scheme:"http",domainHost:!0,parse:f,serialize:g},i={scheme:"https",domainHost:h.domainHost,parse:f,serialize:g},j={scheme:"ws",domainHost:!0,parse:function(a){return a.secure=e(a),a.resourceName=(a.path||"/")+(a.query?"?"+a.query:""),a.path=void 0,a.query=void 0,a},serialize:function(a){if((a.port===(e(a)?443:80)||""===a.port)&&(a.port=void 0),"boolean"==typeof a.secure&&(a.scheme=a.secure?"wss":"ws",a.secure=void 0),a.resourceName){let[b,c]=a.resourceName.split("?");a.path=b&&"/"!==b?b:void 0,a.query=c,a.resourceName=void 0}return a.fragment=void 0,a}},k={scheme:"wss",domainHost:j.domainHost,parse:j.parse,serialize:j.serialize},l={http:h,https:i,ws:j,wss:k,urn:{scheme:"urn",parse:function(a,b){if(!a.path)return a.error="URN can not be parsed",a;let c=a.path.match(d);if(c){let d=b.scheme||a.scheme||"urn";a.nid=c[1].toLowerCase(),a.nss=c[2];let e=l[`${d}:${b.nid||a.nid}`];a.path=void 0,e&&(a=e.parse(a,b))}else a.error=a.error||"URN can not be parsed.";return a},serialize:function(a,b){let c=b.scheme||a.scheme||"urn",d=a.nid.toLowerCase(),e=l[`${c}:${b.nid||d}`];e&&(a=e.serialize(a,b));let f=a,g=a.nss;return f.path=`${d||b.nid}:${g}`,b.skipEscape=!0,f},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(a,b){return a.uuid=a.nss,a.nss=void 0,b.tolerant||a.uuid&&c.test(a.uuid)||(a.error=a.error||"UUID is not valid."),a},serialize:function(a){return a.nss=(a.uuid||"").toLowerCase(),a},skipNormalize:!0}};b.exports=l}),ac=D((a,b)=>{var{normalizeIPv6:c,normalizeIPv4:d,removeDotSegments:e,recomposeAuthority:f,normalizeComponentEncoding:g}=aa(),h=ab();function i(a,b,c,d){let f={};return d||(a=m(j(a,c),c),b=m(j(b,c),c)),!(c=c||{}).tolerant&&b.scheme?(f.scheme=b.scheme,f.userinfo=b.userinfo,f.host=b.host,f.port=b.port,f.path=e(b.path||""),f.query=b.query):(void 0!==b.userinfo||void 0!==b.host||void 0!==b.port?(f.userinfo=b.userinfo,f.host=b.host,f.port=b.port,f.path=e(b.path||""),f.query=b.query):(b.path?("/"===b.path.charAt(0)?f.path=e(b.path):(void 0===a.userinfo&&void 0===a.host&&void 0===a.port||a.path?a.path?f.path=a.path.slice(0,a.path.lastIndexOf("/")+1)+b.path:f.path=b.path:f.path="/"+b.path,f.path=e(f.path)),f.query=b.query):(f.path=a.path,void 0!==b.query?f.query=b.query:f.query=a.query),f.userinfo=a.userinfo,f.host=a.host,f.port=a.port),f.scheme=a.scheme),f.fragment=b.fragment,f}function j(a,b){let c={host:a.host,scheme:a.scheme,userinfo:a.userinfo,port:a.port,path:a.path,query:a.query,nid:a.nid,nss:a.nss,uuid:a.uuid,fragment:a.fragment,reference:a.reference,resourceName:a.resourceName,secure:a.secure,error:""},d=Object.assign({},b),g=[],i=h[(d.scheme||c.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(c,d),void 0!==c.path&&(d.skipEscape?c.path=unescape(c.path):(c.path=escape(c.path),void 0!==c.scheme&&(c.path=c.path.split("%3A").join(":")))),"suffix"!==d.reference&&c.scheme&&g.push(c.scheme,":");let j=f(c);if(void 0!==j&&("suffix"!==d.reference&&g.push("//"),g.push(j),c.path&&"/"!==c.path.charAt(0)&&g.push("/")),void 0!==c.path){let a=c.path;d.absolutePath||i&&i.absolutePath||(a=e(a)),void 0===j&&(a=a.replace(/^\/\//u,"/%2F")),g.push(a)}return void 0!==c.query&&g.push("?",c.query),void 0!==c.fragment&&g.push("#",c.fragment),g.join("")}var k=Array.from({length:127},(a,b)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(b))),l=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function m(a,b){let e=Object.assign({},b),f={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},g=-1!==a.indexOf("%"),i=!1;"suffix"===e.reference&&(a=(e.scheme?e.scheme+":":"")+"//"+a);let j=a.match(l);if(j){if(f.scheme=j[1],f.userinfo=j[3],f.host=j[4],f.port=parseInt(j[5],10),f.path=j[6]||"",f.query=j[7],f.fragment=j[8],isNaN(f.port)&&(f.port=j[5]),f.host){let a=d(f.host);if(!1===a.isIPV4){let b=c(a.host);f.host=b.host.toLowerCase(),i=b.isIPV6}else f.host=a.host,i=!0}void 0!==f.scheme||void 0!==f.userinfo||void 0!==f.host||void 0!==f.port||void 0!==f.query||f.path?void 0===f.scheme?f.reference="relative":void 0===f.fragment?f.reference="absolute":f.reference="uri":f.reference="same-document",e.reference&&"suffix"!==e.reference&&e.reference!==f.reference&&(f.error=f.error||"URI is not a "+e.reference+" reference.");let a=h[(e.scheme||f.scheme||"").toLowerCase()];if(!e.unicodeSupport&&(!a||!a.unicodeSupport)&&f.host&&(e.domainHost||a&&a.domainHost)&&!1===i&&function(a){let b=0;for(let c=0,d=a.length;c<d;++c)if((b=a.charCodeAt(c))>126||k[b])return!0;return!1}(f.host))try{f.host=URL.domainToASCII(f.host.toLowerCase())}catch(a){f.error=f.error||"Host's domain name can not be converted to ASCII: "+a}(!a||a&&!a.skipNormalize)&&(g&&void 0!==f.scheme&&(f.scheme=unescape(f.scheme)),g&&void 0!==f.host&&(f.host=unescape(f.host)),f.path&&(f.path=escape(unescape(f.path))),f.fragment&&(f.fragment=encodeURI(decodeURIComponent(f.fragment)))),a&&a.parse&&a.parse(f,e)}else f.error=f.error||"URI can not be parsed.";return f}var n={SCHEMES:h,normalize:function(a,b){return"string"==typeof a?a=j(m(a,b),b):"object"==typeof a&&(a=m(j(a,b),b)),a},resolve:function(a,b,c){let d=Object.assign({scheme:"null"},c);return j(i(m(a,d),m(b,d),d,!0),{...d,skipEscape:!0})},resolveComponents:i,equal:function(a,b,c){return"string"==typeof a?a=j(g(m(a=unescape(a),c),!0),{...c,skipEscape:!0}):"object"==typeof a&&(a=j(g(a,!0),{...c,skipEscape:!0})),"string"==typeof b?b=j(g(m(b=unescape(b),c),!0),{...c,skipEscape:!0}):"object"==typeof b&&(b=j(g(b,!0),{...c,skipEscape:!0})),a.toLowerCase()===b.toLowerCase()},serialize:j,parse:m};b.exports=n,b.exports.default=n,b.exports.fastUri=n}),ad=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=ac();b.code='require("ajv/dist/runtime/uri").default',a.default=b}),ae=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CodeGen=a.Name=a.nil=a.stringify=a.str=a._=a.KeywordCxt=void 0;var b=W();Object.defineProperty(a,"KeywordCxt",{enumerable:!0,get:function(){return b.KeywordCxt}});var c=H();Object.defineProperty(a,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(a,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(a,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(a,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(a,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(a,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var d=X(),e=Y(),f=M(),g=Z(),h=H(),i=V(),j=O(),k=I(),l=$(),m=ad(),n=(a,b)=>new RegExp(a,b);n.code="new RegExp";var o=["removeAdditional","useDefaults","coerceTypes"],p=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),q={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},r={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};class s{constructor(a={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,a=this.opts={...a,...function(a){var b,c,d,e,f,g,h,i,j,k,l,o,p,q,r,s,t,u,v,w,x,y,z,A,B;let C=a.strict,D=null==(b=a.code)?void 0:b.optimize,E=!0===D||void 0===D?1:D||0,F=null!=(d=null==(c=a.code)?void 0:c.regExp)?d:n,G=null!=(e=a.uriResolver)?e:m.default;return{strictSchema:null==(g=null!=(f=a.strictSchema)?f:C)||g,strictNumbers:null==(i=null!=(h=a.strictNumbers)?h:C)||i,strictTypes:null!=(k=null!=(j=a.strictTypes)?j:C)?k:"log",strictTuples:null!=(o=null!=(l=a.strictTuples)?l:C)?o:"log",strictRequired:null!=(q=null!=(p=a.strictRequired)?p:C)&&q,code:a.code?{...a.code,optimize:E,regExp:F}:{optimize:E,regExp:F},loopRequired:null!=(r=a.loopRequired)?r:200,loopEnum:null!=(s=a.loopEnum)?s:200,meta:null==(t=a.meta)||t,messages:null==(u=a.messages)||u,inlineRefs:null==(v=a.inlineRefs)||v,schemaId:null!=(w=a.schemaId)?w:"$id",addUsedSchema:null==(x=a.addUsedSchema)||x,validateSchema:null==(y=a.validateSchema)||y,validateFormats:null==(z=a.validateFormats)||z,unicodeRegExp:null==(A=a.unicodeRegExp)||A,int32range:null==(B=a.int32range)||B,uriResolver:G}}(a)};let{es5:b,lines:c}=this.opts.code;this.scope=new h.ValueScope({scope:{},prefixes:p,es5:b,lines:c}),this.logger=function(a){if(!1===a)return z;if(void 0===a)return console;if(a.log&&a.warn&&a.error)return a;throw Error("logger must implement log, warn and error methods")}(a.logger);let d=a.validateFormats;a.validateFormats=!1,this.RULES=(0,f.getRules)(),t.call(this,q,a,"NOT SUPPORTED"),t.call(this,r,a,"DEPRECATED","warn"),this._metaOpts=y.call(this),a.formats&&w.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),a.keywords&&x.call(this,a.keywords),"object"==typeof a.meta&&this.addMetaSchema(a.meta),v.call(this),a.validateFormats=d}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:a,meta:b,schemaId:c}=this.opts,d=l;"id"===c&&((d={...l}).id=d.$id,delete d.$id),b&&a&&this.addMetaSchema(d,d[c],!1)}defaultMeta(){let{meta:a,schemaId:b}=this.opts;return this.opts.defaultMeta="object"==typeof a?a[b]||a:void 0}validate(a,b){let c;if("string"==typeof a){if(!(c=this.getSchema(a)))throw Error(`no schema with key or ref "${a}"`)}else c=this.compile(a);let d=c(b);return"$async"in c||(this.errors=c.errors),d}compile(a,b){let c=this._addSchema(a,b);return c.validate||this._compileSchemaEnv(c)}compileAsync(a,b){if("function"!=typeof this.opts.loadSchema)throw Error("options.loadSchema should be a function");let{loadSchema:c}=this.opts;return d.call(this,a,b);async function d(a,b){await f.call(this,a.$schema);let c=this._addSchema(a,b);return c.validate||g.call(this,c)}async function f(a){a&&!this.getSchema(a)&&await d.call(this,{$ref:a},!0)}async function g(a){try{return this._compileSchemaEnv(a)}catch(b){if(!(b instanceof e.default))throw b;return h.call(this,b),await i.call(this,b.missingSchema),g.call(this,a)}}function h({missingSchema:a,missingRef:b}){if(this.refs[a])throw Error(`AnySchema ${a} is loaded but ${b} cannot be resolved`)}async function i(a){let c=await j.call(this,a);this.refs[a]||await f.call(this,c.$schema),this.refs[a]||this.addSchema(c,a,b)}async function j(a){let b=this._loading[a];if(b)return b;try{return await (this._loading[a]=c(a))}finally{delete this._loading[a]}}}addSchema(a,b,c,d=this.opts.validateSchema){let e;if(Array.isArray(a)){for(let b of a)this.addSchema(b,void 0,c,d);return this}if("object"==typeof a){let{schemaId:b}=this.opts;if(void 0!==(e=a[b])&&"string"!=typeof e)throw Error(`schema ${b} must be string`)}return b=(0,i.normalizeId)(b||e),this._checkUnique(b),this.schemas[b]=this._addSchema(a,c,b,d,!0),this}addMetaSchema(a,b,c=this.opts.validateSchema){return this.addSchema(a,b,!0,c),this}validateSchema(a,b){let c;if("boolean"==typeof a)return!0;if(void 0!==(c=a.$schema)&&"string"!=typeof c)throw Error("$schema must be a string");if(!(c=c||this.opts.defaultMeta||this.defaultMeta()))return this.logger.warn("meta-schema not available"),this.errors=null,!0;let d=this.validate(c,a);if(!d&&b){let a="schema is invalid: "+this.errorsText();if("log"===this.opts.validateSchema)this.logger.error(a);else throw Error(a)}return d}getSchema(a){let b;for(;"string"==typeof(b=u.call(this,a));)a=b;if(void 0===b){let{schemaId:c}=this.opts,d=new g.SchemaEnv({schema:{},schemaId:c});if(!(b=g.resolveSchema.call(this,d,a)))return;this.refs[a]=b}return b.validate||this._compileSchemaEnv(b)}removeSchema(a){if(a instanceof RegExp)return this._removeAllSchemas(this.schemas,a),this._removeAllSchemas(this.refs,a),this;switch(typeof a){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let b=u.call(this,a);return"object"==typeof b&&this._cache.delete(b.schema),delete this.schemas[a],delete this.refs[a],this}case"object":{this._cache.delete(a);let b=a[this.opts.schemaId];return b&&(b=(0,i.normalizeId)(b),delete this.schemas[b],delete this.refs[b]),this}default:throw Error("ajv.removeSchema: invalid parameter")}}addVocabulary(a){for(let b of a)this.addKeyword(b);return this}addKeyword(a,b){let c;if("string"==typeof a)c=a,"object"==typeof b&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),b.keyword=c);else if("object"==typeof a&&void 0===b){if(Array.isArray(c=(b=a).keyword)&&!c.length)throw Error("addKeywords: keyword must be string or non-empty array")}else throw Error("invalid addKeywords parameters");if(B.call(this,c,b),!b)return(0,k.eachItem)(c,a=>C.call(this,a)),this;E.call(this,b);let d={...b,type:(0,j.getJSONTypes)(b.type),schemaType:(0,j.getJSONTypes)(b.schemaType)};return(0,k.eachItem)(c,0===d.type.length?a=>C.call(this,a,d):a=>d.type.forEach(b=>C.call(this,a,d,b))),this}getKeyword(a){let b=this.RULES.all[a];return"object"==typeof b?b.definition:!!b}removeKeyword(a){let{RULES:b}=this;for(let c of(delete b.keywords[a],delete b.all[a],b.rules)){let b=c.rules.findIndex(b=>b.keyword===a);b>=0&&c.rules.splice(b,1)}return this}addFormat(a,b){return"string"==typeof b&&(b=new RegExp(b)),this.formats[a]=b,this}errorsText(a=this.errors,{separator:b=", ",dataVar:c="data"}={}){return a&&0!==a.length?a.map(a=>`${c}${a.instancePath} ${a.message}`).reduce((a,c)=>a+b+c):"No errors"}$dataMetaSchema(a,b){let c=this.RULES.all;for(let d of(a=JSON.parse(JSON.stringify(a)),b)){let b=d.split("/").slice(1),e=a;for(let a of b)e=e[a];for(let a in c){let b=c[a];if("object"!=typeof b)continue;let{$data:d}=b.definition,f=e[a];d&&f&&(e[a]=G(f))}}return a}_removeAllSchemas(a,b){for(let c in a){let d=a[c];(!b||b.test(c))&&("string"==typeof d?delete a[c]:d&&!d.meta&&(this._cache.delete(d.schema),delete a[c]))}}_addSchema(a,b,c,d=this.opts.validateSchema,e=this.opts.addUsedSchema){let f,{schemaId:h}=this.opts;if("object"==typeof a)f=a[h];else if(this.opts.jtd)throw Error("schema must be object");else if("boolean"!=typeof a)throw Error("schema must be object or boolean");let j=this._cache.get(a);if(void 0!==j)return j;c=(0,i.normalizeId)(f||c);let k=i.getSchemaRefs.call(this,a,c);return j=new g.SchemaEnv({schema:a,schemaId:h,meta:b,baseId:c,localRefs:k}),this._cache.set(j.schema,j),e&&!c.startsWith("#")&&(c&&this._checkUnique(c),this.refs[c]=j),d&&this.validateSchema(a,!0),j}_checkUnique(a){if(this.schemas[a]||this.refs[a])throw Error(`schema with key or id "${a}" already exists`)}_compileSchemaEnv(a){if(a.meta?this._compileMetaSchema(a):g.compileSchema.call(this,a),!a.validate)throw Error("ajv implementation error");return a.validate}_compileMetaSchema(a){let b=this.opts;this.opts=this._metaOpts;try{g.compileSchema.call(this,a)}finally{this.opts=b}}}function t(a,b,c,d="error"){for(let e in a)e in b&&this.logger[d](`${c}: option ${e}. ${a[e]}`)}function u(a){return a=(0,i.normalizeId)(a),this.schemas[a]||this.refs[a]}function v(){let a=this.opts.schemas;if(a)if(Array.isArray(a))this.addSchema(a);else for(let b in a)this.addSchema(a[b],b)}function w(){for(let a in this.opts.formats){let b=this.opts.formats[a];b&&this.addFormat(a,b)}}function x(a){if(Array.isArray(a))return void this.addVocabulary(a);for(let b in this.logger.warn("keywords option as map is deprecated, pass array"),a){let c=a[b];c.keyword||(c.keyword=b),this.addKeyword(c)}}function y(){let a={...this.opts};for(let b of o)delete a[b];return a}s.ValidationError=d.default,s.MissingRefError=e.default,a.default=s;var z={log(){},warn(){},error(){}},A=/^[a-z_$][a-z0-9_$:-]*$/i;function B(a,b){let{RULES:c}=this;if((0,k.eachItem)(a,a=>{if(c.keywords[a])throw Error(`Keyword ${a} is already defined`);if(!A.test(a))throw Error(`Keyword ${a} has invalid name`)}),b&&b.$data&&!("code"in b||"validate"in b))throw Error('$data keyword must have "code" or "validate" function')}function C(a,b,c){var d;let e=null==b?void 0:b.post;if(c&&e)throw Error('keyword with "post" flag cannot have "type"');let{RULES:f}=this,g=e?f.post:f.rules.find(({type:a})=>a===c);if(g||(g={type:c,rules:[]},f.rules.push(g)),f.keywords[a]=!0,!b)return;let h={keyword:a,definition:{...b,type:(0,j.getJSONTypes)(b.type),schemaType:(0,j.getJSONTypes)(b.schemaType)}};b.before?D.call(this,g,h,b.before):g.rules.push(h),f.all[a]=h,null==(d=b.implements)||d.forEach(a=>this.addKeyword(a))}function D(a,b,c){let d=a.rules.findIndex(a=>a.keyword===c);d>=0?a.rules.splice(d,0,b):(a.rules.push(b),this.logger.warn(`rule ${c} is not defined`))}function E(a){let{metaSchema:b}=a;void 0!==b&&(a.$data&&this.opts.$data&&(b=G(b)),a.validateSchema=this.compile(b,!0))}var F={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function G(a){return{anyOf:[a,F]}}}),af=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.default={keyword:"id",code(){throw Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}}}),ag=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.callRef=a.getValidate=void 0;var b=Y(),c=Q(),d=H(),e=J(),f=Z(),g=I();function h(a,b){let{gen:c}=a;return b.validate?c.scopeValue("validate",{ref:b.validate}):(0,d._)`${c.scopeValue("wrapper",{ref:b})}.validate`}function i(a,b,f,h){let{gen:i,it:j}=a,{allErrors:k,schemaEnv:l,opts:m}=j,n=m.passContext?e.default.this:d.nil;function o(a){let b=(0,d._)`${a}.errors`;i.assign(e.default.vErrors,(0,d._)`${e.default.vErrors} === null ? ${b} : ${e.default.vErrors}.concat(${b})`),i.assign(e.default.errors,(0,d._)`${e.default.vErrors}.length`)}function p(a){var b;if(!j.opts.unevaluated)return;let c=null==(b=null==f?void 0:f.validate)?void 0:b.evaluated;if(!0!==j.props)if(c&&!c.dynamicProps)void 0!==c.props&&(j.props=g.mergeEvaluated.props(i,c.props,j.props));else{let b=i.var("props",(0,d._)`${a}.evaluated.props`);j.props=g.mergeEvaluated.props(i,b,j.props,d.Name)}if(!0!==j.items)if(c&&!c.dynamicItems)void 0!==c.items&&(j.items=g.mergeEvaluated.items(i,c.items,j.items));else{let b=i.var("items",(0,d._)`${a}.evaluated.items`);j.items=g.mergeEvaluated.items(i,b,j.items,d.Name)}}h?function(){if(!l.$async)throw Error("async schema referenced by sync schema");let e=i.let("valid");i.try(()=>{i.code((0,d._)`await ${(0,c.callValidateCode)(a,b,n)}`),p(b),k||i.assign(e,!0)},a=>{i.if((0,d._)`!(${a} instanceof ${j.ValidationError})`,()=>i.throw(a)),o(a),k||i.assign(e,!1)}),a.ok(e)}():a.result((0,c.callValidateCode)(a,b,n),()=>p(b),()=>o(b))}a.getValidate=h,a.callRef=i,a.default={keyword:"$ref",schemaType:"string",code(a){let{gen:c,schema:e,it:g}=a,{baseId:j,schemaEnv:k,validateName:l,opts:m,self:n}=g,{root:o}=k;if(("#"===e||"#/"===e)&&j===o.baseId){if(k===o)return i(a,l,k,k.$async);let b=c.scopeValue("root",{ref:o});return i(a,(0,d._)`${b}.validate`,o,o.$async)}let p=f.resolveRef.call(n,o,j,e);if(void 0===p)throw new b.default(g.opts.uriResolver,j,e);return p instanceof f.SchemaEnv?function(b){let c=h(a,b);i(a,c,b,b.$async)}(p):function(b){let f=c.scopeValue("schema",!0===m.code.source?{ref:b,code:(0,d.stringify)(b)}:{ref:b}),g=c.name("valid"),h=a.subschema({schema:b,dataTypes:[],schemaPath:d.nil,topSchemaRef:f,errSchemaPath:e},g);a.mergeEvaluated(h),a.ok(g)}(p)}}}),ah=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=af(),c=ag();a.default=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",b.default,c.default]}),ai=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H(),c=b.operators,d={maximum:{okStr:"<=",ok:c.LTE,fail:c.GT},minimum:{okStr:">=",ok:c.GTE,fail:c.LT},exclusiveMaximum:{okStr:"<",ok:c.LT,fail:c.GTE},exclusiveMinimum:{okStr:">",ok:c.GT,fail:c.LTE}};a.default={keyword:Object.keys(d),type:"number",schemaType:"number",$data:!0,error:{message:({keyword:a,schemaCode:c})=>(0,b.str)`must be ${d[a].okStr} ${c}`,params:({keyword:a,schemaCode:c})=>(0,b._)`{comparison: ${d[a].okStr}, limit: ${c}}`},code(a){let{keyword:c,data:e,schemaCode:f}=a;a.fail$data((0,b._)`${e} ${d[c].fail} ${f} || isNaN(${e})`)}}}),aj=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H();a.default={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:a})=>(0,b.str)`must be multiple of ${a}`,params:({schemaCode:a})=>(0,b._)`{multipleOf: ${a}}`},code(a){let{gen:c,data:d,schemaCode:e,it:f}=a,g=f.opts.multipleOfPrecision,h=c.let("res"),i=g?(0,b._)`Math.abs(Math.round(${h}) - ${h}) > 1e-${g}`:(0,b._)`${h} !== parseInt(${h})`;a.fail$data((0,b._)`(${e} === 0 || (${h} = ${d}/${e}, ${i}))`)}}}),ak=D(a=>{function b(a){let b,c=a.length,d=0,e=0;for(;e<c;)d++,(b=a.charCodeAt(e++))>=55296&&b<=56319&&e<c&&(64512&(b=a.charCodeAt(e)))==56320&&e++;return d}Object.defineProperty(a,"__esModule",{value:!0}),a.default=b,b.code='require("ajv/dist/runtime/ucs2length").default'}),al=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H(),c=I(),d=ak();a.default={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:a,schemaCode:c})=>(0,b.str)`must NOT have ${"maxLength"===a?"more":"fewer"} than ${c} characters`,params:({schemaCode:a})=>(0,b._)`{limit: ${a}}`},code(a){let{keyword:e,data:f,schemaCode:g,it:h}=a,i="maxLength"===e?b.operators.GT:b.operators.LT,j=!1===h.opts.unicode?(0,b._)`${f}.length`:(0,b._)`${(0,c.useFunc)(a.gen,d.default)}(${f})`;a.fail$data((0,b._)`${j} ${i} ${g}`)}}}),am=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=Q(),c=H();a.default={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:a})=>(0,c.str)`must match pattern "${a}"`,params:({schemaCode:a})=>(0,c._)`{pattern: ${a}}`},code(a){let{data:d,$data:e,schema:f,schemaCode:g,it:h}=a,i=h.opts.unicodeRegExp?"u":"",j=e?(0,c._)`(new RegExp(${g}, ${i}))`:(0,b.usePattern)(a,f);a.fail$data((0,c._)`!${j}.test(${d})`)}}}),an=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H();a.default={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:a,schemaCode:c})=>(0,b.str)`must NOT have ${"maxProperties"===a?"more":"fewer"} than ${c} properties`,params:({schemaCode:a})=>(0,b._)`{limit: ${a}}`},code(a){let{keyword:c,data:d,schemaCode:e}=a,f="maxProperties"===c?b.operators.GT:b.operators.LT;a.fail$data((0,b._)`Object.keys(${d}).length ${f} ${e}`)}}}),ao=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=Q(),c=H(),d=I();a.default={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:a}})=>(0,c.str)`must have required property '${a}'`,params:({params:{missingProperty:a}})=>(0,c._)`{missingProperty: ${a}}`},code(a){let{gen:e,schema:f,schemaCode:g,data:h,$data:i,it:j}=a,{opts:k}=j;if(!i&&0===f.length)return;let l=f.length>=k.loopRequired;if(j.allErrors?function(){if(l||i)a.block$data(c.nil,m);else for(let c of f)(0,b.checkReportMissingProp)(a,c)}():function(){let d=e.let("missing");if(l||i){let f=e.let("valid",!0);a.block$data(f,()=>{var i,j;return i=d,j=f,void(a.setParams({missingProperty:i}),e.forOf(i,g,()=>{e.assign(j,(0,b.propertyInData)(e,h,i,k.ownProperties)),e.if((0,c.not)(j),()=>{a.error(),e.break()})},c.nil))}),a.ok(f)}else e.if((0,b.checkMissingProp)(a,f,d)),(0,b.reportMissingProp)(a,d),e.else()}(),k.strictRequired){let b=a.parentSchema.properties,{definedProperties:c}=a.it;for(let a of f)if((null==b?void 0:b[a])===void 0&&!c.has(a)){let b=j.schemaEnv.baseId+j.errSchemaPath,c=`required property "${a}" is not defined at "${b}" (strictRequired)`;(0,d.checkStrictMode)(j,c,j.opts.strictRequired)}}function m(){e.forOf("prop",g,c=>{a.setParams({missingProperty:c}),e.if((0,b.noPropertyInData)(e,h,c,k.ownProperties),()=>a.error())})}}}}),ap=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H();a.default={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:a,schemaCode:c})=>(0,b.str)`must NOT have ${"maxItems"===a?"more":"fewer"} than ${c} items`,params:({schemaCode:a})=>(0,b._)`{limit: ${a}}`},code(a){let{keyword:c,data:d,schemaCode:e}=a,f="maxItems"===c?b.operators.GT:b.operators.LT;a.fail$data((0,b._)`${d}.length ${f} ${e}`)}}}),aq=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=T();b.code='require("ajv/dist/runtime/equal").default',a.default=b}),ar=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=O(),c=H(),d=I(),e=aq();a.default={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:a,j:b}})=>(0,c.str)`must NOT have duplicate items (items ## ${b} and ${a} are identical)`,params:({params:{i:a,j:b}})=>(0,c._)`{i: ${a}, j: ${b}}`},code(a){let{gen:f,data:g,$data:h,schema:i,parentSchema:j,schemaCode:k,it:l}=a;if(!h&&!i)return;let m=f.let("valid"),n=j.items?(0,b.getSchemaTypes)(j.items):[];a.block$data(m,function(){let h=f.let("i",(0,c._)`${g}.length`),i=f.let("j");a.setParams({i:h,j:i}),f.assign(m,!0),f.if((0,c._)`${h} > 1`,()=>(n.length>0&&!n.some(a=>"object"===a||"array"===a)?function(d,e){let h=f.name("item"),i=(0,b.checkDataTypes)(n,h,l.opts.strictNumbers,b.DataType.Wrong),j=f.const("indices",(0,c._)`{}`);f.for((0,c._)`;${d}--;`,()=>{f.let(h,(0,c._)`${g}[${d}]`),f.if(i,(0,c._)`continue`),n.length>1&&f.if((0,c._)`typeof ${h} == "string"`,(0,c._)`${h} += "_"`),f.if((0,c._)`typeof ${j}[${h}] == "number"`,()=>{f.assign(e,(0,c._)`${j}[${h}]`),a.error(),f.assign(m,!1).break()}).code((0,c._)`${j}[${h}] = ${d}`)})}:function(b,h){let i=(0,d.useFunc)(f,e.default),j=f.name("outer");f.label(j).for((0,c._)`;${b}--;`,()=>f.for((0,c._)`${h} = ${b}; ${h}--;`,()=>f.if((0,c._)`${i}(${g}[${b}], ${g}[${h}])`,()=>{a.error(),f.assign(m,!1).break(j)})))})(h,i))},(0,c._)`${k} === false`),a.ok(m)}}}),as=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H(),c=I(),d=aq();a.default={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:a})=>(0,b._)`{allowedValue: ${a}}`},code(a){let{gen:e,data:f,$data:g,schemaCode:h,schema:i}=a;g||i&&"object"==typeof i?a.fail$data((0,b._)`!${(0,c.useFunc)(e,d.default)}(${f}, ${h})`):a.fail((0,b._)`${i} !== ${f}`)}}}),at=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H(),c=I(),d=aq();a.default={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:a})=>(0,b._)`{allowedValues: ${a}}`},code(a){let e,f,{gen:g,data:h,$data:i,schema:j,schemaCode:k,it:l}=a;if(!i&&0===j.length)throw Error("enum must have non-empty array");let m=j.length>=l.opts.loopEnum,n=()=>null!=e?e:e=(0,c.useFunc)(g,d.default);if(m||i)f=g.let("valid"),a.block$data(f,function(){g.assign(f,!1),g.forOf("v",k,a=>g.if((0,b._)`${n()}(${h}, ${a})`,()=>g.assign(f,!0).break()))});else{if(!Array.isArray(j))throw Error("ajv implementation error");let a=g.const("vSchema",k);f=(0,b.or)(...j.map((c,d)=>(function(a,c){let d=j[c];return"object"==typeof d&&null!==d?(0,b._)`${n()}(${h}, ${a}[${c}])`:(0,b._)`${h} === ${d}`})(a,d)))}a.pass(f)}}}),au=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=ai(),c=aj(),d=al(),e=am(),f=an(),g=ao(),h=ap(),i=ar(),j=as(),k=at();a.default=[b.default,c.default,d.default,e.default,f.default,g.default,h.default,i.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},j.default,k.default]}),av=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.validateAdditionalItems=void 0;var b=H(),c=I();function d(a,d){let{gen:e,schema:f,data:g,keyword:h,it:i}=a;i.items=!0;let j=e.const("len",(0,b._)`${g}.length`);if(!1===f)a.setParams({len:d.length}),a.pass((0,b._)`${j} <= ${d.length}`);else if("object"==typeof f&&!(0,c.alwaysValidSchema)(i,f)){let f=e.var("valid",(0,b._)`${j} <= ${d.length}`);e.if((0,b.not)(f),()=>{var g;return g=f,void e.forRange("i",d.length,j,d=>{a.subschema({keyword:h,dataProp:d,dataPropType:c.Type.Num},g),i.allErrors||e.if((0,b.not)(g),()=>e.break())})}),a.ok(f)}}a.validateAdditionalItems=d,a.default={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,b.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,b._)`{limit: ${a}}`},code(a){let{parentSchema:b,it:e}=a,{items:f}=b;if(!Array.isArray(f))return void(0,c.checkStrictMode)(e,'"additionalItems" is ignored when "items" is not an array of schemas');d(a,f)}}}),aw=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.validateTuple=void 0;var b=H(),c=I(),d=Q();function e(a,d,f=a.schema){let{gen:g,parentSchema:h,data:i,keyword:j,it:k}=a;(function(a){let{opts:b,errSchemaPath:e}=k,g=f.length,h=g===a.minItems&&(g===a.maxItems||!1===a[d]);if(b.strictTuples&&!h){let a=`"${j}" is ${g}-tuple, but minItems or maxItems/${d} are not specified or different at path "${e}"`;(0,c.checkStrictMode)(k,a,b.strictTuples)}})(h),k.opts.unevaluated&&f.length&&!0!==k.items&&(k.items=c.mergeEvaluated.items(g,f.length,k.items));let l=g.name("valid"),m=g.const("len",(0,b._)`${i}.length`);f.forEach((d,e)=>{(0,c.alwaysValidSchema)(k,d)||(g.if((0,b._)`${m} > ${e}`,()=>a.subschema({keyword:j,schemaProp:e,dataProp:e},l)),a.ok(l))})}a.validateTuple=e,a.default={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(a){let{schema:b,it:f}=a;if(Array.isArray(b))return e(a,"additionalItems",b);f.items=!0,(0,c.alwaysValidSchema)(f,b)||a.ok((0,d.validateArray)(a))}}}),ax=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=aw();a.default={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:a=>(0,b.validateTuple)(a,"items")}}),ay=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H(),c=I(),d=Q(),e=av();a.default={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:a}})=>(0,b.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,b._)`{limit: ${a}}`},code(a){let{schema:b,parentSchema:f,it:g}=a,{prefixItems:h}=f;g.items=!0,(0,c.alwaysValidSchema)(g,b)||(h?(0,e.validateAdditionalItems)(a,h):a.ok((0,d.validateArray)(a)))}}}),az=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H(),c=I();a.default={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:a,max:c}})=>void 0===c?(0,b.str)`must contain at least ${a} valid item(s)`:(0,b.str)`must contain at least ${a} and no more than ${c} valid item(s)`,params:({params:{min:a,max:c}})=>void 0===c?(0,b._)`{minContains: ${a}}`:(0,b._)`{minContains: ${a}, maxContains: ${c}}`},code(a){let d,e,{gen:f,schema:g,parentSchema:h,data:i,it:j}=a,{minContains:k,maxContains:l}=h;j.opts.next?(d=void 0===k?1:k,e=l):d=1;let m=f.const("len",(0,b._)`${i}.length`);if(a.setParams({min:d,max:e}),void 0===e&&0===d)return void(0,c.checkStrictMode)(j,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==e&&d>e){(0,c.checkStrictMode)(j,'"minContains" > "maxContains" is always invalid'),a.fail();return}if((0,c.alwaysValidSchema)(j,g)){let c=(0,b._)`${m} >= ${d}`;void 0!==e&&(c=(0,b._)`${c} && ${m} <= ${e}`),a.pass(c);return}j.items=!0;let n=f.name("valid");function o(){let a=f.name("_valid"),c=f.let("count",0);p(a,()=>f.if(a,()=>{var a;return a=c,void(f.code((0,b._)`${a}++`),void 0===e?f.if((0,b._)`${a} >= ${d}`,()=>f.assign(n,!0).break()):(f.if((0,b._)`${a} > ${e}`,()=>f.assign(n,!1).break()),1===d?f.assign(n,!0):f.if((0,b._)`${a} >= ${d}`,()=>f.assign(n,!0))))}))}function p(b,d){f.forRange("i",0,m,e=>{a.subschema({keyword:"contains",dataProp:e,dataPropType:c.Type.Num,compositeRule:!0},b),d()})}void 0===e&&1===d?p(n,()=>f.if(n,()=>f.break())):0===d?(f.let(n,!0),void 0!==e&&f.if((0,b._)`${i}.length > 0`,o)):(f.let(n,!1),o()),a.result(n,()=>a.reset())}}}),aA=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.validateSchemaDeps=a.validatePropertyDeps=a.error=void 0;var b=H(),c=I(),d=Q();a.error={message:({params:{property:a,depsCount:c,deps:d}})=>(0,b.str)`must have ${1===c?"property":"properties"} ${d} when property ${a} is present`,params:({params:{property:a,depsCount:c,deps:d,missingProperty:e}})=>(0,b._)`{property: ${a},
    missingProperty: ${e},
    depsCount: ${c},
    deps: ${d}}`};var e={keyword:"dependencies",type:"object",schemaType:"object",error:a.error,code(a){let[b,c]=function({schema:a}){let b={},c={};for(let d in a)"__proto__"!==d&&((Array.isArray(a[d])?b:c)[d]=a[d]);return[b,c]}(a);f(a,b),g(a,c)}};function f(a,c=a.schema){let{gen:e,data:g,it:h}=a;if(0===Object.keys(c).length)return;let i=e.let("missing");for(let f in c){let j=c[f];if(0===j.length)continue;let k=(0,d.propertyInData)(e,g,f,h.opts.ownProperties);a.setParams({property:f,depsCount:j.length,deps:j.join(", ")}),h.allErrors?e.if(k,()=>{for(let b of j)(0,d.checkReportMissingProp)(a,b)}):(e.if((0,b._)`${k} && (${(0,d.checkMissingProp)(a,j,i)})`),(0,d.reportMissingProp)(a,i),e.else())}}function g(a,b=a.schema){let{gen:e,data:f,keyword:h,it:i}=a,j=e.name("valid");for(let g in b)(0,c.alwaysValidSchema)(i,b[g])||(e.if((0,d.propertyInData)(e,f,g,i.opts.ownProperties),()=>{let b=a.subschema({keyword:h,schemaProp:g},j);a.mergeValidEvaluated(b,j)},()=>e.var(j,!0)),a.ok(j))}a.validatePropertyDeps=f,a.validateSchemaDeps=g,a.default=e}),aB=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H(),c=I();a.default={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:a})=>(0,b._)`{propertyName: ${a.propertyName}}`},code(a){let{gen:d,schema:e,data:f,it:g}=a;if((0,c.alwaysValidSchema)(g,e))return;let h=d.name("valid");d.forIn("key",f,c=>{a.setParams({propertyName:c}),a.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},h),d.if((0,b.not)(h),()=>{a.error(!0),g.allErrors||d.break()})}),a.ok(h)}}}),aC=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=Q(),c=H(),d=J(),e=I();a.default={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:a})=>(0,c._)`{additionalProperty: ${a.additionalProperty}}`},code(a){let{gen:f,schema:g,parentSchema:h,data:i,errsCount:j,it:k}=a;if(!j)throw Error("ajv implementation error");let{allErrors:l,opts:m}=k;if(k.props=!0,"all"!==m.removeAdditional&&(0,e.alwaysValidSchema)(k,g))return;let n=(0,b.allSchemaProperties)(h.properties),o=(0,b.allSchemaProperties)(h.patternProperties);function p(a){f.code((0,c._)`delete ${i}[${a}]`)}function q(b){if("all"===m.removeAdditional||m.removeAdditional&&!1===g)return void p(b);if(!1===g){a.setParams({additionalProperty:b}),a.error(),l||f.break();return}if("object"==typeof g&&!(0,e.alwaysValidSchema)(k,g)){let d=f.name("valid");"failing"===m.removeAdditional?(r(b,d,!1),f.if((0,c.not)(d),()=>{a.reset(),p(b)})):(r(b,d),l||f.if((0,c.not)(d),()=>f.break()))}}function r(b,c,d){let f={keyword:"additionalProperties",dataProp:b,dataPropType:e.Type.Str};!1===d&&Object.assign(f,{compositeRule:!0,createErrors:!1,allErrors:!1}),a.subschema(f,c)}f.forIn("key",i,d=>{n.length||o.length?f.if(function(d){let g;if(n.length>8){let a=(0,e.schemaRefOrVal)(k,h.properties,"properties");g=(0,b.isOwnProperty)(f,a,d)}else g=n.length?(0,c.or)(...n.map(a=>(0,c._)`${d} === ${a}`)):c.nil;return o.length&&(g=(0,c.or)(g,...o.map(e=>(0,c._)`${(0,b.usePattern)(a,e)}.test(${d})`))),(0,c.not)(g)}(d),()=>q(d)):q(d)}),a.ok((0,c._)`${j} === ${d.default.errors}`)}}}),aD=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=W(),c=Q(),d=I(),e=aC();a.default={keyword:"properties",type:"object",schemaType:"object",code(a){let{gen:f,schema:g,parentSchema:h,data:i,it:j}=a;"all"===j.opts.removeAdditional&&void 0===h.additionalProperties&&e.default.code(new b.KeywordCxt(j,e.default,"additionalProperties"));let k=(0,c.allSchemaProperties)(g);for(let a of k)j.definedProperties.add(a);j.opts.unevaluated&&k.length&&!0!==j.props&&(j.props=d.mergeEvaluated.props(f,(0,d.toHash)(k),j.props));let l=k.filter(a=>!(0,d.alwaysValidSchema)(j,g[a]));if(0===l.length)return;let m=f.name("valid");for(let b of l){var n;(n=b,j.opts.useDefaults&&!j.compositeRule&&void 0!==g[n].default)?o(b):(f.if((0,c.propertyInData)(f,i,b,j.opts.ownProperties)),o(b),j.allErrors||f.else().var(m,!0),f.endIf()),a.it.definedProperties.add(b),a.ok(m)}function o(b){a.subschema({keyword:"properties",schemaProp:b,dataProp:b},m)}}}}),aE=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=Q(),c=H(),d=I(),e=I();a.default={keyword:"patternProperties",type:"object",schemaType:"object",code(a){let{gen:f,schema:g,data:h,parentSchema:i,it:j}=a,{opts:k}=j,l=(0,b.allSchemaProperties)(g),m=l.filter(a=>(0,d.alwaysValidSchema)(j,g[a]));if(0===l.length||m.length===l.length&&(!j.opts.unevaluated||!0===j.props))return;let n=k.strictSchema&&!k.allowMatchingProperties&&i.properties,o=f.name("valid");!0===j.props||j.props instanceof c.Name||(j.props=(0,e.evaluatedPropsToName)(f,j.props));let{props:p}=j;for(let a of l)n&&function(a){for(let b in n)new RegExp(a).test(b)&&(0,d.checkStrictMode)(j,`property ${b} matches pattern ${a} (use allowMatchingProperties)`)}(a),j.allErrors?q(a):(f.var(o,!0),q(a),f.if(o));function q(d){f.forIn("key",h,g=>{f.if((0,c._)`${(0,b.usePattern)(a,d)}.test(${g})`,()=>{let b=m.includes(d);b||a.subschema({keyword:"patternProperties",schemaProp:d,dataProp:g,dataPropType:e.Type.Str},o),j.opts.unevaluated&&!0!==p?f.assign((0,c._)`${p}[${g}]`,!0):b||j.allErrors||f.if((0,c.not)(o),()=>f.break())})})}}}}),aF=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=I();a.default={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(a){let{gen:c,schema:d,it:e}=a;if((0,b.alwaysValidSchema)(e,d))return void a.fail();let f=c.name("valid");a.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},f),a.failResult(f,()=>a.reset(),()=>a.error())},error:{message:"must NOT be valid"}}}),aG=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.default={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Q().validateUnion,error:{message:"must match a schema in anyOf"}}}),aH=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H(),c=I();a.default={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:a})=>(0,b._)`{passingSchemas: ${a.passing}}`},code(a){let{gen:d,schema:e,parentSchema:f,it:g}=a;if(!Array.isArray(e))throw Error("ajv implementation error");if(g.opts.discriminator&&f.discriminator)return;let h=d.let("valid",!1),i=d.let("passing",null),j=d.name("_valid");a.setParams({passing:i}),d.block(function(){e.forEach((e,f)=>{let k;(0,c.alwaysValidSchema)(g,e)?d.var(j,!0):k=a.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},j),f>0&&d.if((0,b._)`${j} && ${h}`).assign(h,!1).assign(i,(0,b._)`[${i}, ${f}]`).else(),d.if(j,()=>{d.assign(h,!0),d.assign(i,f),k&&a.mergeEvaluated(k,b.Name)})})}),a.result(h,()=>a.reset(),()=>a.error(!0))}}}),aI=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=I();a.default={keyword:"allOf",schemaType:"array",code(a){let{gen:c,schema:d,it:e}=a;if(!Array.isArray(d))throw Error("ajv implementation error");let f=c.name("valid");d.forEach((c,d)=>{if((0,b.alwaysValidSchema)(e,c))return;let g=a.subschema({keyword:"allOf",schemaProp:d},f);a.ok(f),a.mergeEvaluated(g)})}}}),aJ=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H(),c=I();function d(a,b){let d=a.schema[b];return void 0!==d&&!(0,c.alwaysValidSchema)(a,d)}a.default={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:a})=>(0,b.str)`must match "${a.ifClause}" schema`,params:({params:a})=>(0,b._)`{failingKeyword: ${a.ifClause}}`},code(a){let{gen:e,parentSchema:f,it:g}=a;void 0===f.then&&void 0===f.else&&(0,c.checkStrictMode)(g,'"if" without "then" and "else" is ignored');let h=d(g,"then"),i=d(g,"else");if(!h&&!i)return;let j=e.let("valid",!0),k=e.name("_valid");if(function(){let b=a.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},k);a.mergeEvaluated(b)}(),a.reset(),h&&i){let b=e.let("ifClause");a.setParams({ifClause:b}),e.if(k,l("then",b),l("else",b))}else h?e.if(k,l("then")):e.if((0,b.not)(k),l("else"));function l(c,d){return()=>{let f=a.subschema({keyword:c},k);e.assign(j,k),a.mergeValidEvaluated(f,j),d?e.assign(d,(0,b._)`${c}`):a.setParams({ifClause:c})}}a.pass(j,()=>a.error(!0))}}}),aK=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=I();a.default={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:a,parentSchema:c,it:d}){void 0===c.if&&(0,b.checkStrictMode)(d,`"${a}" without "if" is ignored`)}}}),aL=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=av(),c=ax(),d=aw(),e=ay(),f=az(),g=aA(),h=aB(),i=aC(),j=aD(),k=aE(),l=aF(),m=aG(),n=aH(),o=aI(),p=aJ(),q=aK();a.default=function(a=!1){let r=[l.default,m.default,n.default,o.default,p.default,q.default,h.default,i.default,g.default,j.default,k.default];return a?r.push(c.default,e.default):r.push(b.default,d.default),r.push(f.default),r}}),aM=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H();a.default={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:a})=>(0,b.str)`must match format "${a}"`,params:({schemaCode:a})=>(0,b._)`{format: ${a}}`},code(a,c){let{gen:d,data:e,$data:f,schema:g,schemaCode:h,it:i}=a,{opts:j,errSchemaPath:k,schemaEnv:l,self:m}=i;j.validateFormats&&(f?function(){let f=d.scopeValue("formats",{ref:m.formats,code:j.code.formats}),g=d.const("fDef",(0,b._)`${f}[${h}]`),i=d.let("fType"),k=d.let("format");d.if((0,b._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>d.assign(i,(0,b._)`${g}.type || "string"`).assign(k,(0,b._)`${g}.validate`),()=>d.assign(i,(0,b._)`"string"`).assign(k,g)),a.fail$data((0,b.or)(!1===j.strictSchema?b.nil:(0,b._)`${h} && !${k}`,function(){let a=l.$async?(0,b._)`(${g}.async ? await ${k}(${e}) : ${k}(${e}))`:(0,b._)`${k}(${e})`,d=(0,b._)`(typeof ${k} == "function" ? ${a} : ${k}.test(${e}))`;return(0,b._)`${k} && ${k} !== true && ${i} === ${c} && !${d}`}()))}():function(){let f=m.formats[g];if(!f){if(!1===j.strictSchema)return m.logger.warn(h());throw Error(h());function h(){return`unknown format "${g}" ignored in schema at path "${k}"`}}if(!0===f)return;let[i,n,o]=function(a){let c=a instanceof RegExp?(0,b.regexpCode)(a):j.code.formats?(0,b._)`${j.code.formats}${(0,b.getProperty)(g)}`:void 0,e=d.scopeValue("formats",{key:g,ref:a,code:c});return"object"!=typeof a||a instanceof RegExp?["string",a,e]:[a.type||"string",a.validate,(0,b._)`${e}.validate`]}(f);i===c&&a.pass(function(){if("object"==typeof f&&!(f instanceof RegExp)&&f.async){if(!l.$async)throw Error("async format in sync schema");return(0,b._)`await ${o}(${e})`}return"function"==typeof n?(0,b._)`${o}(${e})`:(0,b._)`${o}.test(${e})`}())}())}}}),aN=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.default=[aM().default]}),aO=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contentVocabulary=a.metadataVocabulary=void 0,a.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],a.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]}),aP=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=ah(),c=au(),d=aL(),e=aN(),f=aO();a.default=[b.default,c.default,(0,d.default)(),e.default,f.metadataVocabulary,f.contentVocabulary]}),aQ=D(a=>{var b;Object.defineProperty(a,"__esModule",{value:!0}),a.DiscrError=void 0,function(a){a.Tag="tag",a.Mapping="mapping"}(b||(a.DiscrError=b={}))}),aR=D(a=>{Object.defineProperty(a,"__esModule",{value:!0});var b=H(),c=aQ(),d=Z(),e=Y(),f=I();a.default={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:b}})=>a===c.DiscrError.Tag?`tag "${b}" must be string`:`value of tag "${b}" must be in oneOf`,params:({params:{discrError:a,tag:c,tagName:d}})=>(0,b._)`{error: ${a}, tag: ${d}, tagValue: ${c}}`},code(a){let{gen:g,data:h,schema:i,parentSchema:j,it:k}=a,{oneOf:l}=j;if(!k.opts.discriminator)throw Error("discriminator: requires discriminator option");let m=i.propertyName;if("string"!=typeof m)throw Error("discriminator: requires propertyName");if(i.mapping)throw Error("discriminator: mapping is not supported");if(!l)throw Error("discriminator: requires oneOf keyword");let n=g.let("valid",!1),o=g.const("tag",(0,b._)`${h}${(0,b.getProperty)(m)}`);g.if((0,b._)`typeof ${o} == "string"`,()=>(function(){let h=function(){var a;let b={},c=h(j),g=!0;for(let b=0;b<l.length;b++){let j=l[b];if((null==j?void 0:j.$ref)&&!(0,f.schemaHasRulesButRef)(j,k.self.RULES)){let a=j.$ref;if((j=d.resolveRef.call(k.self,k.schemaEnv.root,k.baseId,a))instanceof d.SchemaEnv&&(j=j.schema),void 0===j)throw new e.default(k.opts.uriResolver,k.baseId,a)}let n=null==(a=null==j?void 0:j.properties)?void 0:a[m];if("object"!=typeof n)throw Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${m}"`);g=g&&(c||h(j)),function(a,b){if(a.const)i(a.const,b);else if(a.enum)for(let c of a.enum)i(c,b);else throw Error(`discriminator: "properties/${m}" must have "const" or "enum"`)}(n,b)}if(!g)throw Error(`discriminator: "${m}" must be required`);return b;function h({required:a}){return Array.isArray(a)&&a.includes(m)}function i(a,c){if("string"!=typeof a||a in b)throw Error(`discriminator: "${m}" values must be unique strings`);b[a]=c}}();for(let c in g.if(!1),h)g.elseIf((0,b._)`${o} === ${c}`),g.assign(n,function(c){let d=g.name("valid"),e=a.subschema({keyword:"oneOf",schemaProp:c},d);return a.mergeEvaluated(e,b.Name),d}(h[c]));g.else(),a.error(!1,{discrError:c.DiscrError.Mapping,tag:o,tagName:m}),g.endIf()})(),()=>a.error(!1,{discrError:c.DiscrError.Tag,tag:o,tagName:m})),a.ok(n)}}}),aS=D((a,b)=>{b.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}),aT=D((a,b)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MissingRefError=a.ValidationError=a.CodeGen=a.Name=a.nil=a.stringify=a.str=a._=a.KeywordCxt=a.Ajv=void 0;var c=ae(),d=aP(),e=aR(),f=aS(),g=["/properties"],h="http://json-schema.org/draft-07/schema";class i extends c.default{_addVocabularies(){super._addVocabularies(),d.default.forEach(a=>this.addVocabulary(a)),this.opts.discriminator&&this.addKeyword(e.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let a=this.opts.$data?this.$dataMetaSchema(f,g):f;this.addMetaSchema(a,h,!1),this.refs["http://json-schema.org/schema"]=h}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(h)?h:void 0)}}a.Ajv=i,b.exports=a=i,b.exports.Ajv=i,Object.defineProperty(a,"__esModule",{value:!0}),a.default=i;var j=W();Object.defineProperty(a,"KeywordCxt",{enumerable:!0,get:function(){return j.KeywordCxt}});var k=H();Object.defineProperty(a,"_",{enumerable:!0,get:function(){return k._}}),Object.defineProperty(a,"str",{enumerable:!0,get:function(){return k.str}}),Object.defineProperty(a,"stringify",{enumerable:!0,get:function(){return k.stringify}}),Object.defineProperty(a,"nil",{enumerable:!0,get:function(){return k.nil}}),Object.defineProperty(a,"Name",{enumerable:!0,get:function(){return k.Name}}),Object.defineProperty(a,"CodeGen",{enumerable:!0,get:function(){return k.CodeGen}});var l=X();Object.defineProperty(a,"ValidationError",{enumerable:!0,get:function(){return l.default}});var m=Y();Object.defineProperty(a,"MissingRefError",{enumerable:!0,get:function(){return m.default}})}),aU=D(a=>{function b(a,b){return{validate:a,compare:b}}Object.defineProperty(a,"__esModule",{value:!0}),a.formatNames=a.fastFormats=a.fullFormats=void 0,a.fullFormats={date:b(e,f),time:b(h(!0),i),"date-time":b(l(!0),m),"iso-time":b(h(),j),"iso-date-time":b(l(),n),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(a){return o.test(a)&&p.test(a)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(a){if(u.test(a))return!1;try{return new RegExp(a),!0}catch(a){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(a){return q.lastIndex=0,q.test(a)},int32:{type:"number",validate:function(a){return Number.isInteger(a)&&a<=s&&a>=r}},int64:{type:"number",validate:function(a){return Number.isInteger(a)}},float:{type:"number",validate:t},double:{type:"number",validate:t},password:!0,binary:!0},a.fastFormats={...a.fullFormats,date:b(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,f),time:b(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,i),"date-time":b(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,m),"iso-time":b(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,j),"iso-date-time":b(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,n),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},a.formatNames=Object.keys(a.fullFormats);var c=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,d=[0,31,28,31,30,31,30,31,31,30,31,30,31];function e(a){var b;let e=c.exec(a);if(!e)return!1;let f=+e[1],g=+e[2],h=+e[3];return g>=1&&g<=12&&h>=1&&h<=(2===g&&(b=f)%4==0&&(b%100!=0||b%400==0)?29:d[g])}function f(a,b){if(a&&b)return a>b?1:a<b?-1:0}var g=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function h(a){return function(b){let c=g.exec(b);if(!c)return!1;let d=+c[1],e=+c[2],f=+c[3],h=c[4],i="-"===c[5]?-1:1,j=+(c[6]||0),k=+(c[7]||0);if(j>23||k>59||a&&!h)return!1;if(d<=23&&e<=59&&f<60)return!0;let l=e-k*i,m=d-j*i-(l<0);return(23===m||-1===m)&&(59===l||-1===l)&&f<61}}function i(a,b){if(!(a&&b))return;let c=new Date("2020-01-01T"+a).valueOf(),d=new Date("2020-01-01T"+b).valueOf();if(c&&d)return c-d}function j(a,b){if(!(a&&b))return;let c=g.exec(a),d=g.exec(b);if(c&&d)return(a=c[1]+c[2]+c[3])>(b=d[1]+d[2]+d[3])?1:a<b?-1:0}var k=/t|\s/i;function l(a){let b=h(a);return function(a){let c=a.split(k);return 2===c.length&&e(c[0])&&b(c[1])}}function m(a,b){if(!(a&&b))return;let c=new Date(a).valueOf(),d=new Date(b).valueOf();if(c&&d)return c-d}function n(a,b){if(!(a&&b))return;let[c,d]=a.split(k),[e,g]=b.split(k),h=f(c,e);if(void 0!==h)return h||i(d,g)}var o=/\/|:/,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,q=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,r=-0x80000000,s=0x80000000-1;function t(){return!0}var u=/[^\\]\\Z/}),aV=D(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.formatLimitDefinition=void 0;var b=aT(),c=H(),d=c.operators,e={formatMaximum:{okStr:"<=",ok:d.LTE,fail:d.GT},formatMinimum:{okStr:">=",ok:d.GTE,fail:d.LT},formatExclusiveMaximum:{okStr:"<",ok:d.LT,fail:d.GTE},formatExclusiveMinimum:{okStr:">",ok:d.GT,fail:d.LTE}};a.formatLimitDefinition={keyword:Object.keys(e),type:"string",schemaType:"string",$data:!0,error:{message:({keyword:a,schemaCode:b})=>(0,c.str)`should be ${e[a].okStr} ${b}`,params:({keyword:a,schemaCode:b})=>(0,c._)`{comparison: ${e[a].okStr}, limit: ${b}}`},code(a){let{gen:d,data:f,schemaCode:g,keyword:h,it:i}=a,{opts:j,self:k}=i;if(!j.validateFormats)return;let l=new b.KeywordCxt(i,k.RULES.all.format.definition,"format");function m(a){return(0,c._)`${a}.compare(${f}, ${g}) ${e[h].fail} 0`}l.$data?function(){let b=d.scopeValue("formats",{ref:k.formats,code:j.code.formats}),e=d.const("fmt",(0,c._)`${b}[${l.schemaCode}]`);a.fail$data((0,c.or)((0,c._)`typeof ${e} != "object"`,(0,c._)`${e} instanceof RegExp`,(0,c._)`typeof ${e}.compare != "function"`,m(e)))}():function(){let b=l.schema,e=k.formats[b];if(!e||!0===e)return;if("object"!=typeof e||e instanceof RegExp||"function"!=typeof e.compare)throw Error(`"${h}": format "${b}" does not define "compare" function`);let f=d.scopeValue("formats",{key:b,ref:e,code:j.code.formats?(0,c._)`${j.code.formats}${(0,c.getProperty)(b)}`:void 0});a.fail$data(m(f))}()},dependencies:["format"]},a.default=b=>(b.addKeyword(a.formatLimitDefinition),b)}),aW=D((a,b)=>{Object.defineProperty(a,"__esModule",{value:!0});var c=aU(),d=aV(),e=H(),f=new e.Name("fullFormats"),g=new e.Name("fastFormats"),h=(a,b={keywords:!0})=>{if(Array.isArray(b))return i(a,b,c.fullFormats,f),a;let[e,h]="fast"===b.mode?[c.fastFormats,g]:[c.fullFormats,f];return i(a,b.formats||c.formatNames,e,h),b.keywords&&(0,d.default)(a),a};function i(a,b,c,d){var f;for(let g of(null!=(f=a.opts.code).formats||(f.formats=(0,e._)`require("ajv-formats/dist/formats").${d}`),b))a.addFormat(g,c[g])}h.get=(a,b="full")=>{let d=("fast"===b?c.fastFormats:c.fullFormats)[a];if(!d)throw Error(`Unknown format "${a}"`);return d},b.exports=a=h,Object.defineProperty(a,"__esModule",{value:!0}),a.default=h}),aX="object"==typeof global&&global&&global.Object===Object&&global,aY="object"==typeof self&&self&&self.Object===Object&&self,aZ=aX||aY||Function("return this")(),a$=aZ.Symbol,a_=Object.prototype,a0=a_.hasOwnProperty,a1=a_.toString,a2=a$?a$.toStringTag:void 0,a3=function(a){var b=a0.call(a,a2),c=a[a2];try{a[a2]=void 0;var d=!0}catch(a){}var e=a1.call(a);return d&&(b?a[a2]=c:delete a[a2]),e},a4=Object.prototype.toString,a5=a$?a$.toStringTag:void 0,a6=function(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":a5&&a5 in Object(a)?a3(a):a4.call(a)},a7=function(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)},a8=function(a){if(!a7(a))return!1;var b=a6(a);return"[object Function]"==b||"[object GeneratorFunction]"==b||"[object AsyncFunction]"==b||"[object Proxy]"==b},a9=aZ["__core-js_shared__"],ba=function(){var a=/[^.]+$/.exec(a9&&a9.keys&&a9.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),bb=Function.prototype.toString,bc=function(a){if(null!=a){try{return bb.call(a)}catch(a){}try{return a+""}catch(a){}}return""},bd=/^\[object .+?Constructor\]$/,be=Object.prototype,bf=Function.prototype.toString,bg=be.hasOwnProperty,bh=RegExp("^"+bf.call(bg).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bi=function(a){return!!a7(a)&&(!ba||!(ba in a))&&(a8(a)?bh:bd).test(bc(a))},bj=function(a,b){var c=null==a?void 0:a[b];return bi(c)?c:void 0},bk=bj(Object,"create"),bl=Object.prototype.hasOwnProperty,bm=Object.prototype.hasOwnProperty;function bn(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}bn.prototype.clear=function(){this.__data__=bk?bk(null):{},this.size=0},bn.prototype.delete=function(a){var b=this.has(a)&&delete this.__data__[a];return this.size-=!!b,b},bn.prototype.get=function(a){var b=this.__data__;if(bk){var c=b[a];return"__lodash_hash_undefined__"===c?void 0:c}return bl.call(b,a)?b[a]:void 0},bn.prototype.has=function(a){var b=this.__data__;return bk?void 0!==b[a]:bm.call(b,a)},bn.prototype.set=function(a,b){var c=this.__data__;return this.size+=+!this.has(a),c[a]=bk&&void 0===b?"__lodash_hash_undefined__":b,this};var bo=function(a,b){for(var c,d=a.length;d--;)if((c=a[d][0])===b||c!=c&&b!=b)return d;return -1},bp=Array.prototype.splice;function bq(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}bq.prototype.clear=function(){this.__data__=[],this.size=0},bq.prototype.delete=function(a){var b=this.__data__,c=bo(b,a);return!(c<0)&&(c==b.length-1?b.pop():bp.call(b,c,1),--this.size,!0)},bq.prototype.get=function(a){var b=this.__data__,c=bo(b,a);return c<0?void 0:b[c][1]},bq.prototype.has=function(a){return bo(this.__data__,a)>-1},bq.prototype.set=function(a,b){var c=this.__data__,d=bo(c,a);return d<0?(++this.size,c.push([a,b])):c[d][1]=b,this};var br=bj(aZ,"Map"),bs=function(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a},bt=function(a,b){var c=a.__data__;return bs(b)?c["string"==typeof b?"string":"hash"]:c.map};function bu(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function bv(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw TypeError("Expected a function");var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g)||f,g};return c.cache=new(bv.Cache||bu),c}bu.prototype.clear=function(){this.size=0,this.__data__={hash:new bn,map:new(br||bq),string:new bn}},bu.prototype.delete=function(a){var b=bt(this,a).delete(a);return this.size-=!!b,b},bu.prototype.get=function(a){return bt(this,a).get(a)},bu.prototype.has=function(a){return bt(this,a).has(a)},bu.prototype.set=function(a,b){var c=bt(this,a),d=c.size;return c.set(a,b),this.size+=+(c.size!=d),this},bv.Cache=bu;var bw=bv(a=>{if(!a||""===a.trim())return null;let b=a.split(",").map(a=>a.trim()).filter(Boolean);if(0===b.length)return null;let c=b.some(a=>a.startsWith("!")),d=b.some(a=>!a.startsWith("!"));if(c&&d)return null;let e=b.map(a=>a.replace(/^!/,"").toLowerCase());return{include:c?[]:e,exclude:c?e:[],isExclusive:c}});function bx(){return process.env.CLAUDE_CONFIG_DIR??(0,o.join)((0,u.homedir)(),".claude")}function by(a){return!!a&&("boolean"==typeof a?a:["1","true","yes","on"].includes(a.toLowerCase().trim()))}function bz(a){return{name:a,default:3e4,validate:a=>{if(!a)return{effective:3e4,status:"valid"};let b=parseInt(a,10);return isNaN(b)||b<=0?{effective:3e4,status:"invalid",message:`Invalid value "${a}" (using default: 30000)`}:b>15e4?{effective:15e4,status:"capped",message:`Capped from ${b} to 150000`}:{effective:b,status:"valid"}}}}var bA=bz("BASH_MAX_OUTPUT_LENGTH");bz("TASK_MAX_OUTPUT_LENGTH");var bB={name:"CLAUDE_CODE_MAX_OUTPUT_TOKENS",default:32e3,validate:a=>{if(!a)return{effective:32e3,status:"valid"};let b=parseInt(a,10);return isNaN(b)||b<=0?{effective:32e3,status:"invalid",message:`Invalid value "${a}" (using default: 32000)`}:b>64e3?{effective:64e3,status:"capped",message:`Capped from ${b} to 64000`}:{effective:b,status:"valid"}}},bC=function(){let a="";return"undefined"!=typeof process&&"function"==typeof process.cwd&&(a=(0,s.realpathSync)((0,v.cwd)())),{originalCwd:a,projectRoot:a,totalCostUSD:0,totalAPIDuration:0,totalAPIDurationWithoutRetries:0,totalToolDuration:0,startTime:Date.now(),lastInteractionTime:Date.now(),totalLinesAdded:0,totalLinesRemoved:0,hasUnknownModelCost:!1,cwd:a,modelUsage:{},mainLoopModelOverride:void 0,initialMainLoopModel:null,modelStrings:null,isInteractive:!1,clientType:"cli",sessionIngressToken:void 0,oauthTokenFromFd:void 0,apiKeyFromFd:void 0,flagSettingsPath:void 0,allowedSettingSources:["userSettings","projectSettings","localSettings","flagSettings","policySettings"],meter:null,sessionCounter:null,locCounter:null,prCounter:null,commitCounter:null,costCounter:null,tokenCounter:null,codeEditToolDecisionCounter:null,activeTimeCounter:null,sessionId:(0,w.randomUUID)(),parentSessionId:void 0,loggerProvider:null,eventLogger:null,meterProvider:null,tracerProvider:null,agentColorMap:new Map,agentColorIndex:0,envVarValidators:[bA,bB],lastAPIRequest:null,inMemoryErrorLog:[],inlinePlugins:[],sessionBypassPermissionsMode:!1,sessionTrustAccepted:!1,sessionPersistenceDisabled:!1,hasExitedPlanMode:!1,needsPlanModeExitAttachment:!1,hasExitedDelegateMode:!1,needsDelegateModeExitAttachment:!1,lspRecommendationShownThisSession:!1,initJsonSchema:null,registeredHooks:null,planSlugCache:new Map,teleportedSessionInfo:null,invokedSkills:new Map,slowOperations:[],sdkBetas:void 0,mainThreadAgentType:void 0}}(),bD=new Set,bE=bv(()=>by(process.env.DEBUG)||by(process.env.DEBUG_SDK)||process.argv.includes("--debug")||process.argv.includes("-d")||bG()||process.argv.some(a=>a.startsWith("--debug="))),bF=bv(()=>{let a=process.argv.find(a=>a.startsWith("--debug="));return a?bw(a.substring(8)):null}),bG=bv(()=>process.argv.includes("--debug-to-stderr")||process.argv.includes("-d2e"));function bH(){return process.env.CLAUDE_CODE_DEBUG_LOGS_DIR??(0,o.join)(bx(),"debug",`${bC.sessionId}.txt`)}bv(()=>{if("--ripgrep"!==process.argv[2])try{let a=bH(),b=(0,o.dirname)(a),c=(0,o.join)(b,"latest");if(bJ.existsSync(b)||bJ.mkdirSync(b),bJ.existsSync(c))try{bJ.unlinkSync(c)}catch{}bJ.symlinkSync(a,c)}catch{}});function bI(a,b){performance.now();try{return b()}finally{performance.now()}}var bJ={cwd:()=>process.cwd(),existsSync:a=>bI(`existsSync(${a})`,()=>s.existsSync(a)),stat:async a=>(0,t.stat)(a),statSync:a=>bI(`statSync(${a})`,()=>s.statSync(a)),lstatSync:a=>bI(`lstatSync(${a})`,()=>s.lstatSync(a)),readFileSync:(a,b)=>bI(`readFileSync(${a})`,()=>s.readFileSync(a,{encoding:b.encoding})),readFileBytesSync:a=>bI(`readFileBytesSync(${a})`,()=>s.readFileSync(a)),readSync:(a,b)=>bI(`readSync(${a}, ${b.length} bytes)`,()=>{let c;try{c=s.openSync(a,"r");let d=Buffer.alloc(b.length),e=s.readSync(c,d,0,b.length,0);return{buffer:d,bytesRead:e}}finally{c&&s.closeSync(c)}}),appendFileSync:(a,b,c)=>bI(`appendFileSync(${a}, ${b.length} chars)`,()=>{if(s.existsSync(a)||c?.mode===void 0)s.appendFileSync(a,b);else{let d=s.openSync(a,"a",c.mode);try{s.appendFileSync(d,b)}finally{s.closeSync(d)}}}),copyFileSync:(a,b)=>bI(`copyFileSync(${a}  ${b})`,()=>s.copyFileSync(a,b)),unlinkSync:a=>bI(`unlinkSync(${a})`,()=>s.unlinkSync(a)),renameSync:(a,b)=>bI(`renameSync(${a}  ${b})`,()=>s.renameSync(a,b)),linkSync:(a,b)=>bI(`linkSync(${a}  ${b})`,()=>s.linkSync(a,b)),symlinkSync:(a,b)=>bI(`symlinkSync(${a}  ${b})`,()=>s.symlinkSync(a,b)),readlinkSync:a=>bI(`readlinkSync(${a})`,()=>s.readlinkSync(a)),realpathSync:a=>bI(`realpathSync(${a})`,()=>s.realpathSync(a)),mkdirSync:(a,b)=>bI(`mkdirSync(${a})`,()=>{if(!s.existsSync(a)){let c={recursive:!0};b?.mode!==void 0&&(c.mode=b.mode),s.mkdirSync(a,c)}}),readdirSync:a=>bI(`readdirSync(${a})`,()=>s.readdirSync(a,{withFileTypes:!0})),readdirStringSync:a=>bI(`readdirStringSync(${a})`,()=>s.readdirSync(a)),isDirEmptySync(a){return bI(`isDirEmptySync(${a})`,()=>0===this.readdirSync(a).length)},rmdirSync:a=>bI(`rmdirSync(${a})`,()=>s.rmdirSync(a)),rmSync:(a,b)=>bI(`rmSync(${a})`,()=>s.rmSync(a,b)),createWriteStream:a=>s.createWriteStream(a)};class bK{returned;queue=[];readResolve;readReject;isDone=!1;hasError;started=!1;constructor(a){this.returned=a}[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){return this.queue.length>0?Promise.resolve({done:!1,value:this.queue.shift()}):this.isDone?Promise.resolve({done:!0,value:void 0}):this.hasError?Promise.reject(this.hasError):new Promise((a,b)=>{this.readResolve=a,this.readReject=b})}enqueue(a){if(this.readResolve){let b=this.readResolve;this.readResolve=void 0,this.readReject=void 0,b({done:!1,value:a})}else this.queue.push(a)}done(){if(this.isDone=!0,this.readResolve){let a=this.readResolve;this.readResolve=void 0,this.readReject=void 0,a({done:!0,value:void 0})}}error(a){if(this.hasError=a,this.readReject){let b=this.readReject;this.readResolve=void 0,this.readReject=void 0,b(a)}}return(){return this.isDone=!0,this.returned&&this.returned(),Promise.resolve({done:!0,value:void 0})}}Symbol.asyncIterator,Symbol.asyncDispose,Symbol.asyncDispose,function(a){a.assertEqual=a=>{},a.assertIs=function(a){},a.assertNever=function(a){throw Error()},a.arrayToEnum=a=>{let b={};for(let c of a)b[c]=c;return b},a.getValidEnumValues=b=>{let c=a.objectKeys(b).filter(a=>"number"!=typeof b[b[a]]),d={};for(let a of c)d[a]=b[a];return a.objectValues(d)},a.objectValues=b=>a.objectKeys(b).map(function(a){return b[a]}),a.objectKeys="function"==typeof Object.keys?a=>Object.keys(a):a=>{let b=[];for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},a.find=(a,b)=>{for(let c of a)if(b(c))return c},a.isInteger="function"==typeof Number.isInteger?a=>Number.isInteger(a):a=>"number"==typeof a&&Number.isFinite(a)&&Math.floor(a)===a,a.joinValues=function(a,b=" | "){return a.map(a=>"string"==typeof a?`'${a}'`:a).join(b)},a.jsonStringifyReplacer=(a,b)=>"bigint"==typeof b?b.toString():b}(h||(h={})),(i||(i={})).mergeShapes=(a,b)=>({...a,...b});var bL=h.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),bM=a=>{switch(typeof a){case"undefined":return bL.undefined;case"string":return bL.string;case"number":return Number.isNaN(a)?bL.nan:bL.number;case"boolean":return bL.boolean;case"function":return bL.function;case"bigint":return bL.bigint;case"symbol":return bL.symbol;case"object":if(Array.isArray(a))return bL.array;if(null===a)return bL.null;if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return bL.promise;if("undefined"!=typeof Map&&a instanceof Map)return bL.map;if("undefined"!=typeof Set&&a instanceof Set)return bL.set;if("undefined"!=typeof Date&&a instanceof Date)return bL.date;return bL.object;default:return bL.unknown}},bN=h.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class bO extends Error{get errors(){return this.issues}constructor(a){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};let b=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,b):this.__proto__=b,this.name="ZodError",this.issues=a}format(a){let b=a||function(a){return a.message},c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code)e.unionErrors.map(d);else if("invalid_return_type"===e.code)d(e.returnTypeError);else if("invalid_arguments"===e.code)d(e.argumentsError);else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(this),c}static assert(a){if(!(a instanceof bO))throw Error(`Not a ZodError: ${a}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,h.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(a=a=>a.message){let b={},c=[];for(let d of this.issues)if(d.path.length>0){let c=d.path[0];b[c]=b[c]||[],b[c].push(a(d))}else c.push(a(d));return{formErrors:c,fieldErrors:b}}get formErrors(){return this.flatten()}}bO.create=a=>new bO(a);var bP=(a,b)=>{let c;switch(a.code){case bN.invalid_type:c=a.received===bL.undefined?"Required":`Expected ${a.expected}, received ${a.received}`;break;case bN.invalid_literal:c=`Invalid literal value, expected ${JSON.stringify(a.expected,h.jsonStringifyReplacer)}`;break;case bN.unrecognized_keys:c=`Unrecognized key(s) in object: ${h.joinValues(a.keys,", ")}`;break;case bN.invalid_union:c="Invalid input";break;case bN.invalid_union_discriminator:c=`Invalid discriminator value. Expected ${h.joinValues(a.options)}`;break;case bN.invalid_enum_value:c=`Invalid enum value. Expected ${h.joinValues(a.options)}, received '${a.received}'`;break;case bN.invalid_arguments:c="Invalid function arguments";break;case bN.invalid_return_type:c="Invalid function return type";break;case bN.invalid_date:c="Invalid date";break;case bN.invalid_string:"object"==typeof a.validation?"includes"in a.validation?(c=`Invalid input: must include "${a.validation.includes}"`,"number"==typeof a.validation.position&&(c=`${c} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?c=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?c=`Invalid input: must end with "${a.validation.endsWith}"`:h.assertNever(a.validation):c="regex"!==a.validation?`Invalid ${a.validation}`:"Invalid";break;case bN.too_small:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:"number"===a.type||"bigint"===a.type?`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:"date"===a.type?`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:"Invalid input";break;case bN.too_big:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:"number"===a.type?`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"bigint"===a.type?`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"date"===a.type?`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:"Invalid input";break;case bN.custom:c="Invalid input";break;case bN.invalid_intersection_types:c="Intersection results could not be merged";break;case bN.not_multiple_of:c=`Number must be a multiple of ${a.multipleOf}`;break;case bN.not_finite:c="Number must be finite";break;default:c=b.defaultError,h.assertNever(a)}return{message:c}},bQ=a=>{let{data:b,path:c,errorMaps:d,issueData:e}=a,f=[...c,...e.path||[]],g={...e,path:f};if(void 0!==e.message)return{...e,path:f,message:e.message};let h="";for(let a of d.filter(a=>!!a).slice().reverse())h=a(g,{data:b,defaultError:h}).message;return{...e,path:f,message:h}};function bR(a,b){let c=bQ({issueData:b,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,bP,void 0].filter(a=>!!a)});a.common.issues.push(c)}class bS{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(a,b){let c=[];for(let d of b){if("aborted"===d.status)return bT;"dirty"===d.status&&a.dirty(),c.push(d.value)}return{status:a.value,value:c}}static async mergeObjectAsync(a,b){let c=[];for(let a of b){let b=await a.key,d=await a.value;c.push({key:b,value:d})}return bS.mergeObjectSync(a,c)}static mergeObjectSync(a,b){let c={};for(let d of b){let{key:b,value:e}=d;if("aborted"===b.status||"aborted"===e.status)return bT;"dirty"===b.status&&a.dirty(),"dirty"===e.status&&a.dirty(),"__proto__"!==b.value&&(void 0!==e.value||d.alwaysSet)&&(c[b.value]=e.value)}return{status:a.value,value:c}}}var bT=Object.freeze({status:"aborted"}),bU=a=>({status:"dirty",value:a}),bV=a=>({status:"valid",value:a}),bW=a=>"undefined"!=typeof Promise&&a instanceof Promise;!function(a){a.errToObj=a=>"string"==typeof a?{message:a}:a||{},a.toString=a=>"string"==typeof a?a:a?.message}(j||(j={}));class bX{constructor(a,b,c,d){this._cachedPath=[],this.parent=a,this.data=b,this._path=c,this._key=d}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}var bY=(a,b)=>{if("valid"===b.status)return{success:!0,data:b.value};if(!a.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let b=new bO(a.common.issues);return this._error=b,this._error}}};function bZ(a){if(!a)return{};let{errorMap:b,invalid_type_error:c,required_error:d,description:e}=a;if(b&&(c||d))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return b?{errorMap:b,description:e}:{errorMap:(b,e)=>{let{message:f}=a;return"invalid_enum_value"===b.code?{message:f??e.defaultError}:void 0===e.data?{message:f??d??e.defaultError}:"invalid_type"!==b.code?{message:e.defaultError}:{message:f??c??e.defaultError}},description:e}}class b${get description(){return this._def.description}_getType(a){return bM(a.data)}_getOrReturnCtx(a,b){return b||{common:a.parent.common,data:a.data,parsedType:bM(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new bS,ctx:{common:a.parent.common,data:a.data,parsedType:bM(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){let b=this._parse(a);if(bW(b))throw Error("Synchronous parse encountered promise.");return b}_parseAsync(a){return Promise.resolve(this._parse(a))}parse(a,b){let c=this.safeParse(a,b);if(c.success)return c.data;throw c.error}safeParse(a,b){let c={common:{issues:[],async:b?.async??!1,contextualErrorMap:b?.errorMap},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:bM(a)},d=this._parseSync({data:a,path:c.path,parent:c});return bY(c,d)}"~validate"(a){let b={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:bM(a)};if(!this["~standard"].async)try{let c=this._parseSync({data:a,path:[],parent:b});return"valid"===c.status?{value:c.value}:{issues:b.common.issues}}catch(a){a?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),b.common={issues:[],async:!0}}return this._parseAsync({data:a,path:[],parent:b}).then(a=>"valid"===a.status?{value:a.value}:{issues:b.common.issues})}async parseAsync(a,b){let c=await this.safeParseAsync(a,b);if(c.success)return c.data;throw c.error}async safeParseAsync(a,b){let c={common:{issues:[],contextualErrorMap:b?.errorMap,async:!0},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:bM(a)},d=this._parse({data:a,path:c.path,parent:c});return bY(c,await (bW(d)?d:Promise.resolve(d)))}refine(a,b){return this._refinement((c,d)=>{let e=a(c),f=()=>d.addIssue({code:bN.custom,..."string"==typeof b||void 0===b?{message:b}:"function"==typeof b?b(c):b});return"undefined"!=typeof Promise&&e instanceof Promise?e.then(a=>!!a||(f(),!1)):!!e||(f(),!1)})}refinement(a,b){return this._refinement((c,d)=>!!a(c)||(d.addIssue("function"==typeof b?b(c,d):b),!1))}_refinement(a){return new cJ({schema:this,typeName:l.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return cK.create(this,this._def)}nullable(){return cL.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return cs.create(this)}promise(){return cI.create(this,this._def)}or(a){return cu.create([this,a],this._def)}and(a){return cx.create(this,a,this._def)}transform(a){return new cJ({...bZ(this._def),schema:this,typeName:l.ZodEffects,effect:{type:"transform",transform:a}})}default(a){return new cM({...bZ(this._def),innerType:this,defaultValue:"function"==typeof a?a:()=>a,typeName:l.ZodDefault})}brand(){return new cP({typeName:l.ZodBranded,type:this,...bZ(this._def)})}catch(a){return new cN({...bZ(this._def),innerType:this,catchValue:"function"==typeof a?a:()=>a,typeName:l.ZodCatch})}describe(a){return new this.constructor({...this._def,description:a})}pipe(a){return cQ.create(this,a)}readonly(){return cR.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var b_=/^c[^\s-]{8,}$/i,b0=/^[0-9a-z]+$/,b1=/^[0-9A-HJKMNP-TV-Z]{26}$/i,b2=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,b3=/^[a-z0-9_-]{21}$/i,b4=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,b5=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,b6=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,b7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,b8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,b9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ca=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cb=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,cc=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,cd="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ce=RegExp(`^${cd}$`);function cf(a){let b="[0-5]\\d";a.precision?b=`${b}\\.\\d{${a.precision}}`:null==a.precision&&(b=`${b}(\\.\\d+)?`);let c=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${b})${c}`}class cg extends b${_parse(a){var b,c,d,e;let f;if(this._def.coerce&&(a.data=String(a.data)),this._getType(a)!==bL.string){let b=this._getOrReturnCtx(a);return bR(b,{code:bN.invalid_type,expected:bL.string,received:b.parsedType}),bT}let g=new bS;for(let i of this._def.checks)if("min"===i.kind)a.data.length<i.value&&(bR(f=this._getOrReturnCtx(a,f),{code:bN.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),g.dirty());else if("max"===i.kind)a.data.length>i.value&&(bR(f=this._getOrReturnCtx(a,f),{code:bN.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),g.dirty());else if("length"===i.kind){let b=a.data.length>i.value,c=a.data.length<i.value;(b||c)&&(f=this._getOrReturnCtx(a,f),b?bR(f,{code:bN.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&bR(f,{code:bN.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),g.dirty())}else if("email"===i.kind)b6.test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{validation:"email",code:bN.invalid_string,message:i.message}),g.dirty());else if("emoji"===i.kind)k||(k=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),k.test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{validation:"emoji",code:bN.invalid_string,message:i.message}),g.dirty());else if("uuid"===i.kind)b2.test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{validation:"uuid",code:bN.invalid_string,message:i.message}),g.dirty());else if("nanoid"===i.kind)b3.test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{validation:"nanoid",code:bN.invalid_string,message:i.message}),g.dirty());else if("cuid"===i.kind)b_.test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{validation:"cuid",code:bN.invalid_string,message:i.message}),g.dirty());else if("cuid2"===i.kind)b0.test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{validation:"cuid2",code:bN.invalid_string,message:i.message}),g.dirty());else if("ulid"===i.kind)b1.test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{validation:"ulid",code:bN.invalid_string,message:i.message}),g.dirty());else if("url"===i.kind)try{new URL(a.data)}catch{bR(f=this._getOrReturnCtx(a,f),{validation:"url",code:bN.invalid_string,message:i.message}),g.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{validation:"regex",code:bN.invalid_string,message:i.message}),g.dirty())):"trim"===i.kind?a.data=a.data.trim():"includes"===i.kind?a.data.includes(i.value,i.position)||(bR(f=this._getOrReturnCtx(a,f),{code:bN.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),g.dirty()):"toLowerCase"===i.kind?a.data=a.data.toLowerCase():"toUpperCase"===i.kind?a.data=a.data.toUpperCase():"startsWith"===i.kind?a.data.startsWith(i.value)||(bR(f=this._getOrReturnCtx(a,f),{code:bN.invalid_string,validation:{startsWith:i.value},message:i.message}),g.dirty()):"endsWith"===i.kind?a.data.endsWith(i.value)||(bR(f=this._getOrReturnCtx(a,f),{code:bN.invalid_string,validation:{endsWith:i.value},message:i.message}),g.dirty()):"datetime"===i.kind?(function(a){let b=`${cd}T${cf(a)}`,c=[];return c.push(a.local?"Z?":"Z"),a.offset&&c.push("([+-]\\d{2}:?\\d{2})"),b=`${b}(${c.join("|")})`,RegExp(`^${b}$`)})(i).test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{code:bN.invalid_string,validation:"datetime",message:i.message}),g.dirty()):"date"===i.kind?ce.test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{code:bN.invalid_string,validation:"date",message:i.message}),g.dirty()):"time"===i.kind?RegExp(`^${cf(i)}$`).test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{code:bN.invalid_string,validation:"time",message:i.message}),g.dirty()):"duration"===i.kind?b5.test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{validation:"duration",code:bN.invalid_string,message:i.message}),g.dirty()):"ip"===i.kind?(b=a.data,!(("v4"===(c=i.version)||!c)&&b7.test(b)||("v6"===c||!c)&&b9.test(b))&&1&&(bR(f=this._getOrReturnCtx(a,f),{validation:"ip",code:bN.invalid_string,message:i.message}),g.dirty())):"jwt"===i.kind?!function(a,b){if(!b4.test(a))return!1;try{let[c]=a.split(".");if(!c)return!1;let d=c.replace(/-/g,"+").replace(/_/g,"/").padEnd(c.length+(4-c.length%4)%4,"="),e=JSON.parse(atob(d));if("object"!=typeof e||null===e||"typ"in e&&e?.typ!=="JWT"||!e.alg||b&&e.alg!==b)return!1;return!0}catch{return!1}}(a.data,i.alg)&&(bR(f=this._getOrReturnCtx(a,f),{validation:"jwt",code:bN.invalid_string,message:i.message}),g.dirty()):"cidr"===i.kind?(d=a.data,!(("v4"===(e=i.version)||!e)&&b8.test(d)||("v6"===e||!e)&&ca.test(d))&&1&&(bR(f=this._getOrReturnCtx(a,f),{validation:"cidr",code:bN.invalid_string,message:i.message}),g.dirty())):"base64"===i.kind?cb.test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{validation:"base64",code:bN.invalid_string,message:i.message}),g.dirty()):"base64url"===i.kind?cc.test(a.data)||(bR(f=this._getOrReturnCtx(a,f),{validation:"base64url",code:bN.invalid_string,message:i.message}),g.dirty()):h.assertNever(i);return{status:g.value,value:a.data}}_regex(a,b,c){return this.refinement(b=>a.test(b),{validation:b,code:bN.invalid_string,...j.errToObj(c)})}_addCheck(a){return new cg({...this._def,checks:[...this._def.checks,a]})}email(a){return this._addCheck({kind:"email",...j.errToObj(a)})}url(a){return this._addCheck({kind:"url",...j.errToObj(a)})}emoji(a){return this._addCheck({kind:"emoji",...j.errToObj(a)})}uuid(a){return this._addCheck({kind:"uuid",...j.errToObj(a)})}nanoid(a){return this._addCheck({kind:"nanoid",...j.errToObj(a)})}cuid(a){return this._addCheck({kind:"cuid",...j.errToObj(a)})}cuid2(a){return this._addCheck({kind:"cuid2",...j.errToObj(a)})}ulid(a){return this._addCheck({kind:"ulid",...j.errToObj(a)})}base64(a){return this._addCheck({kind:"base64",...j.errToObj(a)})}base64url(a){return this._addCheck({kind:"base64url",...j.errToObj(a)})}jwt(a){return this._addCheck({kind:"jwt",...j.errToObj(a)})}ip(a){return this._addCheck({kind:"ip",...j.errToObj(a)})}cidr(a){return this._addCheck({kind:"cidr",...j.errToObj(a)})}datetime(a){return"string"==typeof a?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:a}):this._addCheck({kind:"datetime",precision:void 0===a?.precision?null:a?.precision,offset:a?.offset??!1,local:a?.local??!1,...j.errToObj(a?.message)})}date(a){return this._addCheck({kind:"date",message:a})}time(a){return"string"==typeof a?this._addCheck({kind:"time",precision:null,message:a}):this._addCheck({kind:"time",precision:void 0===a?.precision?null:a?.precision,...j.errToObj(a?.message)})}duration(a){return this._addCheck({kind:"duration",...j.errToObj(a)})}regex(a,b){return this._addCheck({kind:"regex",regex:a,...j.errToObj(b)})}includes(a,b){return this._addCheck({kind:"includes",value:a,position:b?.position,...j.errToObj(b?.message)})}startsWith(a,b){return this._addCheck({kind:"startsWith",value:a,...j.errToObj(b)})}endsWith(a,b){return this._addCheck({kind:"endsWith",value:a,...j.errToObj(b)})}min(a,b){return this._addCheck({kind:"min",value:a,...j.errToObj(b)})}max(a,b){return this._addCheck({kind:"max",value:a,...j.errToObj(b)})}length(a,b){return this._addCheck({kind:"length",value:a,...j.errToObj(b)})}nonempty(a){return this.min(1,j.errToObj(a))}trim(){return new cg({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new cg({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new cg({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(a=>"datetime"===a.kind)}get isDate(){return!!this._def.checks.find(a=>"date"===a.kind)}get isTime(){return!!this._def.checks.find(a=>"time"===a.kind)}get isDuration(){return!!this._def.checks.find(a=>"duration"===a.kind)}get isEmail(){return!!this._def.checks.find(a=>"email"===a.kind)}get isURL(){return!!this._def.checks.find(a=>"url"===a.kind)}get isEmoji(){return!!this._def.checks.find(a=>"emoji"===a.kind)}get isUUID(){return!!this._def.checks.find(a=>"uuid"===a.kind)}get isNANOID(){return!!this._def.checks.find(a=>"nanoid"===a.kind)}get isCUID(){return!!this._def.checks.find(a=>"cuid"===a.kind)}get isCUID2(){return!!this._def.checks.find(a=>"cuid2"===a.kind)}get isULID(){return!!this._def.checks.find(a=>"ulid"===a.kind)}get isIP(){return!!this._def.checks.find(a=>"ip"===a.kind)}get isCIDR(){return!!this._def.checks.find(a=>"cidr"===a.kind)}get isBase64(){return!!this._def.checks.find(a=>"base64"===a.kind)}get isBase64url(){return!!this._def.checks.find(a=>"base64url"===a.kind)}get minLength(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxLength(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}cg.create=a=>new cg({checks:[],typeName:l.ZodString,coerce:a?.coerce??!1,...bZ(a)});class ch extends b${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(a){let b;if(this._def.coerce&&(a.data=Number(a.data)),this._getType(a)!==bL.number){let b=this._getOrReturnCtx(a);return bR(b,{code:bN.invalid_type,expected:bL.number,received:b.parsedType}),bT}let c=new bS;for(let d of this._def.checks)"int"===d.kind?h.isInteger(a.data)||(bR(b=this._getOrReturnCtx(a,b),{code:bN.invalid_type,expected:"integer",received:"float",message:d.message}),c.dirty()):"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(bR(b=this._getOrReturnCtx(a,b),{code:bN.too_small,minimum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(bR(b=this._getOrReturnCtx(a,b),{code:bN.too_big,maximum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"multipleOf"===d.kind?0!==function(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}(a.data,d.value)&&(bR(b=this._getOrReturnCtx(a,b),{code:bN.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):"finite"===d.kind?Number.isFinite(a.data)||(bR(b=this._getOrReturnCtx(a,b),{code:bN.not_finite,message:d.message}),c.dirty()):h.assertNever(d);return{status:c.value,value:a.data}}gte(a,b){return this.setLimit("min",a,!0,j.toString(b))}gt(a,b){return this.setLimit("min",a,!1,j.toString(b))}lte(a,b){return this.setLimit("max",a,!0,j.toString(b))}lt(a,b){return this.setLimit("max",a,!1,j.toString(b))}setLimit(a,b,c,d){return new ch({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:j.toString(d)}]})}_addCheck(a){return new ch({...this._def,checks:[...this._def.checks,a]})}int(a){return this._addCheck({kind:"int",message:j.toString(a)})}positive(a){return this._addCheck({kind:"min",value:0,inclusive:!1,message:j.toString(a)})}negative(a){return this._addCheck({kind:"max",value:0,inclusive:!1,message:j.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:0,inclusive:!0,message:j.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:0,inclusive:!0,message:j.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:j.toString(b)})}finite(a){return this._addCheck({kind:"finite",message:j.toString(a)})}safe(a){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:j.toString(a)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:j.toString(a)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}get isInt(){return!!this._def.checks.find(a=>"int"===a.kind||"multipleOf"===a.kind&&h.isInteger(a.value))}get isFinite(){let a=null,b=null;for(let c of this._def.checks)if("finite"===c.kind||"int"===c.kind||"multipleOf"===c.kind)return!0;else"min"===c.kind?(null===b||c.value>b)&&(b=c.value):"max"===c.kind&&(null===a||c.value<a)&&(a=c.value);return Number.isFinite(b)&&Number.isFinite(a)}}ch.create=a=>new ch({checks:[],typeName:l.ZodNumber,coerce:a?.coerce||!1,...bZ(a)});class ci extends b${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(a){let b;if(this._def.coerce)try{a.data=BigInt(a.data)}catch{return this._getInvalidInput(a)}if(this._getType(a)!==bL.bigint)return this._getInvalidInput(a);let c=new bS;for(let d of this._def.checks)"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(bR(b=this._getOrReturnCtx(a,b),{code:bN.too_small,type:"bigint",minimum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(bR(b=this._getOrReturnCtx(a,b),{code:bN.too_big,type:"bigint",maximum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"multipleOf"===d.kind?a.data%d.value!==BigInt(0)&&(bR(b=this._getOrReturnCtx(a,b),{code:bN.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):h.assertNever(d);return{status:c.value,value:a.data}}_getInvalidInput(a){let b=this._getOrReturnCtx(a);return bR(b,{code:bN.invalid_type,expected:bL.bigint,received:b.parsedType}),bT}gte(a,b){return this.setLimit("min",a,!0,j.toString(b))}gt(a,b){return this.setLimit("min",a,!1,j.toString(b))}lte(a,b){return this.setLimit("max",a,!0,j.toString(b))}lt(a,b){return this.setLimit("max",a,!1,j.toString(b))}setLimit(a,b,c,d){return new ci({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:j.toString(d)}]})}_addCheck(a){return new ci({...this._def,checks:[...this._def.checks,a]})}positive(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:j.toString(a)})}negative(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:j.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:j.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:j.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:j.toString(b)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}ci.create=a=>new ci({checks:[],typeName:l.ZodBigInt,coerce:a?.coerce??!1,...bZ(a)});class cj extends b${_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==bL.boolean){let b=this._getOrReturnCtx(a);return bR(b,{code:bN.invalid_type,expected:bL.boolean,received:b.parsedType}),bT}return bV(a.data)}}cj.create=a=>new cj({typeName:l.ZodBoolean,coerce:a?.coerce||!1,...bZ(a)});class ck extends b${_parse(a){let b;if(this._def.coerce&&(a.data=new Date(a.data)),this._getType(a)!==bL.date){let b=this._getOrReturnCtx(a);return bR(b,{code:bN.invalid_type,expected:bL.date,received:b.parsedType}),bT}if(Number.isNaN(a.data.getTime()))return bR(this._getOrReturnCtx(a),{code:bN.invalid_date}),bT;let c=new bS;for(let d of this._def.checks)"min"===d.kind?a.data.getTime()<d.value&&(bR(b=this._getOrReturnCtx(a,b),{code:bN.too_small,message:d.message,inclusive:!0,exact:!1,minimum:d.value,type:"date"}),c.dirty()):"max"===d.kind?a.data.getTime()>d.value&&(bR(b=this._getOrReturnCtx(a,b),{code:bN.too_big,message:d.message,inclusive:!0,exact:!1,maximum:d.value,type:"date"}),c.dirty()):h.assertNever(d);return{status:c.value,value:new Date(a.data.getTime())}}_addCheck(a){return new ck({...this._def,checks:[...this._def.checks,a]})}min(a,b){return this._addCheck({kind:"min",value:a.getTime(),message:j.toString(b)})}max(a,b){return this._addCheck({kind:"max",value:a.getTime(),message:j.toString(b)})}get minDate(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return null!=a?new Date(a):null}get maxDate(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return null!=a?new Date(a):null}}ck.create=a=>new ck({checks:[],coerce:a?.coerce||!1,typeName:l.ZodDate,...bZ(a)});class cl extends b${_parse(a){if(this._getType(a)!==bL.symbol){let b=this._getOrReturnCtx(a);return bR(b,{code:bN.invalid_type,expected:bL.symbol,received:b.parsedType}),bT}return bV(a.data)}}cl.create=a=>new cl({typeName:l.ZodSymbol,...bZ(a)});class cm extends b${_parse(a){if(this._getType(a)!==bL.undefined){let b=this._getOrReturnCtx(a);return bR(b,{code:bN.invalid_type,expected:bL.undefined,received:b.parsedType}),bT}return bV(a.data)}}cm.create=a=>new cm({typeName:l.ZodUndefined,...bZ(a)});class cn extends b${_parse(a){if(this._getType(a)!==bL.null){let b=this._getOrReturnCtx(a);return bR(b,{code:bN.invalid_type,expected:bL.null,received:b.parsedType}),bT}return bV(a.data)}}cn.create=a=>new cn({typeName:l.ZodNull,...bZ(a)});class co extends b${constructor(){super(...arguments),this._any=!0}_parse(a){return bV(a.data)}}co.create=a=>new co({typeName:l.ZodAny,...bZ(a)});class cp extends b${constructor(){super(...arguments),this._unknown=!0}_parse(a){return bV(a.data)}}cp.create=a=>new cp({typeName:l.ZodUnknown,...bZ(a)});class cq extends b${_parse(a){let b=this._getOrReturnCtx(a);return bR(b,{code:bN.invalid_type,expected:bL.never,received:b.parsedType}),bT}}cq.create=a=>new cq({typeName:l.ZodNever,...bZ(a)});class cr extends b${_parse(a){if(this._getType(a)!==bL.undefined){let b=this._getOrReturnCtx(a);return bR(b,{code:bN.invalid_type,expected:bL.void,received:b.parsedType}),bT}return bV(a.data)}}cr.create=a=>new cr({typeName:l.ZodVoid,...bZ(a)});class cs extends b${_parse(a){let{ctx:b,status:c}=this._processInputParams(a),d=this._def;if(b.parsedType!==bL.array)return bR(b,{code:bN.invalid_type,expected:bL.array,received:b.parsedType}),bT;if(null!==d.exactLength){let a=b.data.length>d.exactLength.value,e=b.data.length<d.exactLength.value;(a||e)&&(bR(b,{code:a?bN.too_big:bN.too_small,minimum:e?d.exactLength.value:void 0,maximum:a?d.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:d.exactLength.message}),c.dirty())}if(null!==d.minLength&&b.data.length<d.minLength.value&&(bR(b,{code:bN.too_small,minimum:d.minLength.value,type:"array",inclusive:!0,exact:!1,message:d.minLength.message}),c.dirty()),null!==d.maxLength&&b.data.length>d.maxLength.value&&(bR(b,{code:bN.too_big,maximum:d.maxLength.value,type:"array",inclusive:!0,exact:!1,message:d.maxLength.message}),c.dirty()),b.common.async)return Promise.all([...b.data].map((a,c)=>d.type._parseAsync(new bX(b,a,b.path,c)))).then(a=>bS.mergeArray(c,a));let e=[...b.data].map((a,c)=>d.type._parseSync(new bX(b,a,b.path,c)));return bS.mergeArray(c,e)}get element(){return this._def.type}min(a,b){return new cs({...this._def,minLength:{value:a,message:j.toString(b)}})}max(a,b){return new cs({...this._def,maxLength:{value:a,message:j.toString(b)}})}length(a,b){return new cs({...this._def,exactLength:{value:a,message:j.toString(b)}})}nonempty(a){return this.min(1,a)}}cs.create=(a,b)=>new cs({type:a,minLength:null,maxLength:null,exactLength:null,typeName:l.ZodArray,...bZ(b)});class ct extends b${constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let a=this._def.shape(),b=h.objectKeys(a);return this._cached={shape:a,keys:b},this._cached}_parse(a){if(this._getType(a)!==bL.object){let b=this._getOrReturnCtx(a);return bR(b,{code:bN.invalid_type,expected:bL.object,received:b.parsedType}),bT}let{status:b,ctx:c}=this._processInputParams(a),{shape:d,keys:e}=this._getCached(),f=[];if(!(this._def.catchall instanceof cq&&"strip"===this._def.unknownKeys))for(let a in c.data)e.includes(a)||f.push(a);let g=[];for(let a of e){let b=d[a],e=c.data[a];g.push({key:{status:"valid",value:a},value:b._parse(new bX(c,e,c.path,a)),alwaysSet:a in c.data})}if(this._def.catchall instanceof cq){let a=this._def.unknownKeys;if("passthrough"===a)for(let a of f)g.push({key:{status:"valid",value:a},value:{status:"valid",value:c.data[a]}});else if("strict"===a)f.length>0&&(bR(c,{code:bN.unrecognized_keys,keys:f}),b.dirty());else if("strip"===a);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let a=this._def.catchall;for(let b of f){let d=c.data[b];g.push({key:{status:"valid",value:b},value:a._parse(new bX(c,d,c.path,b)),alwaysSet:b in c.data})}}return c.common.async?Promise.resolve().then(async()=>{let a=[];for(let b of g){let c=await b.key,d=await b.value;a.push({key:c,value:d,alwaysSet:b.alwaysSet})}return a}).then(a=>bS.mergeObjectSync(b,a)):bS.mergeObjectSync(b,g)}get shape(){return this._def.shape()}strict(a){return j.errToObj,new ct({...this._def,unknownKeys:"strict",...void 0!==a?{errorMap:(b,c)=>{let d=this._def.errorMap?.(b,c).message??c.defaultError;return"unrecognized_keys"===b.code?{message:j.errToObj(a).message??d}:{message:d}}}:{}})}strip(){return new ct({...this._def,unknownKeys:"strip"})}passthrough(){return new ct({...this._def,unknownKeys:"passthrough"})}extend(a){return new ct({...this._def,shape:()=>({...this._def.shape(),...a})})}merge(a){return new ct({unknownKeys:a._def.unknownKeys,catchall:a._def.catchall,shape:()=>({...this._def.shape(),...a._def.shape()}),typeName:l.ZodObject})}setKey(a,b){return this.augment({[a]:b})}catchall(a){return new ct({...this._def,catchall:a})}pick(a){let b={};for(let c of h.objectKeys(a))a[c]&&this.shape[c]&&(b[c]=this.shape[c]);return new ct({...this._def,shape:()=>b})}omit(a){let b={};for(let c of h.objectKeys(this.shape))a[c]||(b[c]=this.shape[c]);return new ct({...this._def,shape:()=>b})}deepPartial(){return function a(b){if(b instanceof ct){let c={};for(let d in b.shape){let e=b.shape[d];c[d]=cK.create(a(e))}return new ct({...b._def,shape:()=>c})}if(b instanceof cs)return new cs({...b._def,type:a(b.element)});if(b instanceof cK)return cK.create(a(b.unwrap()));if(b instanceof cL)return cL.create(a(b.unwrap()));if(b instanceof cy)return cy.create(b.items.map(b=>a(b)));else return b}(this)}partial(a){let b={};for(let c of h.objectKeys(this.shape)){let d=this.shape[c];a&&!a[c]?b[c]=d:b[c]=d.optional()}return new ct({...this._def,shape:()=>b})}required(a){let b={};for(let c of h.objectKeys(this.shape))if(a&&!a[c])b[c]=this.shape[c];else{let a=this.shape[c];for(;a instanceof cK;)a=a._def.innerType;b[c]=a}return new ct({...this._def,shape:()=>b})}keyof(){return cF(h.objectKeys(this.shape))}}ct.create=(a,b)=>new ct({shape:()=>a,unknownKeys:"strip",catchall:cq.create(),typeName:l.ZodObject,...bZ(b)}),ct.strictCreate=(a,b)=>new ct({shape:()=>a,unknownKeys:"strict",catchall:cq.create(),typeName:l.ZodObject,...bZ(b)}),ct.lazycreate=(a,b)=>new ct({shape:a,unknownKeys:"strip",catchall:cq.create(),typeName:l.ZodObject,...bZ(b)});class cu extends b${_parse(a){let{ctx:b}=this._processInputParams(a),c=this._def.options;if(b.common.async)return Promise.all(c.map(async a=>{let c={...b,common:{...b.common,issues:[]},parent:null};return{result:await a._parseAsync({data:b.data,path:b.path,parent:c}),ctx:c}})).then(function(a){for(let b of a)if("valid"===b.result.status)return b.result;for(let c of a)if("dirty"===c.result.status)return b.common.issues.push(...c.ctx.common.issues),c.result;let c=a.map(a=>new bO(a.ctx.common.issues));return bR(b,{code:bN.invalid_union,unionErrors:c}),bT});{let a,d=[];for(let e of c){let c={...b,common:{...b.common,issues:[]},parent:null},f=e._parseSync({data:b.data,path:b.path,parent:c});if("valid"===f.status)return f;"dirty"!==f.status||a||(a={result:f,ctx:c}),c.common.issues.length&&d.push(c.common.issues)}if(a)return b.common.issues.push(...a.ctx.common.issues),a.result;let e=d.map(a=>new bO(a));return bR(b,{code:bN.invalid_union,unionErrors:e}),bT}}get options(){return this._def.options}}cu.create=(a,b)=>new cu({options:a,typeName:l.ZodUnion,...bZ(b)});var cv=a=>{if(a instanceof cD)return cv(a.schema);if(a instanceof cJ)return cv(a.innerType());if(a instanceof cE)return[a.value];if(a instanceof cG)return a.options;if(a instanceof cH)return h.objectValues(a.enum);else if(a instanceof cM)return cv(a._def.innerType);else if(a instanceof cm)return[void 0];else if(a instanceof cn)return[null];else if(a instanceof cK)return[void 0,...cv(a.unwrap())];else if(a instanceof cL)return[null,...cv(a.unwrap())];else if(a instanceof cP)return cv(a.unwrap());else if(a instanceof cR)return cv(a.unwrap());else if(a instanceof cN)return cv(a._def.innerType);else return[]};class cw extends b${_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==bL.object)return bR(b,{code:bN.invalid_type,expected:bL.object,received:b.parsedType}),bT;let c=this.discriminator,d=b.data[c],e=this.optionsMap.get(d);return e?b.common.async?e._parseAsync({data:b.data,path:b.path,parent:b}):e._parseSync({data:b.data,path:b.path,parent:b}):(bR(b,{code:bN.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[c]}),bT)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(a,b,c){let d=new Map;for(let c of b){let b=cv(c.shape[a]);if(!b.length)throw Error(`A discriminator value for key \`${a}\` could not be extracted from all schema options`);for(let e of b){if(d.has(e))throw Error(`Discriminator property ${String(a)} has duplicate value ${String(e)}`);d.set(e,c)}}return new cw({typeName:l.ZodDiscriminatedUnion,discriminator:a,options:b,optionsMap:d,...bZ(c)})}}class cx extends b${_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=(a,d)=>{if("aborted"===a.status||"aborted"===d.status)return bT;let e=function a(b,c){let d=bM(b),e=bM(c);if(b===c)return{valid:!0,data:b};if(d===bL.object&&e===bL.object){let d=h.objectKeys(c),e=h.objectKeys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1};f[d]=e.data}return{valid:!0,data:f}}if(d===bL.array&&e===bL.array){if(b.length!==c.length)return{valid:!1};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1};d.push(f.data)}return{valid:!0,data:d}}if(d===bL.date&&e===bL.date&&+b==+c)return{valid:!0,data:b};return{valid:!1}}(a.value,d.value);return e.valid?(("dirty"===a.status||"dirty"===d.status)&&b.dirty(),{status:b.value,value:e.data}):(bR(c,{code:bN.invalid_intersection_types}),bT)};return c.common.async?Promise.all([this._def.left._parseAsync({data:c.data,path:c.path,parent:c}),this._def.right._parseAsync({data:c.data,path:c.path,parent:c})]).then(([a,b])=>d(a,b)):d(this._def.left._parseSync({data:c.data,path:c.path,parent:c}),this._def.right._parseSync({data:c.data,path:c.path,parent:c}))}}cx.create=(a,b,c)=>new cx({left:a,right:b,typeName:l.ZodIntersection,...bZ(c)});class cy extends b${_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==bL.array)return bR(c,{code:bN.invalid_type,expected:bL.array,received:c.parsedType}),bT;if(c.data.length<this._def.items.length)return bR(c,{code:bN.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),bT;!this._def.rest&&c.data.length>this._def.items.length&&(bR(c,{code:bN.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b.dirty());let d=[...c.data].map((a,b)=>{let d=this._def.items[b]||this._def.rest;return d?d._parse(new bX(c,a,c.path,b)):null}).filter(a=>!!a);return c.common.async?Promise.all(d).then(a=>bS.mergeArray(b,a)):bS.mergeArray(b,d)}get items(){return this._def.items}rest(a){return new cy({...this._def,rest:a})}}cy.create=(a,b)=>{if(!Array.isArray(a))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new cy({items:a,typeName:l.ZodTuple,rest:null,...bZ(b)})};class cz extends b${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==bL.object)return bR(c,{code:bN.invalid_type,expected:bL.object,received:c.parsedType}),bT;let d=[],e=this._def.keyType,f=this._def.valueType;for(let a in c.data)d.push({key:e._parse(new bX(c,a,c.path,a)),value:f._parse(new bX(c,c.data[a],c.path,a)),alwaysSet:a in c.data});return c.common.async?bS.mergeObjectAsync(b,d):bS.mergeObjectSync(b,d)}get element(){return this._def.valueType}static create(a,b,c){return new cz(b instanceof b$?{keyType:a,valueType:b,typeName:l.ZodRecord,...bZ(c)}:{keyType:cg.create(),valueType:a,typeName:l.ZodRecord,...bZ(b)})}}class cA extends b${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==bL.map)return bR(c,{code:bN.invalid_type,expected:bL.map,received:c.parsedType}),bT;let d=this._def.keyType,e=this._def.valueType,f=[...c.data.entries()].map(([a,b],f)=>({key:d._parse(new bX(c,a,c.path,[f,"key"])),value:e._parse(new bX(c,b,c.path,[f,"value"]))}));if(c.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of f){let d=await c.key,e=await c.value;if("aborted"===d.status||"aborted"===e.status)return bT;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}})}{let a=new Map;for(let c of f){let d=c.key,e=c.value;if("aborted"===d.status||"aborted"===e.status)return bT;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}}}}cA.create=(a,b,c)=>new cA({valueType:b,keyType:a,typeName:l.ZodMap,...bZ(c)});class cB extends b${_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==bL.set)return bR(c,{code:bN.invalid_type,expected:bL.set,received:c.parsedType}),bT;let d=this._def;null!==d.minSize&&c.data.size<d.minSize.value&&(bR(c,{code:bN.too_small,minimum:d.minSize.value,type:"set",inclusive:!0,exact:!1,message:d.minSize.message}),b.dirty()),null!==d.maxSize&&c.data.size>d.maxSize.value&&(bR(c,{code:bN.too_big,maximum:d.maxSize.value,type:"set",inclusive:!0,exact:!1,message:d.maxSize.message}),b.dirty());let e=this._def.valueType;function f(a){let c=new Set;for(let d of a){if("aborted"===d.status)return bT;"dirty"===d.status&&b.dirty(),c.add(d.value)}return{status:b.value,value:c}}let g=[...c.data.values()].map((a,b)=>e._parse(new bX(c,a,c.path,b)));return c.common.async?Promise.all(g).then(a=>f(a)):f(g)}min(a,b){return new cB({...this._def,minSize:{value:a,message:j.toString(b)}})}max(a,b){return new cB({...this._def,maxSize:{value:a,message:j.toString(b)}})}size(a,b){return this.min(a,b).max(a,b)}nonempty(a){return this.min(1,a)}}cB.create=(a,b)=>new cB({valueType:a,minSize:null,maxSize:null,typeName:l.ZodSet,...bZ(b)});class cC extends b${constructor(){super(...arguments),this.validate=this.implement}_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==bL.function)return bR(b,{code:bN.invalid_type,expected:bL.function,received:b.parsedType}),bT;function c(a,c){return bQ({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,bP,bP].filter(a=>!!a),issueData:{code:bN.invalid_arguments,argumentsError:c}})}function d(a,c){return bQ({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,bP,bP].filter(a=>!!a),issueData:{code:bN.invalid_return_type,returnTypeError:c}})}let e={errorMap:b.common.contextualErrorMap},f=b.data;if(this._def.returns instanceof cI){let a=this;return bV(async function(...b){let g=new bO([]),h=await a._def.args.parseAsync(b,e).catch(a=>{throw g.addIssue(c(b,a)),g}),i=await Reflect.apply(f,this,h);return await a._def.returns._def.type.parseAsync(i,e).catch(a=>{throw g.addIssue(d(i,a)),g})})}{let a=this;return bV(function(...b){let g=a._def.args.safeParse(b,e);if(!g.success)throw new bO([c(b,g.error)]);let h=Reflect.apply(f,this,g.data),i=a._def.returns.safeParse(h,e);if(!i.success)throw new bO([d(h,i.error)]);return i.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...a){return new cC({...this._def,args:cy.create(a).rest(cp.create())})}returns(a){return new cC({...this._def,returns:a})}implement(a){return this.parse(a)}strictImplement(a){return this.parse(a)}static create(a,b,c){return new cC({args:a||cy.create([]).rest(cp.create()),returns:b||cp.create(),typeName:l.ZodFunction,...bZ(c)})}}class cD extends b${get schema(){return this._def.getter()}_parse(a){let{ctx:b}=this._processInputParams(a);return this._def.getter()._parse({data:b.data,path:b.path,parent:b})}}cD.create=(a,b)=>new cD({getter:a,typeName:l.ZodLazy,...bZ(b)});class cE extends b${_parse(a){if(a.data!==this._def.value){let b=this._getOrReturnCtx(a);return bR(b,{received:b.data,code:bN.invalid_literal,expected:this._def.value}),bT}return{status:"valid",value:a.data}}get value(){return this._def.value}}function cF(a,b){return new cG({values:a,typeName:l.ZodEnum,...bZ(b)})}cE.create=(a,b)=>new cE({value:a,typeName:l.ZodLiteral,...bZ(b)});class cG extends b${_parse(a){if("string"!=typeof a.data){let b=this._getOrReturnCtx(a),c=this._def.values;return bR(b,{expected:h.joinValues(c),received:b.parsedType,code:bN.invalid_type}),bT}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(a.data)){let b=this._getOrReturnCtx(a),c=this._def.values;return bR(b,{received:b.data,code:bN.invalid_enum_value,options:c}),bT}return bV(a.data)}get options(){return this._def.values}get enum(){let a={};for(let b of this._def.values)a[b]=b;return a}get Values(){let a={};for(let b of this._def.values)a[b]=b;return a}get Enum(){let a={};for(let b of this._def.values)a[b]=b;return a}extract(a,b=this._def){return cG.create(a,{...this._def,...b})}exclude(a,b=this._def){return cG.create(this.options.filter(b=>!a.includes(b)),{...this._def,...b})}}cG.create=cF;class cH extends b${_parse(a){let b=h.getValidEnumValues(this._def.values),c=this._getOrReturnCtx(a);if(c.parsedType!==bL.string&&c.parsedType!==bL.number){let a=h.objectValues(b);return bR(c,{expected:h.joinValues(a),received:c.parsedType,code:bN.invalid_type}),bT}if(this._cache||(this._cache=new Set(h.getValidEnumValues(this._def.values))),!this._cache.has(a.data)){let a=h.objectValues(b);return bR(c,{received:c.data,code:bN.invalid_enum_value,options:a}),bT}return bV(a.data)}get enum(){return this._def.values}}cH.create=(a,b)=>new cH({values:a,typeName:l.ZodNativeEnum,...bZ(b)});class cI extends b${unwrap(){return this._def.type}_parse(a){let{ctx:b}=this._processInputParams(a);return b.parsedType!==bL.promise&&!1===b.common.async?(bR(b,{code:bN.invalid_type,expected:bL.promise,received:b.parsedType}),bT):bV((b.parsedType===bL.promise?b.data:Promise.resolve(b.data)).then(a=>this._def.type.parseAsync(a,{path:b.path,errorMap:b.common.contextualErrorMap})))}}cI.create=(a,b)=>new cI({type:a,typeName:l.ZodPromise,...bZ(b)});class cJ extends b${innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===l.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=this._def.effect||null,e={addIssue:a=>{bR(c,a),a.fatal?b.abort():b.dirty()},get path(){return c.path}};if(e.addIssue=e.addIssue.bind(e),"preprocess"===d.type){let a=d.transform(c.data,e);if(c.common.async)return Promise.resolve(a).then(async a=>{if("aborted"===b.value)return bT;let d=await this._def.schema._parseAsync({data:a,path:c.path,parent:c});return"aborted"===d.status?bT:"dirty"===d.status||"dirty"===b.value?bU(d.value):d});{if("aborted"===b.value)return bT;let d=this._def.schema._parseSync({data:a,path:c.path,parent:c});return"aborted"===d.status?bT:"dirty"===d.status||"dirty"===b.value?bU(d.value):d}}if("refinement"===d.type){let a=a=>{let b=d.refinement(a,e);if(c.common.async)return Promise.resolve(b);if(b instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(c=>"aborted"===c.status?bT:("dirty"===c.status&&b.dirty(),a(c.value).then(()=>({status:b.value,value:c.value}))));{let d=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===d.status?bT:("dirty"===d.status&&b.dirty(),a(d.value),{status:b.value,value:d.value})}}if("transform"===d.type)if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(a=>"valid"!==a.status?bT:Promise.resolve(d.transform(a.value,e)).then(a=>({status:b.value,value:a})));else{let a=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});if("valid"!==a.status)return bT;let f=d.transform(a.value,e);if(f instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:b.value,value:f}}h.assertNever(d)}}cJ.create=(a,b,c)=>new cJ({schema:a,typeName:l.ZodEffects,effect:b,...bZ(c)}),cJ.createWithPreprocess=(a,b,c)=>new cJ({schema:b,effect:{type:"preprocess",transform:a},typeName:l.ZodEffects,...bZ(c)});class cK extends b${_parse(a){return this._getType(a)===bL.undefined?bV(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}cK.create=(a,b)=>new cK({innerType:a,typeName:l.ZodOptional,...bZ(b)});class cL extends b${_parse(a){return this._getType(a)===bL.null?bV(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}cL.create=(a,b)=>new cL({innerType:a,typeName:l.ZodNullable,...bZ(b)});class cM extends b${_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return b.parsedType===bL.undefined&&(c=this._def.defaultValue()),this._def.innerType._parse({data:c,path:b.path,parent:b})}removeDefault(){return this._def.innerType}}cM.create=(a,b)=>new cM({innerType:a,typeName:l.ZodDefault,defaultValue:"function"==typeof b.default?b.default:()=>b.default,...bZ(b)});class cN extends b${_parse(a){let{ctx:b}=this._processInputParams(a),c={...b,common:{...b.common,issues:[]}},d=this._def.innerType._parse({data:c.data,path:c.path,parent:{...c}});return bW(d)?d.then(a=>({status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new bO(c.common.issues)},input:c.data})})):{status:"valid",value:"valid"===d.status?d.value:this._def.catchValue({get error(){return new bO(c.common.issues)},input:c.data})}}removeCatch(){return this._def.innerType}}cN.create=(a,b)=>new cN({innerType:a,typeName:l.ZodCatch,catchValue:"function"==typeof b.catch?b.catch:()=>b.catch,...bZ(b)});class cO extends b${_parse(a){if(this._getType(a)!==bL.nan){let b=this._getOrReturnCtx(a);return bR(b,{code:bN.invalid_type,expected:bL.nan,received:b.parsedType}),bT}return{status:"valid",value:a.data}}}cO.create=a=>new cO({typeName:l.ZodNaN,...bZ(a)}),Symbol("zod_brand");class cP extends b${_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return this._def.type._parse({data:c,path:b.path,parent:b})}unwrap(){return this._def.type}}class cQ extends b${_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?bT:"dirty"===a.status?(b.dirty(),bU(a.value)):this._def.out._parseAsync({data:a.value,path:c.path,parent:c})})();{let a=this._def.in._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?bT:"dirty"===a.status?(b.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:c.path,parent:c})}}static create(a,b){return new cQ({in:a,out:b,typeName:l.ZodPipeline})}}class cR extends b${_parse(a){let b=this._def.innerType._parse(a),c=a=>("valid"===a.status&&(a.value=Object.freeze(a.value)),a);return bW(b)?b.then(a=>c(a)):c(b)}unwrap(){return this._def.innerType}}cR.create=(a,b)=>new cR({innerType:a,typeName:l.ZodReadonly,...bZ(b)}),ct.lazycreate,function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"}(l||(l={})),cg.create,ch.create,cO.create,ci.create,cj.create,ck.create,cl.create,cm.create,cn.create,co.create,cp.create,cq.create,cr.create,cs.create;var cS=ct.create;function cT(a,b,c){function d(c,d){var e;for(let f in Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(e=c._zod).traits??(e.traits=new Set),c._zod.traits.add(a),b(c,d),g.prototype)f in c||Object.defineProperty(c,f,{value:g.prototype[f].bind(c)});c._zod.constr=g,c._zod.def=d}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}ct.strictCreate,cu.create,cw.create,cx.create,cy.create,cz.create,cA.create,cB.create,cC.create,cD.create,cE.create,cG.create,cH.create,cI.create,cJ.create,cK.create,cL.create,cJ.createWithPreprocess,cQ.create,Object.freeze({status:"aborted"}),Symbol("zod_brand");class cU extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}var cV={};function cW(a){return a&&Object.assign(cV,a),cV}var cX={};function cY(a){return a}function cZ(a){return a}function c$(a){}function c_(a){throw Error()}function c0(a){}function c1(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}function c2(a,b="|"){return a.map(a=>dr(a)).join(b)}function c3(a,b){return"bigint"==typeof b?b.toString():b}function c4(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function c5(a){return null==a}function c6(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}function c7(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}function c8(a,b,c){Object.defineProperty(a,b,{get(){{let d=c();return a[b]=d,d}},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function c9(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function da(a,b){return b?b.reduce((a,b)=>a?.[b],a):a}function db(a){let b=Object.keys(a);return Promise.all(b.map(b=>a[b])).then(a=>{let c={};for(let d=0;d<b.length;d++)c[b[d]]=a[d];return c})}function dc(a=10){let b="abcdefghijklmnopqrstuvwxyz",c="";for(let d=0;d<a;d++)c+=b[Math.floor(Math.random()*b.length)];return c}function dd(a){return JSON.stringify(a)}E(cX,{unwrapMessage:()=>dD,stringifyPrimitive:()=>dr,required:()=>dA,randomString:()=>dc,propertyKeyTypes:()=>dk,promiseAllObject:()=>db,primitiveTypes:()=>dl,prefixIssues:()=>dC,pick:()=>dv,partial:()=>dz,optionalKeys:()=>ds,omit:()=>dw,numKeys:()=>di,nullish:()=>c5,normalizeParams:()=>dp,merge:()=>dy,jsonStringifyReplacer:()=>c3,joinValues:()=>c2,issue:()=>dH,isPlainObject:()=>dh,isObject:()=>df,getSizableOrigin:()=>dF,getParsedType:()=>dj,getLengthableOrigin:()=>dG,getEnumValues:()=>c1,getElementAtPath:()=>da,floatSafeRemainder:()=>c7,finalizeIssue:()=>dE,extend:()=>dx,escapeRegex:()=>dm,esc:()=>dd,defineLazy:()=>c8,createTransparentProxy:()=>dq,clone:()=>dn,cleanRegex:()=>c6,cleanEnum:()=>dI,captureStackTrace:()=>de,cached:()=>c4,assignProp:()=>c9,assertNotEqual:()=>cZ,assertNever:()=>c_,assertIs:()=>c$,assertEqual:()=>cY,assert:()=>c0,allowsEval:()=>dg,aborted:()=>dB,NUMBER_FORMAT_RANGES:()=>dt,Class:()=>dJ,BIGINT_FORMAT_RANGES:()=>du});var de=Error.captureStackTrace?Error.captureStackTrace:(...a)=>{};function df(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}var dg=c4(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function dh(a){if(!1===df(a))return!1;let b=a.constructor;if(void 0===b)return!0;let c=b.prototype;return!1!==df(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}function di(a){let b=0;for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b++;return b}var dj=a=>{let b=typeof a;switch(b){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(a)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return"promise";if("undefined"!=typeof Map&&a instanceof Map)return"map";if("undefined"!=typeof Set&&a instanceof Set)return"set";if("undefined"!=typeof Date&&a instanceof Date)return"date";if("undefined"!=typeof File&&a instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${b}`)}},dk=new Set(["string","number","symbol"]),dl=new Set(["string","number","bigint","boolean","symbol","undefined"]);function dm(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function dn(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function dp(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}function dq(a){let b;return new Proxy({},{get:(c,d,e)=>(b??(b=a()),Reflect.get(b,d,e)),set:(c,d,e,f)=>(b??(b=a()),Reflect.set(b,d,e,f)),has:(c,d)=>(b??(b=a()),Reflect.has(b,d)),deleteProperty:(c,d)=>(b??(b=a()),Reflect.deleteProperty(b,d)),ownKeys:c=>(b??(b=a()),Reflect.ownKeys(b)),getOwnPropertyDescriptor:(c,d)=>(b??(b=a()),Reflect.getOwnPropertyDescriptor(b,d)),defineProperty:(c,d,e)=>(b??(b=a()),Reflect.defineProperty(b,d,e))})}function dr(a){return"bigint"==typeof a?a.toString()+"n":"string"==typeof a?`"${a}"`:`${a}`}function ds(a){return Object.keys(a).filter(b=>"optional"===a[b]._zod.optin&&"optional"===a[b]._zod.optout)}var dt={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},du={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function dv(a,b){let c={},d=a._zod.def;for(let a in b){if(!(a in d.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&(c[a]=d.shape[a])}return dn(a,{...a._zod.def,shape:c,checks:[]})}function dw(a,b){let c={...a._zod.def.shape},d=a._zod.def;for(let a in b){if(!(a in d.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete c[a]}return dn(a,{...a._zod.def,shape:c,checks:[]})}function dx(a,b){if(!dh(b))throw Error("Invalid input to extend: expected a plain object");let c={...a._zod.def,get shape(){let c={...a._zod.def.shape,...b};return c9(this,"shape",c),c},checks:[]};return dn(a,c)}function dy(a,b){return dn(a,{...a._zod.def,get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return c9(this,"shape",c),c},catchall:b._zod.def.catchall,checks:[]})}function dz(a,b,c){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return dn(b,{...b._zod.def,shape:e,checks:[]})}function dA(a,b,c){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return dn(b,{...b._zod.def,shape:e,checks:[]})}function dB(a,b=0){for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function dC(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function dD(a){return"string"==typeof a?a:a?.message}function dE(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=dD(a.inst?._zod.def?.error?.(a))??dD(b?.error?.(a))??dD(c.customError?.(a))??dD(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function dF(a){return a instanceof Set?"set":a instanceof Map?"map":a instanceof File?"file":"unknown"}function dG(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function dH(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}function dI(a){return Object.entries(a).filter(([a,b])=>Number.isNaN(Number.parseInt(a,10))).map(a=>a[1])}class dJ{constructor(...a){}}var dK=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),Object.defineProperty(a,"message",{get:()=>JSON.stringify(b,c3,2),enumerable:!0})},dL=cT("$ZodError",dK),dM=cT("$ZodError",dK,{Parent:Error}),dN=a=>(b,c,d,e)=>{let f=d?Object.assign(d,{async:!1}):{async:!1},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise)throw new cU;if(g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>dE(a,f,cW())));throw de(b,e?.callee),b}return g.value},dO=dN(dM),dP=a=>async(b,c,d,e)=>{let f=d?Object.assign(d,{async:!0}):{async:!0},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise&&(g=await g),g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>dE(a,f,cW())));throw de(b,e?.callee),b}return g.value},dQ=dP(dM),dR=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new cU;return f.issues.length?{success:!1,error:new(a??dL)(f.issues.map(a=>dE(a,e,cW())))}:{success:!0,data:f.value}},dS=dR(dM),dT=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>dE(a,e,cW())))}:{success:!0,data:f.value}},dU=dT(dM),dV=/^[cC][^\s-]{8,}$/,dW=/^[0-9a-z]+$/,dX=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,dY=/^[0-9a-vA-V]{20}$/,dZ=/^[A-Za-z0-9]{27}$/,d$=/^[a-zA-Z0-9_-]{21}$/,d_=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,d0=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,d1=a=>a?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,d2=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,d3=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,d4=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,d5=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,d6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,d7=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,d8=/^[A-Za-z0-9_-]*$/,d9=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,ea=/^\+(?:[0-9]){6,14}[0-9]$/,eb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ec=RegExp(`^${eb}$`);function ed(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}var ee=/^\d+$/,ef=/^-?\d+(?:\.\d+)?/i,eg=/true|false/i,eh=/null/i,ei=/^[^A-Z]*$/,ej=/^[^a-z]*$/,ek=cT("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),el={number:"number",bigint:"bigint",object:"date"},em=cT("$ZodCheckLessThan",(a,b)=>{ek.init(a,b);let c=el[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.maximum:c.exclusiveMaximum)??1/0;b.value<d&&(b.inclusive?c.maximum=b.value:c.exclusiveMaximum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value<=b.value:d.value<b.value)||d.issues.push({origin:c,code:"too_big",maximum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),en=cT("$ZodCheckGreaterThan",(a,b)=>{ek.init(a,b);let c=el[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.minimum:c.exclusiveMinimum)??-1/0;b.value>d&&(b.inclusive?c.minimum=b.value:c.exclusiveMinimum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value>=b.value:d.value>b.value)||d.issues.push({origin:c,code:"too_small",minimum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),eo=cT("$ZodCheckMultipleOf",(a,b)=>{ek.init(a,b),a._zod.onattach.push(a=>{var c;(c=a._zod.bag).multipleOf??(c.multipleOf=b.value)}),a._zod.check=c=>{if(typeof c.value!=typeof b.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof c.value?c.value%b.value===BigInt(0):0===c7(c.value,b.value))||c.issues.push({origin:typeof c.value,code:"not_multiple_of",divisor:b.value,input:c.value,inst:a,continue:!b.abort})}}),ep=cT("$ZodCheckNumberFormat",(a,b)=>{ek.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=dt[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=ee)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inst:a})}}),eq=cT("$ZodCheckMaxLength",(a,b)=>{ek.init(a,b),a._zod.when=a=>{let b=a.value;return!c5(b)&&void 0!==b.length},a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=dG(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),er=cT("$ZodCheckMinLength",(a,b)=>{ek.init(a,b),a._zod.when=a=>{let b=a.value;return!c5(b)&&void 0!==b.length},a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=dG(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),es=cT("$ZodCheckLengthEquals",(a,b)=>{ek.init(a,b),a._zod.when=a=>{let b=a.value;return!c5(b)&&void 0!==b.length},a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=dG(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),et=cT("$ZodCheckStringFormat",(a,b)=>{var c,d;ek.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})}),eu=cT("$ZodCheckRegex",(a,b)=>{et.init(a,b),a._zod.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:"regex",input:c.value,pattern:b.pattern.toString(),inst:a,continue:!b.abort})}}),ev=cT("$ZodCheckLowerCase",(a,b)=>{b.pattern??(b.pattern=ei),et.init(a,b)}),ew=cT("$ZodCheckUpperCase",(a,b)=>{b.pattern??(b.pattern=ej),et.init(a,b)}),ex=cT("$ZodCheckIncludes",(a,b)=>{ek.init(a,b);let c=dm(b.includes),d=new RegExp("number"==typeof b.position?`^.{${b.position}}${c}`:c);b.pattern=d,a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(d)}),a._zod.check=c=>{c.value.includes(b.includes,b.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:b.includes,input:c.value,inst:a,continue:!b.abort})}}),ey=cT("$ZodCheckStartsWith",(a,b)=>{ek.init(a,b);let c=RegExp(`^${dm(b.prefix)}.*`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.startsWith(b.prefix)||c.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:b.prefix,input:c.value,inst:a,continue:!b.abort})}}),ez=cT("$ZodCheckEndsWith",(a,b)=>{ek.init(a,b);let c=RegExp(`.*${dm(b.suffix)}$`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.endsWith(b.suffix)||c.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:b.suffix,input:c.value,inst:a,continue:!b.abort})}}),eA=cT("$ZodCheckOverwrite",(a,b)=>{ek.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});class eB{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split(`
`).filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join(`
`))}}var eC={major:4,minor:0,patch:0},eD=cT("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=eC;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=dB(a);for(let f of b){if(f._zod.when){if(!f._zod.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new cU;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=dB(a,b)))});else{if(a.issues.length===b)continue;e||(e=dB(a,b))}}return d?d.then(()=>a):a};a._zod.run=(c,e)=>{let f=a._zod.parse(c,e);if(f instanceof Promise){if(!1===e.async)throw new cU;return f.then(a=>b(a,d,e))}return b(f,d,e)}}a["~standard"]={validate:b=>{try{let c=dS(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return dU(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),eE=cT("$ZodString",(a,b)=>{eD.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??(a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)})(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),eF=cT("$ZodStringFormat",(a,b)=>{et.init(a,b),eE.init(a,b)}),eG=cT("$ZodGUID",(a,b)=>{b.pattern??(b.pattern=d0),eF.init(a,b)}),eH=cT("$ZodUUID",(a,b)=>{if(b.version){let a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[b.version];if(void 0===a)throw Error(`Invalid UUID version: "${b.version}"`);b.pattern??(b.pattern=d1(a))}else b.pattern??(b.pattern=d1());eF.init(a,b)}),eI=cT("$ZodEmail",(a,b)=>{b.pattern??(b.pattern=d2),eF.init(a,b)}),eJ=cT("$ZodURL",(a,b)=>{eF.init(a,b),a._zod.check=c=>{try{let d=c.value,e=new URL(d),f=e.href;b.hostname&&(b.hostname.lastIndex=0,b.hostname.test(e.hostname)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:d9.source,input:c.value,inst:a,continue:!b.abort})),b.protocol&&(b.protocol.lastIndex=0,b.protocol.test(e.protocol.endsWith(":")?e.protocol.slice(0,-1):e.protocol)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:b.protocol.source,input:c.value,inst:a,continue:!b.abort})),!d.endsWith("/")&&f.endsWith("/")?c.value=f.slice(0,-1):c.value=f;return}catch(d){c.issues.push({code:"invalid_format",format:"url",input:c.value,inst:a,continue:!b.abort})}}}),eK=cT("$ZodEmoji",(a,b)=>{b.pattern??(b.pattern=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),eF.init(a,b)}),eL=cT("$ZodNanoID",(a,b)=>{b.pattern??(b.pattern=d$),eF.init(a,b)}),eM=cT("$ZodCUID",(a,b)=>{b.pattern??(b.pattern=dV),eF.init(a,b)}),eN=cT("$ZodCUID2",(a,b)=>{b.pattern??(b.pattern=dW),eF.init(a,b)}),eO=cT("$ZodULID",(a,b)=>{b.pattern??(b.pattern=dX),eF.init(a,b)}),eP=cT("$ZodXID",(a,b)=>{b.pattern??(b.pattern=dY),eF.init(a,b)}),eQ=cT("$ZodKSUID",(a,b)=>{b.pattern??(b.pattern=dZ),eF.init(a,b)}),eR=cT("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=function(a){let b=ed({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-]\\d{2}:\\d{2})");let d=`${b}(?:${c.join("|")})`;return RegExp(`^${eb}T(?:${d})$`)}(b)),eF.init(a,b)}),eS=cT("$ZodISODate",(a,b)=>{b.pattern??(b.pattern=ec),eF.init(a,b)}),eT=cT("$ZodISOTime",(a,b)=>{b.pattern??(b.pattern=RegExp(`^${ed(b)}$`)),eF.init(a,b)}),eU=cT("$ZodISODuration",(a,b)=>{b.pattern??(b.pattern=d_),eF.init(a,b)}),eV=cT("$ZodIPv4",(a,b)=>{b.pattern??(b.pattern=d3),eF.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.format="ipv4"})}),eW=cT("$ZodIPv6",(a,b)=>{b.pattern??(b.pattern=d4),eF.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.format="ipv6"}),a._zod.check=c=>{try{new URL(`http://[${c.value}]`)}catch{c.issues.push({code:"invalid_format",format:"ipv6",input:c.value,inst:a,continue:!b.abort})}}}),eX=cT("$ZodCIDRv4",(a,b)=>{b.pattern??(b.pattern=d5),eF.init(a,b)}),eY=cT("$ZodCIDRv6",(a,b)=>{b.pattern??(b.pattern=d6),eF.init(a,b),a._zod.check=c=>{let[d,e]=c.value.split("/");try{if(!e)throw Error();let a=Number(e);if(`${a}`!==e||a<0||a>128)throw Error();new URL(`http://[${d}]`)}catch{c.issues.push({code:"invalid_format",format:"cidrv6",input:c.value,inst:a,continue:!b.abort})}}});function eZ(a){if(""===a)return!0;if(a.length%4!=0)return!1;try{return atob(a),!0}catch{return!1}}var e$=cT("$ZodBase64",(a,b)=>{b.pattern??(b.pattern=d7),eF.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64"}),a._zod.check=c=>{eZ(c.value)||c.issues.push({code:"invalid_format",format:"base64",input:c.value,inst:a,continue:!b.abort})}}),e_=cT("$ZodBase64URL",(a,b)=>{b.pattern??(b.pattern=d8),eF.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64url"}),a._zod.check=c=>{!function(a){if(!d8.test(a))return!1;let b=a.replace(/[-_]/g,a=>"-"===a?"+":"/");return eZ(b.padEnd(4*Math.ceil(b.length/4),"="))}(c.value)&&c.issues.push({code:"invalid_format",format:"base64url",input:c.value,inst:a,continue:!b.abort})}}),e0=cT("$ZodE164",(a,b)=>{b.pattern??(b.pattern=ea),eF.init(a,b)}),e1=cT("$ZodJWT",(a,b)=>{eF.init(a,b),a._zod.check=c=>{!function(a,b=null){try{let c=a.split(".");if(3!==c.length)return!1;let[d]=c;if(!d)return!1;let e=JSON.parse(atob(d));if("typ"in e&&e?.typ!=="JWT"||!e.alg||b&&(!("alg"in e)||e.alg!==b))return!1;return!0}catch{return!1}}(c.value,b.alg)&&c.issues.push({code:"invalid_format",format:"jwt",input:c.value,inst:a,continue:!b.abort})}}),e2=cT("$ZodNumber",(a,b)=>{eD.init(a,b),a._zod.pattern=a._zod.bag.pattern??ef,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}}),e3=cT("$ZodNumber",(a,b)=>{ep.init(a,b),e2.init(a,b)}),e4=cT("$ZodBoolean",(a,b)=>{eD.init(a,b),a._zod.pattern=eg,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),e5=cT("$ZodNull",(a,b)=>{eD.init(a,b),a._zod.pattern=eh,a._zod.values=new Set([null]),a._zod.parse=(b,c)=>{let d=b.value;return null===d||b.issues.push({expected:"null",code:"invalid_type",input:d,inst:a}),b}}),e6=cT("$ZodUnknown",(a,b)=>{eD.init(a,b),a._zod.parse=a=>a}),e7=cT("$ZodNever",(a,b)=>{eD.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)});function e8(a,b,c){a.issues.length&&b.issues.push(...dC(c,a.issues)),b.value[c]=a.value}var e9=cT("$ZodArray",(a,b)=>{eD.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>e8(b,c,a))):e8(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function fa(a,b,c){a.issues.length&&b.issues.push(...dC(c,a.issues)),b.value[c]=a.value}function fb(a,b,c,d){a.issues.length?void 0===d[c]?c in d?b.value[c]=void 0:b.value[c]=a.value:b.issues.push(...dC(c,a.issues)):void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}var fc=cT("$ZodObject",(a,b)=>{let c,d;eD.init(a,b);let e=c4(()=>{let a=Object.keys(b.shape);for(let c of a)if(!(b.shape[c]instanceof eD))throw Error(`Invalid element at key "${c}": expected a Zod schema`);let c=ds(b.shape);return{shape:b.shape,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(c)}});c8(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=!cV.jitless,g=f&&dg.value,h=b.catchall;a._zod.parse=(i,j)=>{d??(d=e.value);let k=i.value;if(!df(k))return i.issues.push({expected:"object",code:"invalid_type",input:k,inst:a}),i;let l=[];if(f&&g&&j?.async===!1&&!0!==j.jitless)c||(c=(a=>{let b=new eB(["shape","payload","ctx"]),c=e.value,d=a=>{let b=dd(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let f=Object.create(null),g=0;for(let a of c.keys)f[a]=`key_${g++}`;for(let a of(b.write("const newResult = {}"),c.keys))if(c.optionalKeys.has(a)){let c=f[a];b.write(`const ${c} = ${d(a)};`);let e=dd(a);b.write(`
        if (${c}.issues.length) {
          if (input[${e}] === undefined) {
            if (${e} in input) {
              newResult[${e}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${c}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${e}, ...iss.path] : [${e}],
              }))
            );
          }
        } else if (${c}.value === undefined) {
          if (${e} in input) newResult[${e}] = undefined;
        } else {
          newResult[${e}] = ${c}.value;
        }
        `)}else{let c=f[a];b.write(`const ${c} = ${d(a)};`),b.write(`
          if (${c}.issues.length) payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${dd(a)}, ...iss.path] : [${dd(a)}]
          })));`),b.write(`newResult[${dd(a)}] = ${c}.value`)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),i=c(i,j);else{i.value={};let a=d.shape;for(let b of d.keys){let c=a[b],d=c._zod.run({value:k[b],issues:[]},j),e="optional"===c._zod.optin&&"optional"===c._zod.optout;d instanceof Promise?l.push(d.then(a=>e?fb(a,i,b,k):fa(a,i,b))):e?fb(d,i,b,k):fa(d,i,b)}}if(!h)return l.length?Promise.all(l).then(()=>i):i;let m=[],n=d.keySet,o=h._zod,p=o.def.type;for(let a of Object.keys(k)){if(n.has(a))continue;if("never"===p){m.push(a);continue}let b=o.run({value:k[a],issues:[]},j);b instanceof Promise?l.push(b.then(b=>fa(b,i,a))):fa(b,i,a)}return(m.length&&i.issues.push({code:"unrecognized_keys",keys:m,input:k,inst:a}),l.length)?Promise.all(l).then(()=>i):i}});function fd(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;return b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>dE(a,d,cW())))}),b}var fe=cT("$ZodUnion",(a,b)=>{eD.init(a,b),c8(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),c8(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),c8(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),c8(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>c6(a.source)).join("|")})$`)}}),a._zod.parse=(c,d)=>{let e=!1,f=[];for(let a of b.options){let b=a._zod.run({value:c.value,issues:[]},d);if(b instanceof Promise)f.push(b),e=!0;else{if(0===b.issues.length)return b;f.push(b)}}return e?Promise.all(f).then(b=>fd(b,c,a,d)):fd(f,c,a,d)}}),ff=cT("$ZodDiscriminatedUnion",(a,b)=>{fe.init(a,b);let c=a._zod.parse;c8(a._zod,"propValues",()=>{let a={};for(let c of b.options){let d=c._zod.propValues;if(!d||0===Object.keys(d).length)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(c)}"`);for(let[b,c]of Object.entries(d))for(let d of(a[b]||(a[b]=new Set),c))a[b].add(d)}return a});let d=c4(()=>{let a=b.options,c=new Map;for(let d of a){let a=d._zod.propValues[b.discriminator];if(!a||0===a.size)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(d)}"`);for(let b of a){if(c.has(b))throw Error(`Duplicate discriminator value "${String(b)}"`);c.set(b,d)}}return c});a._zod.parse=(e,f)=>{let g=e.value;if(!df(g))return e.issues.push({code:"invalid_type",expected:"object",input:g,inst:a}),e;let h=d.value.get(g?.[b.discriminator]);return h?h._zod.run(e,f):b.unionFallback?c(e,f):(e.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:g,path:[b.discriminator],inst:a}),e)}}),fg=cT("$ZodIntersection",(a,b)=>{eD.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>fh(a,b,c)):fh(a,e,f)}});function fh(a,b,c){if(b.issues.length&&a.issues.push(...b.issues),c.issues.length&&a.issues.push(...c.issues),dB(a))return a;let d=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(dh(b)&&dh(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!d.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return a.value=d.data,a}var fi=cT("$ZodRecord",(a,b)=>{eD.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!dh(e))return c.issues.push({expected:"record",code:"invalid_type",input:e,inst:a}),c;let f=[];if(b.keyType._zod.values){let g,h=b.keyType._zod.values;for(let a of(c.value={},h))if("string"==typeof a||"number"==typeof a||"symbol"==typeof a){let g=b.valueType._zod.run({value:e[a],issues:[]},d);g instanceof Promise?f.push(g.then(b=>{b.issues.length&&c.issues.push(...dC(a,b.issues)),c.value[a]=b.value})):(g.issues.length&&c.issues.push(...dC(a,g.issues)),c.value[a]=g.value)}for(let a in e)h.has(a)||(g=g??[]).push(a);g&&g.length>0&&c.issues.push({code:"unrecognized_keys",input:e,inst:a,keys:g})}else for(let g of(c.value={},Reflect.ownKeys(e))){if("__proto__"===g)continue;let h=b.keyType._zod.run({value:g,issues:[]},d);if(h instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(h.issues.length){c.issues.push({origin:"record",code:"invalid_key",issues:h.issues.map(a=>dE(a,d,cW())),input:g,path:[g],inst:a}),c.value[h.value]=h.value;continue}let i=b.valueType._zod.run({value:e[g],issues:[]},d);i instanceof Promise?f.push(i.then(a=>{a.issues.length&&c.issues.push(...dC(g,a.issues)),c.value[h.value]=a.value})):(i.issues.length&&c.issues.push(...dC(g,i.issues)),c.value[h.value]=i.value)}return f.length?Promise.all(f).then(()=>c):c}}),fj=cT("$ZodEnum",(a,b)=>{eD.init(a,b);let c=c1(b.entries);a._zod.values=new Set(c),a._zod.pattern=RegExp(`^(${c.filter(a=>dk.has(typeof a)).map(a=>"string"==typeof a?dm(a):a.toString()).join("|")})$`),a._zod.parse=(b,d)=>{let e=b.value;return a._zod.values.has(e)||b.issues.push({code:"invalid_value",values:c,input:e,inst:a}),b}}),fk=cT("$ZodLiteral",(a,b)=>{eD.init(a,b),a._zod.values=new Set(b.values),a._zod.pattern=RegExp(`^(${b.values.map(a=>"string"==typeof a?dm(a):a?a.toString():String(a)).join("|")})$`),a._zod.parse=(c,d)=>{let e=c.value;return a._zod.values.has(e)||c.issues.push({code:"invalid_value",values:b.values,input:e,inst:a}),c}}),fl=cT("$ZodTransform",(a,b)=>{eD.init(a,b),a._zod.parse=(a,c)=>{let d=b.transform(a.value,a);if(c.async)return(d instanceof Promise?d:Promise.resolve(d)).then(b=>(a.value=b,a));if(d instanceof Promise)throw new cU;return a.value=d,a}}),fm=cT("$ZodOptional",(a,b)=>{eD.init(a,b),a._zod.optin="optional",a._zod.optout="optional",c8(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),c8(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${c6(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>"optional"===b.innerType._zod.optin?b.innerType._zod.run(a,c):void 0===a.value?a:b.innerType._zod.run(a,c)}),fn=cT("$ZodNullable",(a,b)=>{eD.init(a,b),c8(a._zod,"optin",()=>b.innerType._zod.optin),c8(a._zod,"optout",()=>b.innerType._zod.optout),c8(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${c6(a.source)}|null)$`):void 0}),c8(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),fo=cT("$ZodDefault",(a,b)=>{eD.init(a,b),a._zod.optin="optional",c8(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>fp(a,b)):fp(d,b)}});function fp(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}var fq=cT("$ZodPrefault",(a,b)=>{eD.init(a,b),a._zod.optin="optional",c8(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>(void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),fr=cT("$ZodNonOptional",(a,b)=>{eD.init(a,b),c8(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>fs(b,a)):fs(e,a)}});function fs(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}var ft=cT("$ZodCatch",(a,b)=>{eD.init(a,b),a._zod.optin="optional",c8(a._zod,"optout",()=>b.innerType._zod.optout),c8(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>dE(a,c,cW()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>dE(a,c,cW()))},input:a.value}),a.issues=[]),a)}}),fu=cT("$ZodPipe",(a,b)=>{eD.init(a,b),c8(a._zod,"values",()=>b.in._zod.values),c8(a._zod,"optin",()=>b.in._zod.optin),c8(a._zod,"optout",()=>b.out._zod.optout),a._zod.parse=(a,c)=>{let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>fv(a,b,c)):fv(d,b,c)}});function fv(a,b,c){return dB(a)?a:b.out._zod.run({value:a.value,issues:a.issues},c)}var fw=cT("$ZodReadonly",(a,b)=>{eD.init(a,b),c8(a._zod,"propValues",()=>b.innerType._zod.propValues),c8(a._zod,"values",()=>b.innerType._zod.values),c8(a._zod,"optin",()=>b.innerType._zod.optin),c8(a._zod,"optout",()=>b.innerType._zod.optout),a._zod.parse=(a,c)=>{let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(fx):fx(d)}});function fx(a){return a.value=Object.freeze(a.value),a}var fy=cT("$ZodCustom",(a,b)=>{ek.init(a,b),eD.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>fz(b,c,d,a));fz(e,c,d,a)}});function fz(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(dH(a))}}Symbol("ZodOutput"),Symbol("ZodInput");class fA{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...b){let c=b[0];if(this._map.set(a,c),c&&"object"==typeof c&&"id"in c){if(this._idmap.has(c.id))throw Error(`ID ${c.id} already exists in the registry`);this._idmap.set(c.id,a)}return this}remove(a){return this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};return delete c.id,{...c,...this._map.get(a)}}return this._map.get(a)}has(a){return this._map.has(a)}}var fB=new fA;function fC(a,b){return new a({type:"string",format:"guid",check:"string_format",abort:!1,...dp(b)})}function fD(a,b){return new em({check:"less_than",...dp(b),value:a,inclusive:!1})}function fE(a,b){return new em({check:"less_than",...dp(b),value:a,inclusive:!0})}function fF(a,b){return new en({check:"greater_than",...dp(b),value:a,inclusive:!1})}function fG(a,b){return new en({check:"greater_than",...dp(b),value:a,inclusive:!0})}function fH(a,b){return new eo({check:"multiple_of",...dp(b),value:a})}function fI(a,b){return new eq({check:"max_length",...dp(b),maximum:a})}function fJ(a,b){return new er({check:"min_length",...dp(b),minimum:a})}function fK(a,b){return new es({check:"length_equals",...dp(b),length:a})}function fL(a){return new eA({check:"overwrite",tx:a})}class fM{constructor(a){this.counter=0,this.metadataRegistry=a?.metadata??fB,this.target=a?.target??"draft-2020-12",this.unrepresentable=a?.unrepresentable??"throw",this.override=a?.override??(()=>{}),this.io=a?.io??"output",this.seen=new Map}process(a,b={path:[],schemaPath:[]}){var c;let d=a._zod.def,e=this.seen.get(a);if(e)return e.count++,b.schemaPath.includes(a)&&(e.cycle=b.path),e.schema;let f={schema:{},count:1,cycle:void 0,path:b.path};this.seen.set(a,f);let g=a._zod.toJSONSchema?.();if(g)f.schema=g;else{let c={...b,schemaPath:[...b.schemaPath,a],path:b.path},e=a._zod.parent;if(e)f.ref=e,this.process(e,c),this.seen.get(e).isParent=!0;else{let b=f.schema;switch(d.type){case"string":{b.type="string";let{minimum:c,maximum:d,format:e,patterns:g,contentEncoding:h}=a._zod.bag;if("number"==typeof c&&(b.minLength=c),"number"==typeof d&&(b.maxLength=d),e&&(b.format=({guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""})[e]??e,""===b.format&&delete b.format),h&&(b.contentEncoding=h),g&&g.size>0){let a=[...g];1===a.length?b.pattern=a[0].source:a.length>1&&(f.schema.allOf=[...a.map(a=>({..."draft-7"===this.target?{type:"string"}:{},pattern:a.source}))])}break}case"number":{let{minimum:c,maximum:d,format:e,multipleOf:f,exclusiveMaximum:g,exclusiveMinimum:h}=a._zod.bag;"string"==typeof e&&e.includes("int")?b.type="integer":b.type="number","number"==typeof h&&(b.exclusiveMinimum=h),"number"==typeof c&&(b.minimum=c,"number"==typeof h&&(h>=c?delete b.minimum:delete b.exclusiveMinimum)),"number"==typeof g&&(b.exclusiveMaximum=g),"number"==typeof d&&(b.maximum=d,"number"==typeof g&&(g<=d?delete b.maximum:delete b.exclusiveMaximum)),"number"==typeof f&&(b.multipleOf=f);break}case"boolean":case"success":b.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema");break;case"null":b.type="null";break;case"any":case"unknown":break;case"undefined":case"never":b.not={};break;case"void":if("throw"===this.unrepresentable)throw Error("Void cannot be represented in JSON Schema");break;case"date":if("throw"===this.unrepresentable)throw Error("Date cannot be represented in JSON Schema");break;case"array":{let{minimum:e,maximum:f}=a._zod.bag;"number"==typeof e&&(b.minItems=e),"number"==typeof f&&(b.maxItems=f),b.type="array",b.items=this.process(d.element,{...c,path:[...c.path,"items"]});break}case"object":{b.type="object",b.properties={};let a=d.shape;for(let d in a)b.properties[d]=this.process(a[d],{...c,path:[...c.path,"properties",d]});let e=new Set([...new Set(Object.keys(a))].filter(a=>{let b=d.shape[a]._zod;return"input"===this.io?void 0===b.optin:void 0===b.optout}));e.size>0&&(b.required=Array.from(e)),d.catchall?._zod.def.type==="never"?b.additionalProperties=!1:d.catchall?d.catchall&&(b.additionalProperties=this.process(d.catchall,{...c,path:[...c.path,"additionalProperties"]})):"output"===this.io&&(b.additionalProperties=!1);break}case"union":b.anyOf=d.options.map((a,b)=>this.process(a,{...c,path:[...c.path,"anyOf",b]}));break;case"intersection":{let a=this.process(d.left,{...c,path:[...c.path,"allOf",0]}),e=this.process(d.right,{...c,path:[...c.path,"allOf",1]}),f=a=>"allOf"in a&&1===Object.keys(a).length;b.allOf=[...f(a)?a.allOf:[a],...f(e)?e.allOf:[e]];break}case"tuple":{b.type="array";let e=d.items.map((a,b)=>this.process(a,{...c,path:[...c.path,"prefixItems",b]}));if("draft-2020-12"===this.target?b.prefixItems=e:b.items=e,d.rest){let a=this.process(d.rest,{...c,path:[...c.path,"items"]});"draft-2020-12"===this.target?b.items=a:b.additionalItems=a}d.rest&&(b.items=this.process(d.rest,{...c,path:[...c.path,"items"]}));let{minimum:f,maximum:g}=a._zod.bag;"number"==typeof f&&(b.minItems=f),"number"==typeof g&&(b.maxItems=g);break}case"record":b.type="object",b.propertyNames=this.process(d.keyType,{...c,path:[...c.path,"propertyNames"]}),b.additionalProperties=this.process(d.valueType,{...c,path:[...c.path,"additionalProperties"]});break;case"map":if("throw"===this.unrepresentable)throw Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw Error("Set cannot be represented in JSON Schema");break;case"enum":{let a=c1(d.entries);a.every(a=>"number"==typeof a)&&(b.type="number"),a.every(a=>"string"==typeof a)&&(b.type="string"),b.enum=a;break}case"literal":{let a=[];for(let b of d.values)if(void 0===b){if("throw"===this.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof b)if("throw"===this.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else a.push(Number(b));else a.push(b);if(0===a.length);else if(1===a.length){let c=a[0];b.type=null===c?"null":typeof c,b.const=c}else a.every(a=>"number"==typeof a)&&(b.type="number"),a.every(a=>"string"==typeof a)&&(b.type="string"),a.every(a=>"boolean"==typeof a)&&(b.type="string"),a.every(a=>null===a)&&(b.type="null"),b.enum=a;break}case"file":{let c={type:"string",format:"binary",contentEncoding:"binary"},{minimum:d,maximum:e,mime:f}=a._zod.bag;void 0!==d&&(c.minLength=d),void 0!==e&&(c.maxLength=e),f?1===f.length?(c.contentMediaType=f[0],Object.assign(b,c)):b.anyOf=f.map(a=>({...c,contentMediaType:a})):Object.assign(b,c);break}case"transform":if("throw"===this.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema");break;case"nullable":b.anyOf=[this.process(d.innerType,c),{type:"null"}];break;case"nonoptional":case"promise":case"optional":this.process(d.innerType,c),f.ref=d.innerType;break;case"default":this.process(d.innerType,c),f.ref=d.innerType,b.default=JSON.parse(JSON.stringify(d.defaultValue));break;case"prefault":this.process(d.innerType,c),f.ref=d.innerType,"input"===this.io&&(b._prefault=JSON.parse(JSON.stringify(d.defaultValue)));break;case"catch":{let a;this.process(d.innerType,c),f.ref=d.innerType;try{a=d.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}b.default=a;break}case"nan":if("throw"===this.unrepresentable)throw Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let c=a._zod.pattern;if(!c)throw Error("Pattern not found in template literal");b.type="string",b.pattern=c.source;break}case"pipe":{let a="input"===this.io?"transform"===d.in._zod.def.type?d.out:d.in:d.out;this.process(a,c),f.ref=a;break}case"readonly":this.process(d.innerType,c),f.ref=d.innerType,b.readOnly=!0;break;case"lazy":{let b=a._zod.innerType;this.process(b,c),f.ref=b;break}case"custom":if("throw"===this.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")}}}let h=this.metadataRegistry.get(a);return h&&Object.assign(f.schema,h),"input"===this.io&&function a(b,c){let d=c??{seen:new Set};if(d.seen.has(b))return!1;d.seen.add(b);let e=b._zod.def;switch(e.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":return!1;case"array":return a(e.element,d);case"object":for(let b in e.shape)if(a(e.shape[b],d))return!0;return!1;case"union":for(let b of e.options)if(a(b,d))return!0;return!1;case"intersection":return a(e.left,d)||a(e.right,d);case"tuple":for(let b of e.items)if(a(b,d))return!0;if(e.rest&&a(e.rest,d))return!0;return!1;case"record":case"map":return a(e.keyType,d)||a(e.valueType,d);case"set":return a(e.valueType,d);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return a(e.innerType,d);case"lazy":return a(e.getter(),d);case"transform":return!0;case"pipe":return a(e.in,d)||a(e.out,d)}throw Error(`Unknown schema type: ${e.type}`)}(a)&&(delete f.schema.examples,delete f.schema.default),"input"===this.io&&f.schema._prefault&&((c=f.schema).default??(c.default=f.schema._prefault)),delete f.schema._prefault,this.seen.get(a).schema}emit(a,b){let c={cycles:b?.cycles??"ref",reused:b?.reused??"inline",external:b?.external??void 0},d=this.seen.get(a);if(!d)throw Error("Unprocessed schema. This is a bug in Zod.");let e=a=>{let b="draft-2020-12"===this.target?"$defs":"definitions";if(c.external){let d=c.external.registry.get(a[0])?.id;if(d)return{ref:c.external.uri(d)};let e=a[1].defId??a[1].schema.id??`schema${this.counter++}`;return a[1].defId=e,{defId:e,ref:`${c.external.uri("__shared")}#/${b}/${e}`}}if(a[1]===d)return{ref:"#"};let e=`#/${b}/`,f=a[1].schema.id??`__schema${this.counter++}`;return{defId:f,ref:e+f}},f=a=>{if(a[1].schema.$ref)return;let b=a[1],{ref:c,defId:d}=e(a);b.def={...b.schema},d&&(b.defId=d);let f=b.schema;for(let a in f)delete f[a];f.$ref=c};for(let b of this.seen.entries()){let d=b[1];if(a===b[0]){f(b);continue}if(c.external){let d=c.external.registry.get(b[0])?.id;if(a!==b[0]&&d){f(b);continue}}if(this.metadataRegistry.get(b[0])?.id){f(b);continue}if(d.cycle){if("throw"===c.cycles)throw Error(`Cycle detected: #/${d.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);"ref"===c.cycles&&f(b);continue}if(d.count>1&&"ref"===c.reused){f(b);continue}}let g=(a,b)=>{let c=this.seen.get(a),d=c.def??c.schema,e={...d};if(null===c.ref)return;let f=c.ref;if(c.ref=null,f){g(f,b);let a=this.seen.get(f).schema;a.$ref&&"draft-7"===b.target?(d.allOf=d.allOf??[],d.allOf.push(a)):(Object.assign(d,a),Object.assign(d,e))}c.isParent||this.override({zodSchema:a,jsonSchema:d,path:c.path??[]})};for(let a of[...this.seen.entries()].reverse())g(a[0],{target:this.target});let h={};"draft-2020-12"===this.target?h.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?h.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),Object.assign(h,d.def);let i=c.external?.defs??{};for(let a of this.seen.entries()){let b=a[1];b.def&&b.defId&&(i[b.defId]=b.def)}!c.external&&Object.keys(i).length>0&&("draft-2020-12"===this.target?h.$defs=i:h.definitions=i);try{return JSON.parse(JSON.stringify(h))}catch(a){throw Error("Error converting schema to JSON.")}}}var fN=cT("ZodMiniType",(a,b)=>{if(!a._zod)throw Error("Uninitialized schema in ZodMiniType.");eD.init(a,b),a.def=b,a.parse=(b,c)=>dO(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>dS(a,b,c),a.parseAsync=async(b,c)=>dQ(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>dU(a,b,c),a.check=(...c)=>a.clone({...b,checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),a.clone=(b,c)=>dn(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a)}),fO=cT("ZodMiniObject",(a,b)=>{fc.init(a,b),fN.init(a,b),cX.defineLazy(a,"shape",()=>b.shape)});function fP(a,b){return new fO({type:"object",get shape(){return cX.assignProp(this,"shape",{...a}),this.shape},...cX.normalizeParams(b)})}function fQ(a){return!!a._zod}function fR(a){let b=Object.values(a);if(0===b.length)return fP({});let c=b.every(fQ),d=b.every(a=>!fQ(a));if(c)return fP(a);if(d)return cS(a);throw Error("Mixed Zod versions detected in object shape.")}function fS(a,b){return fQ(a)?dS(a,b):a.safeParse(b)}async function fT(a,b){return fQ(a)?await dU(a,b):await a.safeParseAsync(b)}function fU(a){var b,c;let d;if(a&&(d=fQ(a)?null==(c=null==(b=a._zod)?void 0:b.def)?void 0:c.shape:a.shape)){if("function"==typeof d)try{return d()}catch(a){return}return d}}function fV(a){var b;if(a){if("object"==typeof a&&!a._def&&!a._zod){let b=Object.values(a);if(b.length>0&&b.every(a=>"object"==typeof a&&null!==a&&(void 0!==a._def||void 0!==a._zod||"function"==typeof a.parse)))return fR(a)}if(fQ(a)){let c=null==(b=a._zod)?void 0:b.def;if(c&&("object"===c.type||void 0!==c.shape))return a}else if(void 0!==a.shape)return a}}function fW(a){if(a&&"object"==typeof a){if("message"in a&&"string"==typeof a.message)return a.message;if("issues"in a&&Array.isArray(a.issues)&&a.issues.length>0){let b=a.issues[0];if(b&&"object"==typeof b&&"message"in b)return String(b.message)}try{return JSON.stringify(a)}catch(a){}}return String(a)}function fX(a){var b;if(fQ(a)){let c=null==(b=a._zod)?void 0:b.def;if(c){if(void 0!==c.value)return c.value;if(Array.isArray(c.values)&&c.values.length>0)return c.values[0]}}let c=a._def;if(c){if(void 0!==c.value)return c.value;if(Array.isArray(c.values)&&c.values.length>0)return c.values[0]}let d=a.value;if(void 0!==d)return d}var fY={};E(fY,{time:()=>f2,duration:()=>f4,datetime:()=>f$,date:()=>f0,ZodISOTime:()=>f1,ZodISODuration:()=>f3,ZodISODateTime:()=>fZ,ZodISODate:()=>f_});var fZ=cT("ZodISODateTime",(a,b)=>{eR.init(a,b),gf.init(a,b)});function f$(a){return new fZ({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...dp(a)})}var f_=cT("ZodISODate",(a,b)=>{eS.init(a,b),gf.init(a,b)});function f0(a){return new f_({type:"string",format:"date",check:"string_format",...dp(a)})}var f1=cT("ZodISOTime",(a,b)=>{eT.init(a,b),gf.init(a,b)});function f2(a){return new f1({type:"string",format:"time",check:"string_format",precision:null,...dp(a)})}var f3=cT("ZodISODuration",(a,b)=>{eU.init(a,b),gf.init(a,b)});function f4(a){return new f3({type:"string",format:"duration",check:"string_format",...dp(a)})}var f5=(a,b)=>{dL.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>(function(a,b){let c=b||function(a){return a.message},d={_errors:[]},e=a=>{for(let b of a.issues)if("invalid_union"===b.code&&b.errors.length)b.errors.map(a=>e({issues:a}));else if("invalid_key"===b.code)e({issues:b.issues});else if("invalid_element"===b.code)e({issues:b.issues});else if(0===b.path.length)d._errors.push(c(b));else{let a=d,e=0;for(;e<b.path.length;){let d=b.path[e];e===b.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(c(b))):a[d]=a[d]||{_errors:[]},a=a[d],e++}}};return e(a),d})(a,b)},flatten:{value:b=>(function(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}})(a,b)},addIssue:{value:b=>a.issues.push(b)},addIssues:{value:b=>a.issues.push(...b)},isEmpty:{get:()=>0===a.issues.length}})};cT("ZodError",f5);var f6=cT("ZodError",f5,{Parent:Error}),f7=dN(f6),f8=dP(f6),f9=dR(f6),ga=dT(f6),gb=cT("ZodType",(a,b)=>(eD.init(a,b),a.def=b,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone({...b,checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),a.clone=(b,c)=>dn(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>f7(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>f9(a,b,c),a.parseAsync=async(b,c)=>f8(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>ga(a,b,c),a.spa=a.safeParseAsync,a.refine=(b,c)=>a.check(function(a,b={}){return new hc({type:"custom",check:"custom",fn:a,...dp(b)})}(b,c)),a.superRefine=b=>a.check(function(a,b){let c=function(a,b){let c=new ek({check:"custom",...cX.normalizeParams(b)});return c._zod.check=a,c}(b=>(b.addIssue=a=>{"string"==typeof a?b.issues.push(cX.issue(a,b.value,c._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=b.value),a.inst??(a.inst=c),a.continue??(a.continue=!c._zod.def.abort),b.issues.push(cX.issue(a)))},a(b.value,b)),void 0);return c}(b)),a.overwrite=b=>a.check(fL(b)),a.optional=()=>g2(a),a.nullable=()=>g4(a),a.nullish=()=>g2(g4(a)),a.nonoptional=b=>{var c,d;return c=a,d=b,new g7({type:"nonoptional",innerType:c,...cX.normalizeParams(d)})},a.array=()=>gL(a),a.or=b=>gQ([a,b]),a.and=b=>gU(a,b),a.transform=b=>ha(a,g0(b)),a.default=b=>(function(a,b){return new g5({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():b}})})(a,b),a.prefault=b=>(function(a,b){return new g6({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():b}})})(a,b),a.catch=b=>(function(a,b){return new g8({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})})(a,b),a.pipe=b=>ha(a,b),a.readonly=()=>new hb({type:"readonly",innerType:a}),a.describe=b=>{let c=a.clone();return fB.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>fB.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return fB.get(a);let c=a.clone();return fB.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a)),gc=cT("_ZodString",(a,b)=>{eE.init(a,b),gb.init(a,b);let c=a._zod.bag;a.format=c.format??null,a.minLength=c.minimum??null,a.maxLength=c.maximum??null,a.regex=(...b)=>a.check(function(a,b){return new eu({check:"string_format",format:"regex",...dp(b),pattern:a})}(...b)),a.includes=(...b)=>a.check(function(a,b){return new ex({check:"string_format",format:"includes",...dp(b),includes:a})}(...b)),a.startsWith=(...b)=>a.check(function(a,b){return new ey({check:"string_format",format:"starts_with",...dp(b),prefix:a})}(...b)),a.endsWith=(...b)=>a.check(function(a,b){return new ez({check:"string_format",format:"ends_with",...dp(b),suffix:a})}(...b)),a.min=(...b)=>a.check(fJ(...b)),a.max=(...b)=>a.check(fI(...b)),a.length=(...b)=>a.check(fK(...b)),a.nonempty=(...b)=>a.check(fJ(1,...b)),a.lowercase=b=>a.check(new ev({check:"string_format",format:"lowercase",...dp(b)})),a.uppercase=b=>a.check(new ew({check:"string_format",format:"uppercase",...dp(b)})),a.trim=()=>a.check(fL(a=>a.trim())),a.normalize=(...b)=>a.check(function(a){return fL(b=>b.normalize(a))}(...b)),a.toLowerCase=()=>a.check(fL(a=>a.toLowerCase())),a.toUpperCase=()=>a.check(fL(a=>a.toUpperCase()))}),gd=cT("ZodString",(a,b)=>{eE.init(a,b),gc.init(a,b),a.email=b=>a.check(new gg({type:"string",format:"email",check:"string_format",abort:!1,...dp(b)})),a.url=b=>a.check(new gj({type:"string",format:"url",check:"string_format",abort:!1,...dp(b)})),a.jwt=b=>a.check(new gy({type:"string",format:"jwt",check:"string_format",abort:!1,...dp(b)})),a.emoji=b=>a.check(new gk({type:"string",format:"emoji",check:"string_format",abort:!1,...dp(b)})),a.guid=b=>a.check(fC(gh,b)),a.uuid=b=>a.check(new gi({type:"string",format:"uuid",check:"string_format",abort:!1,...dp(b)})),a.uuidv4=b=>a.check(new gi({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...dp(b)})),a.uuidv6=b=>a.check(new gi({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...dp(b)})),a.uuidv7=b=>a.check(new gi({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...dp(b)})),a.nanoid=b=>a.check(new gl({type:"string",format:"nanoid",check:"string_format",abort:!1,...dp(b)})),a.guid=b=>a.check(fC(gh,b)),a.cuid=b=>a.check(new gm({type:"string",format:"cuid",check:"string_format",abort:!1,...dp(b)})),a.cuid2=b=>a.check(new gn({type:"string",format:"cuid2",check:"string_format",abort:!1,...dp(b)})),a.ulid=b=>a.check(new go({type:"string",format:"ulid",check:"string_format",abort:!1,...dp(b)})),a.base64=b=>a.check(new gv({type:"string",format:"base64",check:"string_format",abort:!1,...dp(b)})),a.base64url=b=>a.check(new gw({type:"string",format:"base64url",check:"string_format",abort:!1,...dp(b)})),a.xid=b=>a.check(new gp({type:"string",format:"xid",check:"string_format",abort:!1,...dp(b)})),a.ksuid=b=>a.check(new gq({type:"string",format:"ksuid",check:"string_format",abort:!1,...dp(b)})),a.ipv4=b=>a.check(new gr({type:"string",format:"ipv4",check:"string_format",abort:!1,...dp(b)})),a.ipv6=b=>a.check(new gs({type:"string",format:"ipv6",check:"string_format",abort:!1,...dp(b)})),a.cidrv4=b=>a.check(new gt({type:"string",format:"cidrv4",check:"string_format",abort:!1,...dp(b)})),a.cidrv6=b=>a.check(new gu({type:"string",format:"cidrv6",check:"string_format",abort:!1,...dp(b)})),a.e164=b=>a.check(new gx({type:"string",format:"e164",check:"string_format",abort:!1,...dp(b)})),a.datetime=b=>a.check(f$(b)),a.date=b=>a.check(f0(b)),a.time=b=>a.check(f2(b)),a.duration=b=>a.check(f4(b))});function ge(a){return new gd({type:"string",...dp(a)})}var gf=cT("ZodStringFormat",(a,b)=>{eF.init(a,b),gc.init(a,b)}),gg=cT("ZodEmail",(a,b)=>{eI.init(a,b),gf.init(a,b)}),gh=cT("ZodGUID",(a,b)=>{eG.init(a,b),gf.init(a,b)}),gi=cT("ZodUUID",(a,b)=>{eH.init(a,b),gf.init(a,b)}),gj=cT("ZodURL",(a,b)=>{eJ.init(a,b),gf.init(a,b)}),gk=cT("ZodEmoji",(a,b)=>{eK.init(a,b),gf.init(a,b)}),gl=cT("ZodNanoID",(a,b)=>{eL.init(a,b),gf.init(a,b)}),gm=cT("ZodCUID",(a,b)=>{eM.init(a,b),gf.init(a,b)}),gn=cT("ZodCUID2",(a,b)=>{eN.init(a,b),gf.init(a,b)}),go=cT("ZodULID",(a,b)=>{eO.init(a,b),gf.init(a,b)}),gp=cT("ZodXID",(a,b)=>{eP.init(a,b),gf.init(a,b)}),gq=cT("ZodKSUID",(a,b)=>{eQ.init(a,b),gf.init(a,b)}),gr=cT("ZodIPv4",(a,b)=>{eV.init(a,b),gf.init(a,b)}),gs=cT("ZodIPv6",(a,b)=>{eW.init(a,b),gf.init(a,b)}),gt=cT("ZodCIDRv4",(a,b)=>{eX.init(a,b),gf.init(a,b)}),gu=cT("ZodCIDRv6",(a,b)=>{eY.init(a,b),gf.init(a,b)}),gv=cT("ZodBase64",(a,b)=>{e$.init(a,b),gf.init(a,b)}),gw=cT("ZodBase64URL",(a,b)=>{e_.init(a,b),gf.init(a,b)}),gx=cT("ZodE164",(a,b)=>{e0.init(a,b),gf.init(a,b)}),gy=cT("ZodJWT",(a,b)=>{e1.init(a,b),gf.init(a,b)}),gz=cT("ZodNumber",(a,b)=>{e2.init(a,b),gb.init(a,b),a.gt=(b,c)=>a.check(fF(b,c)),a.gte=(b,c)=>a.check(fG(b,c)),a.min=(b,c)=>a.check(fG(b,c)),a.lt=(b,c)=>a.check(fD(b,c)),a.lte=(b,c)=>a.check(fE(b,c)),a.max=(b,c)=>a.check(fE(b,c)),a.int=b=>a.check(gC(b)),a.safe=b=>a.check(gC(b)),a.positive=b=>a.check(fF(0,b)),a.nonnegative=b=>a.check(fG(0,b)),a.negative=b=>a.check(fD(0,b)),a.nonpositive=b=>a.check(fE(0,b)),a.multipleOf=(b,c)=>a.check(fH(b,c)),a.step=(b,c)=>a.check(fH(b,c)),a.finite=()=>a;let c=a._zod.bag;a.minValue=Math.max(c.minimum??-1/0,c.exclusiveMinimum??-1/0)??null,a.maxValue=Math.min(c.maximum??1/0,c.exclusiveMaximum??1/0)??null,a.isInt=(c.format??"").includes("int")||Number.isSafeInteger(c.multipleOf??.5),a.isFinite=!0,a.format=c.format??null});function gA(a){return new gz({type:"number",checks:[],...dp(a)})}var gB=cT("ZodNumberFormat",(a,b)=>{e3.init(a,b),gz.init(a,b)});function gC(a){return new gB({type:"number",check:"number_format",abort:!1,format:"safeint",...dp(a)})}var gD=cT("ZodBoolean",(a,b)=>{e4.init(a,b),gb.init(a,b)});function gE(a){return new gD({type:"boolean",...dp(a)})}var gF=cT("ZodNull",(a,b)=>{e5.init(a,b),gb.init(a,b)});function gG(a){return new gF({type:"null",...dp(a)})}var gH=cT("ZodUnknown",(a,b)=>{e6.init(a,b),gb.init(a,b)});function gI(){return new gH({type:"unknown"})}var gJ=cT("ZodNever",(a,b)=>{e7.init(a,b),gb.init(a,b)}),gK=cT("ZodArray",(a,b)=>{e9.init(a,b),gb.init(a,b),a.element=b.element,a.min=(b,c)=>a.check(fJ(b,c)),a.nonempty=b=>a.check(fJ(1,b)),a.max=(b,c)=>a.check(fI(b,c)),a.length=(b,c)=>a.check(fK(b,c)),a.unwrap=()=>a.element});function gL(a,b){return new gK({type:"array",element:a,...dp(b)})}var gM=cT("ZodObject",(a,b)=>{fc.init(a,b),gb.init(a,b),cX.defineLazy(a,"shape",()=>b.shape),a.keyof=()=>gY(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:gI()}),a.loose=()=>a.clone({...a._zod.def,catchall:gI()}),a.strict=()=>a.clone({...a._zod.def,catchall:new gJ({type:"never",...dp(void 0)})}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>cX.extend(a,b),a.merge=b=>cX.merge(a,b),a.pick=b=>cX.pick(a,b),a.omit=b=>cX.omit(a,b),a.partial=(...b)=>cX.partial(g1,a,b[0]),a.required=(...b)=>cX.required(g7,a,b[0])});function gN(a,b){return new gM({type:"object",get shape(){return cX.assignProp(this,"shape",{...a}),this.shape},...cX.normalizeParams(b)})}function gO(a,b){return new gM({type:"object",get shape(){return cX.assignProp(this,"shape",{...a}),this.shape},catchall:gI(),...cX.normalizeParams(b)})}var gP=cT("ZodUnion",(a,b)=>{fe.init(a,b),gb.init(a,b),a.options=b.options});function gQ(a,b){return new gP({type:"union",options:a,...cX.normalizeParams(b)})}var gR=cT("ZodDiscriminatedUnion",(a,b)=>{gP.init(a,b),ff.init(a,b)});function gS(a,b,c){return new gR({type:"union",options:b,discriminator:a,...cX.normalizeParams(c)})}var gT=cT("ZodIntersection",(a,b)=>{fg.init(a,b),gb.init(a,b)});function gU(a,b){return new gT({type:"intersection",left:a,right:b})}var gV=cT("ZodRecord",(a,b)=>{fi.init(a,b),gb.init(a,b),a.keyType=b.keyType,a.valueType=b.valueType});function gW(a,b,c){return new gV({type:"record",keyType:a,valueType:b,...cX.normalizeParams(c)})}var gX=cT("ZodEnum",(a,b)=>{fj.init(a,b),gb.init(a,b),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new gX({...b,checks:[],...cX.normalizeParams(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new gX({...b,checks:[],...cX.normalizeParams(d),entries:e})}});function gY(a,b){return new gX({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...cX.normalizeParams(b)})}var gZ=cT("ZodLiteral",(a,b)=>{fk.init(a,b),gb.init(a,b),a.values=new Set(b.values),Object.defineProperty(a,"value",{get(){if(b.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return b.values[0]}})});function g$(a,b){return new gZ({type:"literal",values:Array.isArray(a)?a:[a],...cX.normalizeParams(b)})}var g_=cT("ZodTransform",(a,b)=>{fl.init(a,b),gb.init(a,b),a._zod.parse=(c,d)=>{c.addIssue=d=>{"string"==typeof d?c.issues.push(cX.issue(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),d.continue??(d.continue=!0),c.issues.push(cX.issue(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}});function g0(a){return new g_({type:"transform",transform:a})}var g1=cT("ZodOptional",(a,b)=>{fm.init(a,b),gb.init(a,b),a.unwrap=()=>a._zod.def.innerType});function g2(a){return new g1({type:"optional",innerType:a})}var g3=cT("ZodNullable",(a,b)=>{fn.init(a,b),gb.init(a,b),a.unwrap=()=>a._zod.def.innerType});function g4(a){return new g3({type:"nullable",innerType:a})}var g5=cT("ZodDefault",(a,b)=>{fo.init(a,b),gb.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap}),g6=cT("ZodPrefault",(a,b)=>{fq.init(a,b),gb.init(a,b),a.unwrap=()=>a._zod.def.innerType}),g7=cT("ZodNonOptional",(a,b)=>{fr.init(a,b),gb.init(a,b),a.unwrap=()=>a._zod.def.innerType}),g8=cT("ZodCatch",(a,b)=>{ft.init(a,b),gb.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap}),g9=cT("ZodPipe",(a,b)=>{fu.init(a,b),gb.init(a,b),a.in=b.in,a.out=b.out});function ha(a,b){return new g9({type:"pipe",in:a,out:b})}var hb=cT("ZodReadonly",(a,b)=>{fw.init(a,b),gb.init(a,b)}),hc=cT("ZodCustom",(a,b)=>{fy.init(a,b),gb.init(a,b)});cW({localeError:(()=>{let a={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}},b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return c=>{switch(c.code){case"invalid_type":return`Invalid input: expected ${c.expected}, received ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Invalid input: expected ${dr(c.values[0])}`;return`Invalid option: expected one of ${c2(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Too big: expected ${c.origin??"value"} to have ${b}${c.maximum.toString()} ${d.unit??"elements"}`;return`Too big: expected ${c.origin??"value"} to be ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Too small: expected ${c.origin} to have ${b}${c.minimum.toString()} ${d.unit}`;return`Too small: expected ${c.origin} to be ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Invalid string: must start with "${c.prefix}"`;if("ends_with"===c.format)return`Invalid string: must end with "${c.suffix}"`;if("includes"===c.format)return`Invalid string: must include "${c.includes}"`;if("regex"===c.format)return`Invalid string: must match pattern ${c.pattern}`;return`Invalid ${b[c.format]??c.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${c.divisor}`;case"unrecognized_keys":return`Unrecognized key${c.keys.length>1?"s":""}: ${c2(c.keys,", ")}`;case"invalid_key":return`Invalid key in ${c.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${c.origin}`}}})()});var hd="2025-11-25",he=[hd,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],hf="io.modelcontextprotocol/related-task",hg=function(a,b){let c=dp(void 0);return c.abort??(c.abort=!0),new hc({type:"custom",check:"custom",fn:a??(()=>!0),...c})}(a=>null!==a&&("object"==typeof a||"function"==typeof a)),hh=gQ([ge(),gA().int()]),hi=ge(),hj=gO({ttl:gQ([gA(),gG()]).optional(),pollInterval:gA().optional()}),hk=gO({taskId:ge()}),hl=gO({progressToken:hh.optional(),[hf]:hk.optional()}),hm=gO({task:hj.optional(),_meta:hl.optional()}),hn=gN({method:ge(),params:hm.optional()}),ho=gO({_meta:gN({[hf]:g2(hk)}).passthrough().optional()}),hp=gN({method:ge(),params:ho.optional()}),hq=gO({_meta:gO({[hf]:hk.optional()}).optional()}),hr=gQ([ge(),gA().int()]),hs=gN({jsonrpc:g$("2.0"),id:hr,...hn.shape}).strict(),ht=a=>hs.safeParse(a).success,hu=gN({jsonrpc:g$("2.0"),...hp.shape}).strict(),hv=gN({jsonrpc:g$("2.0"),id:hr,result:hq}).strict(),hw=a=>hv.safeParse(a).success;!function(a){a[a.ConnectionClosed=-32e3]="ConnectionClosed",a[a.RequestTimeout=-32001]="RequestTimeout",a[a.ParseError=-32700]="ParseError",a[a.InvalidRequest=-32600]="InvalidRequest",a[a.MethodNotFound=-32601]="MethodNotFound",a[a.InvalidParams=-32602]="InvalidParams",a[a.InternalError=-32603]="InternalError",a[a.UrlElicitationRequired=-32042]="UrlElicitationRequired"}(m||(m={}));var hx=gN({jsonrpc:g$("2.0"),id:hr,error:gN({code:gA().int(),message:ge(),data:g2(gI())})}).strict();gQ([hs,hu,hv,hx]);var hy=hq.strict(),hz=ho.extend({requestId:hr,reason:ge().optional()}),hA=hp.extend({method:g$("notifications/cancelled"),params:hz}),hB=gN({src:ge(),mimeType:ge().optional(),sizes:gL(ge()).optional()}),hC=gN({icons:gL(hB).optional()}),hD=gN({name:ge(),title:ge().optional()}),hE=hD.extend({...hD.shape,...hC.shape,version:ge(),websiteUrl:ge().optional()}),hF=gU(gN({applyDefaults:gE().optional()}),gW(ge(),gI())),hG=(d=a=>a&&"object"==typeof a&&!Array.isArray(a)&&0===Object.keys(a).length?{form:{}}:a,e=gU(gN({form:hF.optional(),url:hg.optional()}),gW(ge(),gI()).optional()),ha(g0(d),e)),hH=gN({list:g2(gN({}).passthrough()),cancel:g2(gN({}).passthrough()),requests:g2(gN({sampling:g2(gN({createMessage:g2(gN({}).passthrough())}).passthrough()),elicitation:g2(gN({create:g2(gN({}).passthrough())}).passthrough())}).passthrough())}).passthrough(),hI=gN({list:g2(gN({}).passthrough()),cancel:g2(gN({}).passthrough()),requests:g2(gN({tools:g2(gN({call:g2(gN({}).passthrough())}).passthrough())}).passthrough())}).passthrough(),hJ=gN({experimental:gW(ge(),hg).optional(),sampling:gN({context:hg.optional(),tools:hg.optional()}).optional(),elicitation:hG.optional(),roots:gN({listChanged:gE().optional()}).optional(),tasks:g2(hH)}),hK=hm.extend({protocolVersion:ge(),capabilities:hJ,clientInfo:hE}),hL=hn.extend({method:g$("initialize"),params:hK}),hM=gN({experimental:gW(ge(),hg).optional(),logging:hg.optional(),completions:hg.optional(),prompts:g2(gN({listChanged:g2(gE())})),resources:gN({subscribe:gE().optional(),listChanged:gE().optional()}).optional(),tools:gN({listChanged:gE().optional()}).optional(),tasks:g2(hI)}).passthrough(),hN=hq.extend({protocolVersion:ge(),capabilities:hM,serverInfo:hE,instructions:ge().optional()}),hO=hp.extend({method:g$("notifications/initialized")}),hP=hn.extend({method:g$("ping")}),hQ=gN({progress:gA(),total:g2(gA()),message:g2(ge())}),hR=gN({...ho.shape,...hQ.shape,progressToken:hh}),hS=hp.extend({method:g$("notifications/progress"),params:hR}),hT=hm.extend({cursor:hi.optional()}),hU=hn.extend({params:hT.optional()}),hV=hq.extend({nextCursor:g2(hi)}),hW=gN({taskId:ge(),status:gY(["working","input_required","completed","failed","cancelled"]),ttl:gQ([gA(),gG()]),createdAt:ge(),lastUpdatedAt:ge(),pollInterval:g2(gA()),statusMessage:g2(ge())}),hX=hq.extend({task:hW}),hY=ho.merge(hW),hZ=hp.extend({method:g$("notifications/tasks/status"),params:hY}),h$=hn.extend({method:g$("tasks/get"),params:hm.extend({taskId:ge()})}),h_=hq.merge(hW),h0=hn.extend({method:g$("tasks/result"),params:hm.extend({taskId:ge()})}),h1=hU.extend({method:g$("tasks/list")}),h2=hV.extend({tasks:gL(hW)}),h3=hn.extend({method:g$("tasks/cancel"),params:hm.extend({taskId:ge()})}),h4=hq.merge(hW),h5=gN({uri:ge(),mimeType:g2(ge()),_meta:gW(ge(),gI()).optional()}),h6=h5.extend({text:ge()}),h7=ge().refine(a=>{try{return atob(a),!0}catch(a){return!1}},{message:"Invalid Base64 string"}),h8=h5.extend({blob:h7}),h9=gN({audience:gL(gY(["user","assistant"])).optional(),priority:gA().min(0).max(1).optional(),lastModified:fY.datetime({offset:!0}).optional()}),ia=gN({...hD.shape,...hC.shape,uri:ge(),description:g2(ge()),mimeType:g2(ge()),annotations:h9.optional(),_meta:g2(gO({}))}),ib=gN({...hD.shape,...hC.shape,uriTemplate:ge(),description:g2(ge()),mimeType:g2(ge()),annotations:h9.optional(),_meta:g2(gO({}))}),ic=hU.extend({method:g$("resources/list")}),id=hV.extend({resources:gL(ia)}),ie=hU.extend({method:g$("resources/templates/list")}),ig=hV.extend({resourceTemplates:gL(ib)}),ih=hm.extend({uri:ge()}),ii=hn.extend({method:g$("resources/read"),params:ih}),ij=hq.extend({contents:gL(gQ([h6,h8]))}),ik=hp.extend({method:g$("notifications/resources/list_changed")}),il=hn.extend({method:g$("resources/subscribe"),params:ih}),im=hn.extend({method:g$("resources/unsubscribe"),params:ih}),io=ho.extend({uri:ge()}),ip=hp.extend({method:g$("notifications/resources/updated"),params:io}),iq=gN({name:ge(),description:g2(ge()),required:g2(gE())}),ir=gN({...hD.shape,...hC.shape,description:g2(ge()),arguments:g2(gL(iq)),_meta:g2(gO({}))}),is=hU.extend({method:g$("prompts/list")}),it=hV.extend({prompts:gL(ir)}),iu=hm.extend({name:ge(),arguments:gW(ge(),ge()).optional()}),iv=hn.extend({method:g$("prompts/get"),params:iu}),iw=gN({type:g$("text"),text:ge(),annotations:h9.optional(),_meta:gW(ge(),gI()).optional()}),ix=gN({type:g$("image"),data:h7,mimeType:ge(),annotations:h9.optional(),_meta:gW(ge(),gI()).optional()}),iy=gN({type:g$("audio"),data:h7,mimeType:ge(),annotations:h9.optional(),_meta:gW(ge(),gI()).optional()}),iz=gN({type:g$("tool_use"),name:ge(),id:ge(),input:gN({}).passthrough(),_meta:g2(gN({}).passthrough())}).passthrough(),iA=gN({type:g$("resource"),resource:gQ([h6,h8]),annotations:h9.optional(),_meta:gW(ge(),gI()).optional()}),iB=gQ([iw,ix,iy,ia.extend({type:g$("resource_link")}),iA]),iC=gN({role:gY(["user","assistant"]),content:iB}),iD=hq.extend({description:g2(ge()),messages:gL(iC)}),iE=hp.extend({method:g$("notifications/prompts/list_changed")}),iF=gN({title:ge().optional(),readOnlyHint:gE().optional(),destructiveHint:gE().optional(),idempotentHint:gE().optional(),openWorldHint:gE().optional()}),iG=gN({taskSupport:gY(["required","optional","forbidden"]).optional()}),iH=gN({...hD.shape,...hC.shape,description:ge().optional(),inputSchema:gN({type:g$("object"),properties:gW(ge(),hg).optional(),required:gL(ge()).optional()}).catchall(gI()),outputSchema:gN({type:g$("object"),properties:gW(ge(),hg).optional(),required:gL(ge()).optional()}).catchall(gI()).optional(),annotations:g2(iF),execution:g2(iG),_meta:gW(ge(),gI()).optional()}),iI=hU.extend({method:g$("tools/list")}),iJ=hV.extend({tools:gL(iH)}),iK=hq.extend({content:gL(iB).default([]),structuredContent:gW(ge(),gI()).optional(),isError:g2(gE())});iK.or(hq.extend({toolResult:gI()}));var iL=hm.extend({name:ge(),arguments:g2(gW(ge(),gI()))}),iM=hn.extend({method:g$("tools/call"),params:iL}),iN=hp.extend({method:g$("notifications/tools/list_changed")}),iO=gY(["debug","info","notice","warning","error","critical","alert","emergency"]),iP=hm.extend({level:iO}),iQ=hn.extend({method:g$("logging/setLevel"),params:iP}),iR=ho.extend({level:iO,logger:ge().optional(),data:gI()}),iS=hp.extend({method:g$("notifications/message"),params:iR}),iT=gN({name:ge().optional()}),iU=gN({hints:g2(gL(iT)),costPriority:g2(gA().min(0).max(1)),speedPriority:g2(gA().min(0).max(1)),intelligencePriority:g2(gA().min(0).max(1))}),iV=gN({mode:g2(gY(["auto","required","none"]))}),iW=gN({type:g$("tool_result"),toolUseId:ge().describe("The unique identifier for the corresponding tool call."),content:gL(iB).default([]),structuredContent:gN({}).passthrough().optional(),isError:g2(gE()),_meta:g2(gN({}).passthrough())}).passthrough(),iX=gS("type",[iw,ix,iy]),iY=gS("type",[iw,ix,iy,iz,iW]),iZ=gN({role:gY(["user","assistant"]),content:gQ([iY,gL(iY)]),_meta:g2(gN({}).passthrough())}).passthrough(),i$=hm.extend({messages:gL(iZ),modelPreferences:iU.optional(),systemPrompt:ge().optional(),includeContext:gY(["none","thisServer","allServers"]).optional(),temperature:gA().optional(),maxTokens:gA().int(),stopSequences:gL(ge()).optional(),metadata:hg.optional(),tools:g2(gL(iH)),toolChoice:g2(iV)}),i_=hn.extend({method:g$("sampling/createMessage"),params:i$}),i0=hq.extend({model:ge(),stopReason:g2(gY(["endTurn","stopSequence","maxTokens"]).or(ge())),role:gY(["user","assistant"]),content:iX}),i1=hq.extend({model:ge(),stopReason:g2(gY(["endTurn","stopSequence","maxTokens","toolUse"]).or(ge())),role:gY(["user","assistant"]),content:gQ([iY,gL(iY)])}),i2=gN({type:g$("boolean"),title:ge().optional(),description:ge().optional(),default:gE().optional()}),i3=gN({type:g$("string"),title:ge().optional(),description:ge().optional(),minLength:gA().optional(),maxLength:gA().optional(),format:gY(["email","uri","date","date-time"]).optional(),default:ge().optional()}),i4=gN({type:gY(["number","integer"]),title:ge().optional(),description:ge().optional(),minimum:gA().optional(),maximum:gA().optional(),default:gA().optional()}),i5=gN({type:g$("string"),title:ge().optional(),description:ge().optional(),enum:gL(ge()),default:ge().optional()}),i6=gN({type:g$("string"),title:ge().optional(),description:ge().optional(),oneOf:gL(gN({const:ge(),title:ge()})),default:ge().optional()}),i7=gN({type:g$("string"),title:ge().optional(),description:ge().optional(),enum:gL(ge()),enumNames:gL(ge()).optional(),default:ge().optional()}),i8=gQ([i5,i6]),i9=gQ([gN({type:g$("array"),title:ge().optional(),description:ge().optional(),minItems:gA().optional(),maxItems:gA().optional(),items:gN({type:g$("string"),enum:gL(ge())}),default:gL(ge()).optional()}),gN({type:g$("array"),title:ge().optional(),description:ge().optional(),minItems:gA().optional(),maxItems:gA().optional(),items:gN({anyOf:gL(gN({const:ge(),title:ge()}))}),default:gL(ge()).optional()})]),ja=gQ([i7,i8,i9]),jb=gQ([ja,i2,i3,i4]),jc=gQ([hm.extend({mode:g$("form").optional(),message:ge(),requestedSchema:gN({type:g$("object"),properties:gW(ge(),jb),required:gL(ge()).optional()})}),hm.extend({mode:g$("url"),message:ge(),elicitationId:ge(),url:ge().url()})]),jd=hn.extend({method:g$("elicitation/create"),params:jc}),je=ho.extend({elicitationId:ge()}),jf=hp.extend({method:g$("notifications/elicitation/complete"),params:je}),jg=hq.extend({action:gY(["accept","decline","cancel"]),content:(f=a=>null===a?void 0:a,g=gW(ge(),gQ([ge(),gA(),gE(),gL(ge())])).optional(),ha(g0(f),g))}),jh=gN({type:g$("ref/resource"),uri:ge()}),ji=gN({type:g$("ref/prompt"),name:ge()}),jj=hm.extend({ref:gQ([ji,jh]),argument:gN({name:ge(),value:ge()}),context:gN({arguments:gW(ge(),ge()).optional()}).optional()}),jk=hn.extend({method:g$("completion/complete"),params:jj}),jl=hq.extend({completion:gO({values:gL(ge()).max(100),total:g2(gA().int()),hasMore:g2(gE())})}),jm=gN({uri:ge().startsWith("file://"),name:ge().optional(),_meta:gW(ge(),gI()).optional()}),jn=hn.extend({method:g$("roots/list")}),jo=hq.extend({roots:gL(jm)}),jp=hp.extend({method:g$("notifications/roots/list_changed")});gQ([hP,hL,jk,iQ,iv,is,ic,ie,ii,il,im,iM,iI,h$,h0,h1]),gQ([hA,hS,hO,jp,hZ]),gQ([hy,i0,i1,jg,jo,h_,h2,hX]),gQ([hP,i_,jd,jn,h$,h0,h1]),gQ([hA,hS,iS,ip,ik,iN,iE,hZ,jf]),gQ([hy,hN,jl,iD,it,id,ig,ij,iK,iJ,h_,h2,hX]);class jq extends Error{constructor(a,b,c){super(`MCP error ${a}: ${b}`),this.code=a,this.data=c,this.name="McpError"}static fromError(a,b,c){return a===m.UrlElicitationRequired&&c&&c.elicitations?new jr(c.elicitations,b):new jq(a,b,c)}}class jr extends jq{constructor(a,b=`URL elicitation${a.length>1?"s":""} required`){super(m.UrlElicitationRequired,b,{elicitations:a})}get elicitations(){var a,b;return null!=(b=null==(a=this.data)?void 0:a.elicitations)?b:[]}}function js(a){return"completed"===a||"failed"===a||"cancelled"===a}var jt=Symbol("Let zodToJsonSchema decide on which parser to use"),ju={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"};function jv(a,b,c,d){d?.errorMessages&&c&&(a.errorMessage={...a.errorMessage,[b]:c})}function jw(a,b,c,d,e){a[b]=c,jv(a,b,d,e)}var jx=(a,b)=>{let c=0;for(;c<a.length&&c<b.length&&a[c]===b[c];c++);return[(a.length-c).toString(),...b.slice(c)].join("/")};function jy(a){if("openAi"!==a.target)return{};let b=[...a.basePath,a.definitionPath,a.openAiAnyTypeName];return a.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===a.$refStrategy?jx(b,a.currentPath):b.join("/")}}function jz(a,b){return jL(a.type._def,b)}var jA=void 0,jB={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===jA&&(jA=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),jA),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function jC(a,b){let c={type:"string"};if(a.checks)for(let d of a.checks)switch(d.kind){case"min":jw(c,"minLength","number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value,d.message,b);break;case"max":jw(c,"maxLength","number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value,d.message,b);break;case"email":switch(b.emailStrategy){case"format:email":jF(c,"email",d.message,b);break;case"format:idn-email":jF(c,"idn-email",d.message,b);break;case"pattern:zod":jG(c,jB.email,d.message,b)}break;case"url":jF(c,"uri",d.message,b);break;case"uuid":jF(c,"uuid",d.message,b);break;case"regex":jG(c,d.regex,d.message,b);break;case"cuid":jG(c,jB.cuid,d.message,b);break;case"cuid2":jG(c,jB.cuid2,d.message,b);break;case"startsWith":jG(c,RegExp(`^${jD(d.value,b)}`),d.message,b);break;case"endsWith":jG(c,RegExp(`${jD(d.value,b)}$`),d.message,b);break;case"datetime":jF(c,"date-time",d.message,b);break;case"date":jF(c,"date",d.message,b);break;case"time":jF(c,"time",d.message,b);break;case"duration":jF(c,"duration",d.message,b);break;case"length":jw(c,"minLength","number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value,d.message,b),jw(c,"maxLength","number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value,d.message,b);break;case"includes":jG(c,RegExp(jD(d.value,b)),d.message,b);break;case"ip":"v6"!==d.version&&jF(c,"ipv4",d.message,b),"v4"!==d.version&&jF(c,"ipv6",d.message,b);break;case"base64url":jG(c,jB.base64url,d.message,b);break;case"jwt":jG(c,jB.jwt,d.message,b);break;case"cidr":"v6"!==d.version&&jG(c,jB.ipv4Cidr,d.message,b),"v4"!==d.version&&jG(c,jB.ipv6Cidr,d.message,b);break;case"emoji":jG(c,jB.emoji(),d.message,b);break;case"ulid":jG(c,jB.ulid,d.message,b);break;case"base64":switch(b.base64Strategy){case"format:binary":jF(c,"binary",d.message,b);break;case"contentEncoding:base64":jw(c,"contentEncoding","base64",d.message,b);break;case"pattern:zod":jG(c,jB.base64,d.message,b)}break;case"nanoid":jG(c,jB.nanoid,d.message,b)}return c}function jD(a,b){return"escape"===b.patternStrategy?function(a){let b="";for(let c=0;c<a.length;c++)jE.has(a[c])||(b+="\\"),b+=a[c];return b}(a):a}var jE=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function jF(a,b,c,d){a.format||a.anyOf?.some(a=>a.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format,...a.errorMessage&&d.errorMessages&&{errorMessage:{format:a.errorMessage.format}}}),delete a.format,a.errorMessage&&(delete a.errorMessage.format,0===Object.keys(a.errorMessage).length&&delete a.errorMessage)),a.anyOf.push({format:b,...c&&d.errorMessages&&{errorMessage:{format:c}}})):jw(a,"format",b,c,d)}function jG(a,b,c,d){a.pattern||a.allOf?.some(a=>a.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern,...a.errorMessage&&d.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}}}),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,0===Object.keys(a.errorMessage).length&&delete a.errorMessage)),a.allOf.push({pattern:jH(b,d),...c&&d.errorMessages&&{errorMessage:{pattern:c}}})):jw(a,"pattern",jH(b,d),c,d)}function jH(a,b){if(!b.applyRegexFlags||!a.flags)return a.source;let c={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},d=c.i?a.source.toLowerCase():a.source,e="",f=!1,g=!1,h=!1;for(let a=0;a<d.length;a++){if(f){e+=d[a],f=!1;continue}if(c.i){if(g){if(d[a].match(/[a-z]/)){h?(e+=d[a],e+=`${d[a-2]}-${d[a]}`.toUpperCase(),h=!1):"-"===d[a+1]&&d[a+2]?.match(/[a-z]/)?(e+=d[a],h=!0):e+=`${d[a]}${d[a].toUpperCase()}`;continue}}else if(d[a].match(/[a-z]/)){e+=`[${d[a]}${d[a].toUpperCase()}]`;continue}}if(c.m){if("^"===d[a]){e+=`(^|(?<=[\r
]))`;continue}else if("$"===d[a]){e+=`($|(?=[\r
]))`;continue}}if(c.s&&"."===d[a]){e+=g?`${d[a]}\r
`:`[${d[a]}\r
]`;continue}e+=d[a],"\\"===d[a]?f=!0:g&&"]"===d[a]?g=!1:g||"["!==d[a]||(g=!0)}try{new RegExp(e)}catch{return console.warn(`Could not convert regex pattern at ${b.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return e}function jI(a,b){if("openAi"===b.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===b.target&&a.keyType?._def.typeName===l.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((c,d)=>({...c,[d]:jL(a.valueType._def,{...b,currentPath:[...b.currentPath,"properties",d]})??jy(b)}),{}),additionalProperties:b.rejectedAdditionalProperties};let c={type:"object",additionalProperties:jL(a.valueType._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]})??b.allowedAdditionalProperties};if("openApi3"===b.target)return c;if(a.keyType?._def.typeName===l.ZodString&&a.keyType._def.checks?.length){let{type:d,...e}=jC(a.keyType._def,b);return{...c,propertyNames:e}}if(a.keyType?._def.typeName===l.ZodEnum)return{...c,propertyNames:{enum:a.keyType._def.values}};if(a.keyType?._def.typeName===l.ZodBranded&&a.keyType._def.type._def.typeName===l.ZodString&&a.keyType._def.type._def.checks?.length){let{type:d,...e}=jz(a.keyType._def,b);return{...c,propertyNames:e}}return c}var jJ={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},jK=(a,b)=>{let c=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((a,c)=>jL(a._def,{...b,currentPath:[...b.currentPath,"anyOf",`${c}`]})).filter(a=>!!a&&(!b.strictUnions||"object"==typeof a&&Object.keys(a).length>0));return c.length?{anyOf:c}:void 0};function jL(a,b,c=!1){let d=b.seen.get(a);if(b.override){let e=b.override?.(a,b,d,c);if(e!==jt)return e}if(d&&!c){let a=jM(d,b);if(void 0!==a)return a}let e={def:a,path:b.currentPath,jsonSchema:void 0};b.seen.set(a,e);let f=((a,b,c)=>{switch(b){case l.ZodString:return jC(a,c);case l.ZodNumber:var d,e,f,g,h,i,j,k,m,n=a,o=c;let p={type:"number"};if(!n.checks)return p;for(let a of n.checks)switch(a.kind){case"int":p.type="integer",jv(p,"type",a.message,o);break;case"min":"jsonSchema7"===o.target?a.inclusive?jw(p,"minimum",a.value,a.message,o):jw(p,"exclusiveMinimum",a.value,a.message,o):(a.inclusive||(p.exclusiveMinimum=!0),jw(p,"minimum",a.value,a.message,o));break;case"max":"jsonSchema7"===o.target?a.inclusive?jw(p,"maximum",a.value,a.message,o):jw(p,"exclusiveMaximum",a.value,a.message,o):(a.inclusive||(p.exclusiveMaximum=!0),jw(p,"maximum",a.value,a.message,o));break;case"multipleOf":jw(p,"multipleOf",a.value,a.message,o)}return p;case l.ZodObject:return function(a,b){let c="openAi"===b.target,d={type:"object",properties:{}},e=[],f=a.shape();for(let a in f){let g=f[a];if(void 0===g||void 0===g._def)continue;let h=function(a){try{return a.isOptional()}catch{return!0}}(g);h&&c&&("ZodOptional"===g._def.typeName&&(g=g._def.innerType),g.isNullable()||(g=g.nullable()),h=!1);let i=jL(g._def,{...b,currentPath:[...b.currentPath,"properties",a],propertyPath:[...b.currentPath,"properties",a]});void 0!==i&&(d.properties[a]=i,h||e.push(a))}e.length&&(d.required=e);let g=function(a,b){if("ZodNever"!==a.catchall._def.typeName)return jL(a.catchall._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return b.allowedAdditionalProperties;case"strict":return b.rejectedAdditionalProperties;case"strip":return"strict"===b.removeAdditionalStrategy?b.allowedAdditionalProperties:b.rejectedAdditionalProperties}}(a,b);return void 0!==g&&(d.additionalProperties=g),d}(a,c);case l.ZodBigInt:var q=a,r=c;let s={type:"integer",format:"int64"};if(!q.checks)return s;for(let a of q.checks)switch(a.kind){case"min":"jsonSchema7"===r.target?a.inclusive?jw(s,"minimum",a.value,a.message,r):jw(s,"exclusiveMinimum",a.value,a.message,r):(a.inclusive||(s.exclusiveMinimum=!0),jw(s,"minimum",a.value,a.message,r));break;case"max":"jsonSchema7"===r.target?a.inclusive?jw(s,"maximum",a.value,a.message,r):jw(s,"exclusiveMaximum",a.value,a.message,r):(a.inclusive||(s.exclusiveMaximum=!0),jw(s,"maximum",a.value,a.message,r));break;case"multipleOf":jw(s,"multipleOf",a.value,a.message,r)}return s;case l.ZodBoolean:return{type:"boolean"};case l.ZodDate:return function a(b,c,d){let e=d??c.dateStrategy;if(Array.isArray(e))return{anyOf:e.map((d,e)=>a(b,c,d))};switch(e){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var f=b,g=c;let h={type:"integer",format:"unix-time"};if("openApi3"===g.target)return h;for(let a of f.checks)switch(a.kind){case"min":jw(h,"minimum",a.value,a.message,g);break;case"max":jw(h,"maximum",a.value,a.message,g)}return h}}(a,c);case l.ZodUndefined:return{not:jy(c)};case l.ZodNull:return"openApi3"===c.target?{enum:["null"],nullable:!0}:{type:"null"};case l.ZodArray:var t=a,u=c;let v={type:"array"};return t.type?._def&&t.type?._def?.typeName!==l.ZodAny&&(v.items=jL(t.type._def,{...u,currentPath:[...u.currentPath,"items"]})),t.minLength&&jw(v,"minItems",t.minLength.value,t.minLength.message,u),t.maxLength&&jw(v,"maxItems",t.maxLength.value,t.maxLength.message,u),t.exactLength&&(jw(v,"minItems",t.exactLength.value,t.exactLength.message,u),jw(v,"maxItems",t.exactLength.value,t.exactLength.message,u)),v;case l.ZodUnion:case l.ZodDiscriminatedUnion:var w=a,x=c;if("openApi3"===x.target)return jK(w,x);let y=w.options instanceof Map?Array.from(w.options.values()):w.options;if(y.every(a=>a._def.typeName in jJ&&(!a._def.checks||!a._def.checks.length))){let a=y.reduce((a,b)=>{let c=jJ[b._def.typeName];return c&&!a.includes(c)?[...a,c]:a},[]);return{type:a.length>1?a:a[0]}}if(y.every(a=>"ZodLiteral"===a._def.typeName&&!a.description)){let a=y.reduce((a,b)=>{let c=typeof b._def.value;switch(c){case"string":case"number":case"boolean":return[...a,c];case"bigint":return[...a,"integer"];case"object":if(null===b._def.value)return[...a,"null"];default:return a}},[]);if(a.length===y.length){let b=a.filter((a,b,c)=>c.indexOf(a)===b);return{type:b.length>1?b:b[0],enum:y.reduce((a,b)=>a.includes(b._def.value)?a:[...a,b._def.value],[])}}}else if(y.every(a=>"ZodEnum"===a._def.typeName))return{type:"string",enum:y.reduce((a,b)=>[...a,...b._def.values.filter(b=>!a.includes(b))],[])};return jK(w,x);case l.ZodIntersection:var z=a,A=c;let B=[jL(z.left._def,{...A,currentPath:[...A.currentPath,"allOf","0"]}),jL(z.right._def,{...A,currentPath:[...A.currentPath,"allOf","1"]})].filter(a=>!!a),C="jsonSchema2019-09"===A.target?{unevaluatedProperties:!1}:void 0,D=[];return B.forEach(a=>{if((!("type"in a)||"string"!==a.type)&&"allOf"in a)D.push(...a.allOf),void 0===a.unevaluatedProperties&&(C=void 0);else{let b=a;if("additionalProperties"in a&&!1===a.additionalProperties){let{additionalProperties:c,...d}=a;b=d}else C=void 0;D.push(b)}}),D.length?{allOf:D,...C}:void 0;case l.ZodTuple:return d=a,e=c,d.rest?{type:"array",minItems:d.items.length,items:d.items.map((a,b)=>jL(a._def,{...e,currentPath:[...e.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[]),additionalItems:jL(d.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:d.items.length,maxItems:d.items.length,items:d.items.map((a,b)=>jL(a._def,{...e,currentPath:[...e.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[])};case l.ZodRecord:return jI(a,c);case l.ZodLiteral:var E=a,F=c;let G=typeof E.value;return"bigint"!==G&&"number"!==G&&"boolean"!==G&&"string"!==G?{type:Array.isArray(E.value)?"array":"object"}:"openApi3"===F.target?{type:"bigint"===G?"integer":G,enum:[E.value]}:{type:"bigint"===G?"integer":G,const:E.value};case l.ZodEnum:return{type:"string",enum:Array.from(a.values)};case l.ZodNativeEnum:var H=a;let I=H.values,J=Object.keys(H.values).filter(a=>"number"!=typeof I[I[a]]).map(a=>I[a]),K=Array.from(new Set(J.map(a=>typeof a)));return{type:1===K.length?"string"===K[0]?"string":"number":["string","number"],enum:J};case l.ZodNullable:var L=a,M=c;if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(L.innerType._def.typeName)&&(!L.innerType._def.checks||!L.innerType._def.checks.length))return"openApi3"===M.target?{type:jJ[L.innerType._def.typeName],nullable:!0}:{type:[jJ[L.innerType._def.typeName],"null"]};if("openApi3"===M.target){let a=jL(L.innerType._def,{...M,currentPath:[...M.currentPath]});return a&&"$ref"in a?{allOf:[a],nullable:!0}:a&&{...a,nullable:!0}}let N=jL(L.innerType._def,{...M,currentPath:[...M.currentPath,"anyOf","0"]});return N&&{anyOf:[N,{type:"null"}]};case l.ZodOptional:var O=a,P=c;if(P.currentPath.toString()===P.propertyPath?.toString())return jL(O.innerType._def,P);let Q=jL(O.innerType._def,{...P,currentPath:[...P.currentPath,"anyOf","1"]});return Q?{anyOf:[{not:jy(P)},Q]}:jy(P);case l.ZodMap:return f=a,"record"===(g=c).mapStrategy?jI(f,g):{type:"array",maxItems:125,items:{type:"array",items:[jL(f.keyType._def,{...g,currentPath:[...g.currentPath,"items","items","0"]})||jy(g),jL(f.valueType._def,{...g,currentPath:[...g.currentPath,"items","items","1"]})||jy(g)],minItems:2,maxItems:2}};case l.ZodSet:var R=a,S=c;let T={type:"array",uniqueItems:!0,items:jL(R.valueType._def,{...S,currentPath:[...S.currentPath,"items"]})};return R.minSize&&jw(T,"minItems",R.minSize.value,R.minSize.message,S),R.maxSize&&jw(T,"maxItems",R.maxSize.value,R.maxSize.message,S),T;case l.ZodLazy:return()=>a.getter()._def;case l.ZodPromise:return jL(a.type._def,c);case l.ZodNaN:case l.ZodNever:return"openAi"===(h=c).target?void 0:{not:jy({...h,currentPath:[...h.currentPath,"not"]})};case l.ZodEffects:return i=a,"input"===(j=c).effectStrategy?jL(i.schema._def,j):jy(j);case l.ZodAny:case l.ZodUnknown:return jy(c);case l.ZodDefault:return k=a,m=c,{...jL(k.innerType._def,m),default:k.defaultValue()};case l.ZodBranded:return jz(a,c);case l.ZodReadonly:case l.ZodCatch:return jL(a.innerType._def,c);case l.ZodPipeline:var U=a,V=c;if("input"===V.pipeStrategy)return jL(U.in._def,V);if("output"===V.pipeStrategy)return jL(U.out._def,V);let W=jL(U.in._def,{...V,currentPath:[...V.currentPath,"allOf","0"]}),X=jL(U.out._def,{...V,currentPath:[...V.currentPath,"allOf",W?"1":"0"]});return{allOf:[W,X].filter(a=>void 0!==a)};case l.ZodFunction:case l.ZodVoid:case l.ZodSymbol:default:return}})(a,a.typeName,b),g="function"==typeof f?jL(f(),b):f;if(g&&jN(a,b,g),b.postProcess){let c=b.postProcess(g,a,b);return e.jsonSchema=g,c}return e.jsonSchema=g,g}var jM=(a,b)=>{switch(b.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:jx(b.currentPath,a.path)};case"none":case"seen":if(a.path.length<b.currentPath.length&&a.path.every((a,c)=>b.currentPath[c]===a))return console.warn(`Recursive reference detected at ${b.currentPath.join("/")}! Defaulting to any`),jy(b);return"seen"===b.$refStrategy?jy(b):void 0}},jN=(a,b,c)=>(a.description&&(c.description=a.description,b.markdownDescription&&(c.markdownDescription=a.description)),c);function jO(a,b){var c,d,e,f;return fQ(a)?function(a,b){if(a instanceof fA){let c=new fM(b),d={};for(let b of a._idmap.entries()){let[a,d]=b;c.process(d)}let e={},f={registry:a,uri:b?.uri||(a=>a),defs:d};for(let d of a._idmap.entries()){let[a,g]=d;e[a]=c.emit(g,{...b,external:f})}return Object.keys(d).length>0&&(e.__shared={["draft-2020-12"===c.target?"$defs":"definitions"]:d}),{schemas:e}}let c=new fM(b);return c.process(a),c.emit(a,b)}(a,{target:(f=null==b?void 0:b.target)&&"jsonSchema7"!==f&&"draft-7"!==f&&("jsonSchema2019-09"===f||"draft-2020-12"===f)?"draft-2020-12":"draft-7",io:null!=(c=null==b?void 0:b.pipeStrategy)?c:"input"}):((a,b)=>{let c=(a=>{let b,c="string"==typeof(b=a)?{...ju,name:b}:{...ju,...b},d=void 0!==c.name?[...c.basePath,c.definitionPath,c.name]:c.basePath;return{...c,flags:{hasReferencedOpenAiAnyType:!1},currentPath:d,propertyPath:void 0,seen:new Map(Object.entries(c.definitions).map(([a,b])=>[b._def,{def:b._def,path:[...c.basePath,c.definitionPath,a],jsonSchema:void 0}]))}})(b),d="object"==typeof b&&b.definitions?Object.entries(b.definitions).reduce((a,[b,d])=>({...a,[b]:jL(d._def,{...c,currentPath:[...c.basePath,c.definitionPath,b]},!0)??jy(c)}),{}):void 0,e="string"==typeof b?b:b?.nameStrategy==="title"?void 0:b?.name,f=jL(a._def,void 0===e?c:{...c,currentPath:[...c.basePath,c.definitionPath,e]},!1)??jy(c),g="object"==typeof b&&void 0!==b.name&&"title"===b.nameStrategy?b.name:void 0;void 0!==g&&(f.title=g),c.flags.hasReferencedOpenAiAnyType&&(d||(d={}),d[c.openAiAnyTypeName]||(d[c.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===c.$refStrategy?"1":[...c.basePath,c.definitionPath,c.openAiAnyTypeName].join("/")}}));let h=void 0===e?d?{...f,[c.definitionPath]:d}:f:{$ref:[..."relative"===c.$refStrategy?[]:c.basePath,c.definitionPath,e].join("/"),[c.definitionPath]:{...d,[e]:f}};return"jsonSchema7"===c.target?h.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===c.target||"openAi"===c.target)&&(h.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===c.target&&("anyOf"in h||"oneOf"in h||"allOf"in h||"type"in h&&Array.isArray(h.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),h})(a,{strictUnions:null==(d=null==b?void 0:b.strictUnions)||d,pipeStrategy:null!=(e=null==b?void 0:b.pipeStrategy)?e:"input"})}function jP(a){let b=fU(a),c=null==b?void 0:b.method;if(!c)throw Error("Schema is missing a method literal");let d=fX(c);if("string"!=typeof d)throw Error("Schema method literal must be a string");return d}function jQ(a,b){let c=fS(a,b);if(!c.success)throw c.error;return c.data}class jR{constructor(a){this._options=a,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(hA,a=>{this._oncancel(a)}),this.setNotificationHandler(hS,a=>{this._onprogress(a)}),this.setRequestHandler(hP,a=>({})),this._taskStore=null==a?void 0:a.taskStore,this._taskMessageQueue=null==a?void 0:a.taskMessageQueue,this._taskStore&&(this.setRequestHandler(h$,async(a,b)=>{let c=await this._taskStore.getTask(a.params.taskId,b.sessionId);if(!c)throw new jq(m.InvalidParams,"Failed to retrieve task: Task not found");return{...c}}),this.setRequestHandler(h0,async(a,b)=>{let c=async()=>{var d;let e=a.params.taskId;if(this._taskMessageQueue){let a;for(;a=await this._taskMessageQueue.dequeue(e,b.sessionId);){if("response"===a.type||"error"===a.type){let b=a.message,c=b.id,d=this._requestResolvers.get(c);if(d)this._requestResolvers.delete(c),d("response"===a.type?b:new jq(b.error.code,b.error.message,b.error.data));else{let b="response"===a.type?"Response":"Error";this._onerror(Error(`${b} handler missing for request ${c}`))}continue}await (null==(d=this._transport)?void 0:d.send(a.message,{relatedRequestId:b.requestId}))}}let f=await this._taskStore.getTask(e,b.sessionId);if(!f)throw new jq(m.InvalidParams,`Task not found: ${e}`);if(!js(f.status))return await this._waitForTaskUpdate(e,b.signal),await c();if(js(f.status)){let a=await this._taskStore.getTaskResult(e,b.sessionId);return this._clearTaskQueue(e),{...a,_meta:{...a._meta,[hf]:{taskId:e}}}}return await c()};return await c()}),this.setRequestHandler(h1,async(a,b)=>{var c;try{let{tasks:d,nextCursor:e}=await this._taskStore.listTasks(null==(c=a.params)?void 0:c.cursor,b.sessionId);return{tasks:d,nextCursor:e,_meta:{}}}catch(a){throw new jq(m.InvalidParams,`Failed to list tasks: ${a instanceof Error?a.message:String(a)}`)}}),this.setRequestHandler(h3,async(a,b)=>{try{let c=await this._taskStore.getTask(a.params.taskId,b.sessionId);if(!c)throw new jq(m.InvalidParams,`Task not found: ${a.params.taskId}`);if(js(c.status))throw new jq(m.InvalidParams,`Cannot cancel task in terminal status: ${c.status}`);await this._taskStore.updateTaskStatus(a.params.taskId,"cancelled","Client cancelled task execution.",b.sessionId),this._clearTaskQueue(a.params.taskId);let d=await this._taskStore.getTask(a.params.taskId,b.sessionId);if(!d)throw new jq(m.InvalidParams,`Task not found after cancellation: ${a.params.taskId}`);return{_meta:{},...d}}catch(a){if(a instanceof jq)throw a;throw new jq(m.InvalidRequest,`Failed to cancel task: ${a instanceof Error?a.message:String(a)}`)}}))}async _oncancel(a){let b=this._requestHandlerAbortControllers.get(a.params.requestId);null==b||b.abort(a.params.reason)}_setupTimeout(a,b,c,d,e=!1){this._timeoutInfo.set(a,{timeoutId:setTimeout(d,b),startTime:Date.now(),timeout:b,maxTotalTimeout:c,resetTimeoutOnProgress:e,onTimeout:d})}_resetTimeout(a){let b=this._timeoutInfo.get(a);if(!b)return!1;let c=Date.now()-b.startTime;if(b.maxTotalTimeout&&c>=b.maxTotalTimeout)throw this._timeoutInfo.delete(a),jq.fromError(m.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:b.maxTotalTimeout,totalElapsed:c});return clearTimeout(b.timeoutId),b.timeoutId=setTimeout(b.onTimeout,b.timeout),!0}_cleanupTimeout(a){let b=this._timeoutInfo.get(a);b&&(clearTimeout(b.timeoutId),this._timeoutInfo.delete(a))}async connect(a){var b,c,d;this._transport=a;let e=null==(b=this.transport)?void 0:b.onclose;this._transport.onclose=()=>{null==e||e(),this._onclose()};let f=null==(c=this.transport)?void 0:c.onerror;this._transport.onerror=a=>{null==f||f(a),this._onerror(a)};let g=null==(d=this._transport)?void 0:d.onmessage;this._transport.onmessage=(a,b)=>{if(null==g||g(a,b),hw(a)||hx.safeParse(a).success)this._onresponse(a);else if(ht(a))this._onrequest(a,b);else hu.safeParse(a).success?this._onnotification(a):this._onerror(Error(`Unknown message type: ${JSON.stringify(a)}`))},await this._transport.start()}_onclose(){var a;let b=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();let c=jq.fromError(m.ConnectionClosed,"Connection closed");for(let d of(this._transport=void 0,null==(a=this.onclose)||a.call(this),b.values()))d(c)}_onerror(a){var b;null==(b=this.onerror)||b.call(this,a)}_onnotification(a){var b;let c=null!=(b=this._notificationHandlers.get(a.method))?b:this.fallbackNotificationHandler;void 0!==c&&Promise.resolve().then(()=>c(a)).catch(a=>this._onerror(Error(`Uncaught error in notification handler: ${a}`)))}_onrequest(a,b){var c,d,e,f,g,h;let i=null!=(c=this._requestHandlers.get(a.method))?c:this.fallbackRequestHandler,j=this._transport,k=null==(f=null==(e=null==(d=a.params)?void 0:d._meta)?void 0:e[hf])?void 0:f.taskId;if(void 0===i){let b={jsonrpc:"2.0",id:a.id,error:{code:m.MethodNotFound,message:"Method not found"}};k&&this._taskMessageQueue?this._enqueueTaskMessage(k,{type:"error",message:b,timestamp:Date.now()},null==j?void 0:j.sessionId).catch(a=>this._onerror(Error(`Failed to enqueue error response: ${a}`))):null==j||j.send(b).catch(a=>this._onerror(Error(`Failed to send an error response: ${a}`)));return}let l=new AbortController;this._requestHandlerAbortControllers.set(a.id,l);let n=null==(g=a.params)?void 0:g.task,o=this._taskStore?this.requestTaskStore(a,null==j?void 0:j.sessionId):void 0,p={signal:l.signal,sessionId:null==j?void 0:j.sessionId,_meta:null==(h=a.params)?void 0:h._meta,sendNotification:async b=>{let c={relatedRequestId:a.id};k&&(c.relatedTask={taskId:k}),await this.notification(b,c)},sendRequest:async(b,c,d)=>{var e,f;let g={...d,relatedRequestId:a.id};k&&!g.relatedTask&&(g.relatedTask={taskId:k});let h=null!=(f=null==(e=g.relatedTask)?void 0:e.taskId)?f:k;return h&&o&&await o.updateTaskStatus(h,"input_required"),await this.request(b,c,g)},authInfo:null==b?void 0:b.authInfo,requestId:a.id,requestInfo:null==b?void 0:b.requestInfo,taskId:k,taskStore:o,taskRequestedTtl:null==n?void 0:n.ttl,closeSSEStream:null==b?void 0:b.closeSSEStream,closeStandaloneSSEStream:null==b?void 0:b.closeStandaloneSSEStream};Promise.resolve().then(()=>{n&&this.assertTaskHandlerCapability(a.method)}).then(()=>i(a,p)).then(async b=>{if(l.signal.aborted)return;let c={result:b,jsonrpc:"2.0",id:a.id};k&&this._taskMessageQueue?await this._enqueueTaskMessage(k,{type:"response",message:c,timestamp:Date.now()},null==j?void 0:j.sessionId):await (null==j?void 0:j.send(c))},async b=>{var c;if(l.signal.aborted)return;let d={jsonrpc:"2.0",id:a.id,error:{code:Number.isSafeInteger(b.code)?b.code:m.InternalError,message:null!=(c=b.message)?c:"Internal error",...void 0!==b.data&&{data:b.data}}};k&&this._taskMessageQueue?await this._enqueueTaskMessage(k,{type:"error",message:d,timestamp:Date.now()},null==j?void 0:j.sessionId):await (null==j?void 0:j.send(d))}).catch(a=>this._onerror(Error(`Failed to send response: ${a}`))).finally(()=>{this._requestHandlerAbortControllers.delete(a.id)})}_onprogress(a){let{progressToken:b,...c}=a.params,d=Number(b),e=this._progressHandlers.get(d);if(!e)return void this._onerror(Error(`Received a progress notification for an unknown token: ${JSON.stringify(a)}`));let f=this._responseHandlers.get(d),g=this._timeoutInfo.get(d);if(g&&f&&g.resetTimeoutOnProgress)try{this._resetTimeout(d)}catch(a){this._responseHandlers.delete(d),this._progressHandlers.delete(d),this._cleanupTimeout(d),f(a);return}e(c)}_onresponse(a){let b=Number(a.id),c=this._requestResolvers.get(b);if(c){this._requestResolvers.delete(b),c(hw(a)?a:new jq(a.error.code,a.error.message,a.error.data));return}let d=this._responseHandlers.get(b);if(void 0===d)return void this._onerror(Error(`Received a response for an unknown message ID: ${JSON.stringify(a)}`));this._responseHandlers.delete(b),this._cleanupTimeout(b);let e=!1;if(hw(a)&&a.result&&"object"==typeof a.result){let c=a.result;if(c.task&&"object"==typeof c.task){let a=c.task;"string"==typeof a.taskId&&(e=!0,this._taskProgressTokens.set(a.taskId,b))}}e||this._progressHandlers.delete(b),d(hw(a)?a:jq.fromError(a.error.code,a.error.message,a.error.data))}get transport(){return this._transport}async close(){var a;await (null==(a=this._transport)?void 0:a.close())}async *requestStream(a,b,c){var d,e,f,g;let h,{task:i}=null!=c?c:{};if(!i){try{let d=await this.request(a,b,c);yield{type:"result",result:d}}catch(a){yield{type:"error",error:a instanceof jq?a:new jq(m.InternalError,String(a))}}return}try{let i=await this.request(a,hX,c);if(i.task)h=i.task.taskId,yield{type:"taskCreated",task:i.task};else throw new jq(m.InternalError,"Task creation did not return a task");for(;;){let a=await this.getTask({taskId:h},c);if(yield{type:"taskStatus",task:a},js(a.status)){if("completed"===a.status){let a=await this.getTaskResult({taskId:h},b,c);yield{type:"result",result:a}}else"failed"===a.status?yield{type:"error",error:new jq(m.InternalError,`Task ${h} failed`)}:"cancelled"===a.status&&(yield{type:"error",error:new jq(m.InternalError,`Task ${h} was cancelled`)});return}if("input_required"===a.status){let a=await this.getTaskResult({taskId:h},b,c);yield{type:"result",result:a};return}let i=null!=(f=null!=(d=a.pollInterval)?d:null==(e=this._options)?void 0:e.defaultTaskPollInterval)?f:1e3;await new Promise(a=>setTimeout(a,i)),null==(g=null==c?void 0:c.signal)||g.throwIfAborted()}}catch(a){yield{type:"error",error:a instanceof jq?a:new jq(m.InternalError,String(a))}}}request(a,b,c){let{relatedRequestId:d,resumptionToken:e,onresumptiontoken:f,task:g,relatedTask:h}=null!=c?c:{};return new Promise((i,j)=>{var k,l,n,o,p,q,r;let s=a=>{j(a)};if(!this._transport)return void s(Error("Not connected"));if((null==(k=this._options)?void 0:k.enforceStrictCapabilities)===!0)try{this.assertCapabilityForMethod(a.method),g&&this.assertTaskCapability(a.method)}catch(a){s(a);return}null==(l=null==c?void 0:c.signal)||l.throwIfAborted();let t=this._requestMessageId++,u={...a,jsonrpc:"2.0",id:t};(null==c?void 0:c.onprogress)&&(this._progressHandlers.set(t,c.onprogress),u.params={...a.params,_meta:{...(null==(n=a.params)?void 0:n._meta)||{},progressToken:t}}),g&&(u.params={...u.params,task:g}),h&&(u.params={...u.params,_meta:{...(null==(o=u.params)?void 0:o._meta)||{},[hf]:h}});let v=a=>{var b;this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),null==(b=this._transport)||b.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:t,reason:String(a)}},{relatedRequestId:d,resumptionToken:e,onresumptiontoken:f}).catch(a=>this._onerror(Error(`Failed to send cancellation: ${a}`))),j(a instanceof jq?a:new jq(m.RequestTimeout,String(a)))};this._responseHandlers.set(t,a=>{var d;if(null==(d=null==c?void 0:c.signal)||!d.aborted){if(a instanceof Error)return j(a);try{let c=fS(b,a.result);c.success?i(c.data):j(c.error)}catch(a){j(a)}}}),null==(p=null==c?void 0:c.signal)||p.addEventListener("abort",()=>{var a;v(null==(a=null==c?void 0:c.signal)?void 0:a.reason)});let w=null!=(q=null==c?void 0:c.timeout)?q:6e4;this._setupTimeout(t,w,null==c?void 0:c.maxTotalTimeout,()=>v(jq.fromError(m.RequestTimeout,"Request timed out",{timeout:w})),null!=(r=null==c?void 0:c.resetTimeoutOnProgress)&&r);let x=null==h?void 0:h.taskId;if(x){let a=a=>{let b=this._responseHandlers.get(t);b?b(a):this._onerror(Error(`Response handler missing for side-channeled request ${t}`))};this._requestResolvers.set(t,a),this._enqueueTaskMessage(x,{type:"request",message:u,timestamp:Date.now()}).catch(a=>{this._cleanupTimeout(t),j(a)})}else this._transport.send(u,{relatedRequestId:d,resumptionToken:e,onresumptiontoken:f}).catch(a=>{this._cleanupTimeout(t),j(a)})})}async getTask(a,b){return this.request({method:"tasks/get",params:a},h_,b)}async getTaskResult(a,b,c){return this.request({method:"tasks/result",params:a},b,c)}async listTasks(a,b){return this.request({method:"tasks/list",params:a},h2,b)}async cancelTask(a,b){return this.request({method:"tasks/cancel",params:a},h4,b)}async notification(a,b){var c,d,e,f,g;if(!this._transport)throw Error("Not connected");this.assertNotificationCapability(a.method);let h=null==(c=null==b?void 0:b.relatedTask)?void 0:c.taskId;if(h){let c={...a,jsonrpc:"2.0",params:{...a.params,_meta:{...(null==(d=a.params)?void 0:d._meta)||{},[hf]:b.relatedTask}}};await this._enqueueTaskMessage(h,{type:"notification",message:c,timestamp:Date.now()});return}if((null!=(f=null==(e=this._options)?void 0:e.debouncedNotificationMethods)?f:[]).includes(a.method)&&!a.params&&!(null==b?void 0:b.relatedRequestId)&&!(null==b?void 0:b.relatedTask)){if(this._pendingDebouncedNotifications.has(a.method))return;this._pendingDebouncedNotifications.add(a.method),Promise.resolve().then(()=>{var c,d;if(this._pendingDebouncedNotifications.delete(a.method),!this._transport)return;let e={...a,jsonrpc:"2.0"};(null==b?void 0:b.relatedTask)&&(e={...e,params:{...e.params,_meta:{...(null==(c=e.params)?void 0:c._meta)||{},[hf]:b.relatedTask}}}),null==(d=this._transport)||d.send(e,b).catch(a=>this._onerror(a))});return}let i={...a,jsonrpc:"2.0"};(null==b?void 0:b.relatedTask)&&(i={...i,params:{...i.params,_meta:{...(null==(g=i.params)?void 0:g._meta)||{},[hf]:b.relatedTask}}}),await this._transport.send(i,b)}setRequestHandler(a,b){let c=jP(a);this.assertRequestHandlerCapability(c),this._requestHandlers.set(c,(c,d)=>Promise.resolve(b(jQ(a,c),d)))}removeRequestHandler(a){this._requestHandlers.delete(a)}assertCanSetRequestHandler(a){if(this._requestHandlers.has(a))throw Error(`A request handler for ${a} already exists, which would be overridden`)}setNotificationHandler(a,b){let c=jP(a);this._notificationHandlers.set(c,c=>Promise.resolve(b(jQ(a,c))))}removeNotificationHandler(a){this._notificationHandlers.delete(a)}_cleanupTaskProgressHandler(a){let b=this._taskProgressTokens.get(a);void 0!==b&&(this._progressHandlers.delete(b),this._taskProgressTokens.delete(a))}async _enqueueTaskMessage(a,b,c){var d;if(!this._taskStore||!this._taskMessageQueue)throw Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");let e=null==(d=this._options)?void 0:d.maxTaskQueueSize;await this._taskMessageQueue.enqueue(a,b,c,e)}async _clearTaskQueue(a,b){if(this._taskMessageQueue){for(let c of(await this._taskMessageQueue.dequeueAll(a,b)))if("request"===c.type&&ht(c.message)){let b=c.message.id,d=this._requestResolvers.get(b);d?(d(new jq(m.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(b)):this._onerror(Error(`Resolver missing for request ${b} during task ${a} cleanup`))}}}async _waitForTaskUpdate(a,b){var c,d,e;let f=null!=(d=null==(c=this._options)?void 0:c.defaultTaskPollInterval)?d:1e3;try{let b=await (null==(e=this._taskStore)?void 0:e.getTask(a));(null==b?void 0:b.pollInterval)&&(f=b.pollInterval)}catch(a){}return new Promise((a,c)=>{if(b.aborted)return void c(new jq(m.InvalidRequest,"Request cancelled"));let d=setTimeout(a,f);b.addEventListener("abort",()=>{clearTimeout(d),c(new jq(m.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(a,b){let c=this._taskStore;if(!c)throw Error("No task store configured");return{createTask:async d=>{if(!a)throw Error("No request provided");return await c.createTask(d,a.id,{method:a.method,params:a.params},b)},getTask:async a=>{let d=await c.getTask(a,b);if(!d)throw new jq(m.InvalidParams,"Failed to retrieve task: Task not found");return d},storeTaskResult:async(a,d,e)=>{await c.storeTaskResult(a,d,e,b);let f=await c.getTask(a,b);if(f){let b=hZ.parse({method:"notifications/tasks/status",params:f});await this.notification(b),js(f.status)&&this._cleanupTaskProgressHandler(a)}},getTaskResult:a=>c.getTaskResult(a,b),updateTaskStatus:async(a,d,e)=>{let f=await c.getTask(a,b);if(!f)throw new jq(m.InvalidParams,`Task "${a}" not found - it may have been cleaned up`);if(js(f.status))throw new jq(m.InvalidParams,`Cannot update task "${a}" from terminal status "${f.status}" to "${d}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await c.updateTaskStatus(a,d,e,b);let g=await c.getTask(a,b);if(g){let b=hZ.parse({method:"notifications/tasks/status",params:g});await this.notification(b),js(g.status)&&this._cleanupTaskProgressHandler(a)}},listTasks:a=>c.listTasks(a,b)}}}function jS(a){return null!==a&&"object"==typeof a&&!Array.isArray(a)}var jT=C(aT(),1),jU=C(aW(),1);class jV{constructor(a){this._ajv=null!=a?a:function(){let a=new jT.Ajv({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return(0,jU.default)(a),a}()}getValidator(a){var b;let c="$id"in a&&"string"==typeof a.$id&&null!=(b=this._ajv.getSchema(a.$id))?b:this._ajv.compile(a);return a=>c(a)?{valid:!0,data:a,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(c.errors)}}}class jW{constructor(a){this._server=a}requestStream(a,b,c){return this._server.requestStream(a,b,c)}async getTask(a,b){return this._server.getTask({taskId:a},b)}async getTaskResult(a,b,c){return this._server.getTaskResult({taskId:a},b,c)}async listTasks(a,b){return this._server.listTasks(a?{cursor:a}:void 0,b)}async cancelTask(a,b){return this._server.cancelTask({taskId:a},b)}}class jX extends jR{constructor(a,b){var c,d;super(b),this._serverInfo=a,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(iO.options.map((a,b)=>[a,b])),this.isMessageIgnored=(a,b)=>{let c=this._loggingLevels.get(b);return!!c&&this.LOG_LEVEL_SEVERITY.get(a)<this.LOG_LEVEL_SEVERITY.get(c)},this._capabilities=null!=(c=null==b?void 0:b.capabilities)?c:{},this._instructions=null==b?void 0:b.instructions,this._jsonSchemaValidator=null!=(d=null==b?void 0:b.jsonSchemaValidator)?d:new jV,this.setRequestHandler(hL,a=>this._oninitialize(a)),this.setNotificationHandler(hO,()=>{var a;return null==(a=this.oninitialized)?void 0:a.call(this)}),this._capabilities.logging&&this.setRequestHandler(iQ,async(a,b)=>{var c;let d=b.sessionId||(null==(c=b.requestInfo)?void 0:c.headers["mcp-session-id"])||void 0,{level:e}=a.params,f=iO.safeParse(e);return f.success&&this._loggingLevels.set(d,f.data),{}})}get experimental(){return this._experimental||(this._experimental={tasks:new jW(this)}),this._experimental}registerCapabilities(a){if(this.transport)throw Error("Cannot register capabilities after connecting to transport");this._capabilities=function(a,b){let c={...a};for(let a in b){let d=b[a];if(void 0===d)continue;let e=c[a];jS(e)&&jS(d)?c[a]={...e,...d}:c[a]=d}return c}(this._capabilities,a)}setRequestHandler(a,b){var c,d,e;let f,g=fU(a),h=null==g?void 0:g.method;if(!h)throw Error("Schema is missing a method literal");if(fQ(h)){let a=null==(c=h._zod)?void 0:c.def;f=null!=(d=null==a?void 0:a.value)?d:h.value}else{let a=h._def;f=null!=(e=null==a?void 0:a.value)?e:h.value}if("string"!=typeof f)throw Error("Schema method literal must be a string");if("tools/call"===f){let c=async(a,c)=>{let d=fS(iM,a);if(!d.success){let a=d.error instanceof Error?d.error.message:String(d.error);throw new jq(m.InvalidParams,`Invalid tools/call request: ${a}`)}let{params:e}=d.data,f=await Promise.resolve(b(a,c));if(e.task){let a=fS(hX,f);if(!a.success){let b=a.error instanceof Error?a.error.message:String(a.error);throw new jq(m.InvalidParams,`Invalid task creation result: ${b}`)}return a.data}let g=fS(iK,f);if(!g.success){let a=g.error instanceof Error?g.error.message:String(g.error);throw new jq(m.InvalidParams,`Invalid tools/call result: ${a}`)}return g.data};return super.setRequestHandler(a,c)}return super.setRequestHandler(a,b)}assertCapabilityForMethod(a){var b,c,d;switch(a){case"sampling/createMessage":if(!(null==(b=this._clientCapabilities)?void 0:b.sampling))throw Error(`Client does not support sampling (required for ${a})`);break;case"elicitation/create":if(!(null==(c=this._clientCapabilities)?void 0:c.elicitation))throw Error(`Client does not support elicitation (required for ${a})`);break;case"roots/list":if(!(null==(d=this._clientCapabilities)?void 0:d.roots))throw Error(`Client does not support listing roots (required for ${a})`)}}assertNotificationCapability(a){var b,c;switch(a){case"notifications/message":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${a})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw Error(`Server does not support notifying about resources (required for ${a})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw Error(`Server does not support notifying of tool list changes (required for ${a})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw Error(`Server does not support notifying of prompt list changes (required for ${a})`);break;case"notifications/elicitation/complete":if(!(null==(c=null==(b=this._clientCapabilities)?void 0:b.elicitation)?void 0:c.url))throw Error(`Client does not support URL elicitation (required for ${a})`)}}assertRequestHandlerCapability(a){if(this._capabilities)switch(a){case"completion/complete":if(!this._capabilities.completions)throw Error(`Server does not support completions (required for ${a})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${a})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw Error(`Server does not support prompts (required for ${a})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw Error(`Server does not support resources (required for ${a})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw Error(`Server does not support tools (required for ${a})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw Error(`Server does not support tasks capability (required for ${a})`)}}assertTaskCapability(a){var b,c,d,e,f=null==(c=null==(b=this._clientCapabilities)?void 0:b.tasks)?void 0:c.requests,g="Client";if(!f)throw Error(`${g} does not support task creation (required for ${a})`);switch(a){case"sampling/createMessage":if(!(null==(d=f.sampling)?void 0:d.createMessage))throw Error(`${g} does not support task creation for sampling/createMessage (required for ${a})`);break;case"elicitation/create":if(!(null==(e=f.elicitation)?void 0:e.create))throw Error(`${g} does not support task creation for elicitation/create (required for ${a})`)}}assertTaskHandlerCapability(a){var b;if(this._capabilities){var c,d=null==(b=this._capabilities.tasks)?void 0:b.requests,e="Server";if(!d)throw Error(`${e} does not support task creation (required for ${a})`);if("tools/call"===a&&!(null==(c=d.tools)?void 0:c.call))throw Error(`${e} does not support task creation for tools/call (required for ${a})`)}}async _oninitialize(a){let b=a.params.protocolVersion;return this._clientCapabilities=a.params.capabilities,this._clientVersion=a.params.clientInfo,{protocolVersion:he.includes(b)?b:hd,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},hy)}async createMessage(a,b){var c,d;if((a.tools||a.toolChoice)&&!(null==(d=null==(c=this._clientCapabilities)?void 0:c.sampling)?void 0:d.tools))throw Error("Client does not support sampling tools capability.");if(a.messages.length>0){let b=a.messages[a.messages.length-1],c=Array.isArray(b.content)?b.content:[b.content],d=c.some(a=>"tool_result"===a.type),e=a.messages.length>1?a.messages[a.messages.length-2]:void 0,f=e?Array.isArray(e.content)?e.content:[e.content]:[],g=f.some(a=>"tool_use"===a.type);if(d){if(c.some(a=>"tool_result"!==a.type))throw Error("The last message must contain only tool_result content if any is present");if(!g)throw Error("tool_result blocks are not matching any tool_use from the previous message")}if(g){let a=new Set(f.filter(a=>"tool_use"===a.type).map(a=>a.id)),b=new Set(c.filter(a=>"tool_result"===a.type).map(a=>a.toolUseId));if(a.size!==b.size||![...a].every(a=>b.has(a)))throw Error("ids of tool_result blocks and tool_use blocks from previous message do not match")}}return a.tools?this.request({method:"sampling/createMessage",params:a},i1,b):this.request({method:"sampling/createMessage",params:a},i0,b)}async elicitInput(a,b){var c,d,e,f,g;switch(null!=(c=a.mode)?c:"form"){case"url":if(!(null==(e=null==(d=this._clientCapabilities)?void 0:d.elicitation)?void 0:e.url))throw Error("Client does not support url elicitation.");return this.request({method:"elicitation/create",params:a},jg,b);case"form":{if(!(null==(g=null==(f=this._clientCapabilities)?void 0:f.elicitation)?void 0:g.form))throw Error("Client does not support form elicitation.");let c="form"===a.mode?a:{...a,mode:"form"},d=await this.request({method:"elicitation/create",params:c},jg,b);if("accept"===d.action&&d.content&&c.requestedSchema)try{let a=this._jsonSchemaValidator.getValidator(c.requestedSchema)(d.content);if(!a.valid)throw new jq(m.InvalidParams,`Elicitation response content does not match requested schema: ${a.errorMessage}`)}catch(a){if(a instanceof jq)throw a;throw new jq(m.InternalError,`Error validating elicitation response: ${a instanceof Error?a.message:String(a)}`)}return d}}}createElicitationCompletionNotifier(a,b){var c,d;if(!(null==(d=null==(c=this._clientCapabilities)?void 0:c.elicitation)?void 0:d.url))throw Error("Client does not support URL elicitation (required for notifications/elicitation/complete)");return()=>this.notification({method:"notifications/elicitation/complete",params:{elicitationId:a}},b)}async listRoots(a,b){return this.request({method:"roots/list",params:a},jo,b)}async sendLoggingMessage(a,b){if(this._capabilities.logging&&!this.isMessageIgnored(a.level,b))return this.notification({method:"notifications/message",params:a})}async sendResourceUpdated(a){return this.notification({method:"notifications/resources/updated",params:a})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}var jY=Symbol.for("mcp.completable");(n||(n={})).Completable="McpCompletable";var jZ=/^[A-Za-z0-9._-]{1,128}$/;function j$(a){let b=function(a){let b=[];if(0===a.length)return{isValid:!1,warnings:["Tool name cannot be empty"]};if(a.length>128)return{isValid:!1,warnings:[`Tool name exceeds maximum length of 128 characters (current: ${a.length})`]};if(a.includes(" ")&&b.push("Tool name contains spaces, which may cause parsing issues"),a.includes(",")&&b.push("Tool name contains commas, which may cause parsing issues"),(a.startsWith("-")||a.endsWith("-"))&&b.push("Tool name starts or ends with a dash, which may cause parsing issues in some contexts"),(a.startsWith(".")||a.endsWith("."))&&b.push("Tool name starts or ends with a dot, which may cause parsing issues in some contexts"),!jZ.test(a)){let c=a.split("").filter(a=>!/[A-Za-z0-9._-]/.test(a)).filter((a,b,c)=>c.indexOf(a)===b);return b.push(`Tool name contains invalid characters: ${c.map(a=>`"${a}"`).join(", ")}`,"Allowed characters are: A-Z, a-z, 0-9, underscore (_), dash (-), and dot (.)"),{isValid:!1,warnings:b}}return{isValid:!0,warnings:b}}(a);var c=b.warnings;if(c.length>0){for(let b of(console.warn(`Tool name validation warning for "${a}":`),c))console.warn(`  - ${b}`);console.warn("Tool registration will proceed, but this may cause compatibility issues."),console.warn("Consider updating the tool name to conform to the MCP tool naming standard."),console.warn("See SEP: Specify Format for Tool Names (https://github.com/modelcontextprotocol/modelcontextprotocol/issues/986) for more details.")}return b.isValid}class j_{constructor(a){this._mcpServer=a}registerToolTask(a,b,c){let d={taskSupport:"required",...b.execution};if("forbidden"===d.taskSupport)throw Error(`Cannot register task-based tool '${a}' with taskSupport 'forbidden'. Use registerTool() instead.`);return this._mcpServer._createRegisteredTool(a,b.title,b.description,b.inputSchema,b.outputSchema,b.annotations,d,b._meta,c)}}class j0{constructor(a,b){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new jX(a,b)}get experimental(){return this._experimental||(this._experimental={tasks:new j_(this)}),this._experimental}async connect(a){return await this.server.connect(a)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(j5(iI)),this.server.assertCanSetRequestHandler(j5(iM)),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(iI,()=>({tools:Object.entries(this._registeredTools).filter(([,a])=>a.enabled).map(([a,b])=>{let c={name:a,title:b.title,description:b.description,inputSchema:(()=>{let a=fV(b.inputSchema);return a?jO(a,{strictUnions:!0,pipeStrategy:"input"}):j1})(),annotations:b.annotations,execution:b.execution,_meta:b._meta};if(b.outputSchema){let a=fV(b.outputSchema);a&&(c.outputSchema=jO(a,{strictUnions:!0,pipeStrategy:"output"}))}return c})})),this.server.setRequestHandler(iM,async(a,b)=>{var c;try{let d=this._registeredTools[a.params.name];if(!d)throw new jq(m.InvalidParams,`Tool ${a.params.name} not found`);if(!d.enabled)throw new jq(m.InvalidParams,`Tool ${a.params.name} disabled`);let e=!!a.params.task,f=null==(c=d.execution)?void 0:c.taskSupport,g="createTask"in d.handler;if(("required"===f||"optional"===f)&&!g)throw new jq(m.InternalError,`Tool ${a.params.name} has taskSupport '${f}' but was not registered with registerToolTask`);if("required"===f&&!e)throw new jq(m.MethodNotFound,`Tool ${a.params.name} requires task augmentation (taskSupport: 'required')`);if("optional"===f&&!e&&g)return await this.handleAutomaticTaskPolling(d,a,b);let h=await this.validateToolInput(d,a.params.arguments,a.params.name),i=await this.executeToolHandler(d,h,b);if(e)return i;return await this.validateToolOutput(d,i,a.params.name),i}catch(a){if(a instanceof jq&&a.code===m.UrlElicitationRequired)throw a;return this.createToolError(a instanceof Error?a.message:String(a))}}),this._toolHandlersInitialized=!0)}createToolError(a){return{content:[{type:"text",text:a}],isError:!0}}async validateToolInput(a,b,c){if(!a.inputSchema)return;let d=fV(a.inputSchema),e=null!=d?d:a.inputSchema,f=await fT(e,b);if(!f.success){let a=fW("error"in f?f.error:"Unknown error");throw new jq(m.InvalidParams,`Input validation error: Invalid arguments for tool ${c}: ${a}`)}return f.data}async validateToolOutput(a,b,c){if(!a.outputSchema||!("content"in b)||b.isError)return;if(!b.structuredContent)throw new jq(m.InvalidParams,`Output validation error: Tool ${c} has an output schema but no structured content was provided`);let d=fV(a.outputSchema),e=await fT(d,b.structuredContent);if(!e.success){let a=fW("error"in e?e.error:"Unknown error");throw new jq(m.InvalidParams,`Output validation error: Invalid structured content for tool ${c}: ${a}`)}}async executeToolHandler(a,b,c){let d=a.handler;if("createTask"in d){if(!c.taskStore)throw Error("No task store provided.");let e={...c,taskStore:c.taskStore};return a.inputSchema?await Promise.resolve(d.createTask(b,e)):await Promise.resolve(d.createTask(e))}return a.inputSchema?await Promise.resolve(d(b,c)):await Promise.resolve(d(c))}async handleAutomaticTaskPolling(a,b,c){var d;if(!c.taskStore)throw Error("No task store provided for task-capable tool.");let e=await this.validateToolInput(a,b.params.arguments,b.params.name),f=a.handler,g={...c,taskStore:c.taskStore},h=e?await Promise.resolve(f.createTask(e,g)):await Promise.resolve(f.createTask(g)),i=h.task.taskId,j=h.task,k=null!=(d=j.pollInterval)?d:5e3;for(;"completed"!==j.status&&"failed"!==j.status&&"cancelled"!==j.status;){await new Promise(a=>setTimeout(a,k));let a=await c.taskStore.getTask(i);if(!a)throw new jq(m.InternalError,`Task ${i} not found during polling`);j=a}return await c.taskStore.getTaskResult(i)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(j5(jk)),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(jk,async a=>{switch(a.params.ref.type){case"ref/prompt":if("ref/prompt"!==a.params.ref.type)throw TypeError(`Expected CompleteRequestPrompt, but got ${a.params.ref.type}`);return this.handlePromptCompletion(a,a.params.ref);case"ref/resource":if("ref/resource"!==a.params.ref.type)throw TypeError(`Expected CompleteRequestResourceTemplate, but got ${a.params.ref.type}`);return this.handleResourceCompletion(a,a.params.ref);default:throw new jq(m.InvalidParams,`Invalid completion reference: ${a.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(a,b){let c=this._registeredPrompts[b.name];if(!c)throw new jq(m.InvalidParams,`Prompt ${b.name} not found`);if(!c.enabled)throw new jq(m.InvalidParams,`Prompt ${b.name} disabled`);if(!c.argsSchema)return j7;let d=fU(c.argsSchema),e=null==d?void 0:d[a.params.argument.name];if(!(e&&"object"==typeof e&&jY in e))return j7;let f=function(a){let b=a[jY];return null==b?void 0:b.complete}(e);return f?j6(await f(a.params.argument.value,a.params.context)):j7}async handleResourceCompletion(a,b){let c=Object.values(this._registeredResourceTemplates).find(a=>a.resourceTemplate.uriTemplate.toString()===b.uri);if(!c){if(this._registeredResources[b.uri])return j7;throw new jq(m.InvalidParams,`Resource template ${a.params.ref.uri} not found`)}let d=c.resourceTemplate.completeCallback(a.params.argument.name);return d?j6(await d(a.params.argument.value,a.params.context)):j7}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(j5(ic)),this.server.assertCanSetRequestHandler(j5(ie)),this.server.assertCanSetRequestHandler(j5(ii)),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(ic,async(a,b)=>{let c=Object.entries(this._registeredResources).filter(([a,b])=>b.enabled).map(([a,b])=>({uri:a,name:b.name,...b.metadata})),d=[];for(let a of Object.values(this._registeredResourceTemplates))if(a.resourceTemplate.listCallback)for(let c of(await a.resourceTemplate.listCallback(b)).resources)d.push({...a.metadata,...c});return{resources:[...c,...d]}}),this.server.setRequestHandler(ie,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([a,b])=>({name:a,uriTemplate:b.resourceTemplate.uriTemplate.toString(),...b.metadata}))})),this.server.setRequestHandler(ii,async(a,b)=>{let c=new URL(a.params.uri),d=this._registeredResources[c.toString()];if(d){if(!d.enabled)throw new jq(m.InvalidParams,`Resource ${c} disabled`);return d.readCallback(c,b)}for(let a of Object.values(this._registeredResourceTemplates)){let d=a.resourceTemplate.uriTemplate.match(c.toString());if(d)return a.readCallback(c,d,b)}throw new jq(m.InvalidParams,`Resource ${c} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(j5(is)),this.server.assertCanSetRequestHandler(j5(iv)),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(is,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,a])=>a.enabled).map(([a,b])=>({name:a,title:b.title,description:b.description,arguments:b.argsSchema?function(a){let b=fU(a);return b?Object.entries(b).map(([a,b])=>{var c,d,e,f,g,h,i;return{name:a,description:fQ(b)?null==(d=null==(c=b._zod)?void 0:c.def)?void 0:d.description:null!=(e=b.description)?e:null==(f=b._def)?void 0:f.description,required:!(fQ(b)?(null==(h=null==(g=b._zod)?void 0:g.def)?void 0:h.type)==="optional":"function"==typeof b.isOptional?b.isOptional():(null==(i=b._def)?void 0:i.typeName)==="ZodOptional")}}):[]}(b.argsSchema):void 0}))})),this.server.setRequestHandler(iv,async(a,b)=>{let c=this._registeredPrompts[a.params.name];if(!c)throw new jq(m.InvalidParams,`Prompt ${a.params.name} not found`);if(!c.enabled)throw new jq(m.InvalidParams,`Prompt ${a.params.name} disabled`);if(c.argsSchema){let d=fV(c.argsSchema),e=await fT(d,a.params.arguments);if(!e.success){let b=fW("error"in e?e.error:"Unknown error");throw new jq(m.InvalidParams,`Invalid arguments for prompt ${a.params.name}: ${b}`)}let f=e.data,g=c.callback;return await Promise.resolve(g(f,b))}{let a=c.callback;return await Promise.resolve(a(b))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0)}resource(a,b,...c){let d;"object"==typeof c[0]&&(d=c.shift());let e=c[0];if("string"==typeof b){if(this._registeredResources[b])throw Error(`Resource ${b} is already registered`);let c=this._createRegisteredResource(a,void 0,b,d,e);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),c}{if(this._registeredResourceTemplates[a])throw Error(`Resource template ${a} is already registered`);let c=this._createRegisteredResourceTemplate(a,void 0,b,d,e);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),c}}registerResource(a,b,c,d){if("string"==typeof b){if(this._registeredResources[b])throw Error(`Resource ${b} is already registered`);let e=this._createRegisteredResource(a,c.title,b,c,d);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),e}{if(this._registeredResourceTemplates[a])throw Error(`Resource template ${a} is already registered`);let e=this._createRegisteredResourceTemplate(a,c.title,b,c,d);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),e}}_createRegisteredResource(a,b,c,d,e){let f={name:a,title:b,metadata:d,readCallback:e,enabled:!0,disable:()=>f.update({enabled:!1}),enable:()=>f.update({enabled:!0}),remove:()=>f.update({uri:null}),update:a=>{void 0!==a.uri&&a.uri!==c&&(delete this._registeredResources[c],a.uri&&(this._registeredResources[a.uri]=f)),void 0!==a.name&&(f.name=a.name),void 0!==a.title&&(f.title=a.title),void 0!==a.metadata&&(f.metadata=a.metadata),void 0!==a.callback&&(f.readCallback=a.callback),void 0!==a.enabled&&(f.enabled=a.enabled),this.sendResourceListChanged()}};return this._registeredResources[c]=f,f}_createRegisteredResourceTemplate(a,b,c,d,e){let f={resourceTemplate:c,title:b,metadata:d,readCallback:e,enabled:!0,disable:()=>f.update({enabled:!1}),enable:()=>f.update({enabled:!0}),remove:()=>f.update({name:null}),update:b=>{void 0!==b.name&&b.name!==a&&(delete this._registeredResourceTemplates[a],b.name&&(this._registeredResourceTemplates[b.name]=f)),void 0!==b.title&&(f.title=b.title),void 0!==b.template&&(f.resourceTemplate=b.template),void 0!==b.metadata&&(f.metadata=b.metadata),void 0!==b.callback&&(f.readCallback=b.callback),void 0!==b.enabled&&(f.enabled=b.enabled),this.sendResourceListChanged()}};return this._registeredResourceTemplates[a]=f,f}_createRegisteredPrompt(a,b,c,d,e){let f={title:b,description:c,argsSchema:void 0===d?void 0:fR(d),callback:e,enabled:!0,disable:()=>f.update({enabled:!1}),enable:()=>f.update({enabled:!0}),remove:()=>f.update({name:null}),update:b=>{void 0!==b.name&&b.name!==a&&(delete this._registeredPrompts[a],b.name&&(this._registeredPrompts[b.name]=f)),void 0!==b.title&&(f.title=b.title),void 0!==b.description&&(f.description=b.description),void 0!==b.argsSchema&&(f.argsSchema=fR(b.argsSchema)),void 0!==b.callback&&(f.callback=b.callback),void 0!==b.enabled&&(f.enabled=b.enabled),this.sendPromptListChanged()}};return this._registeredPrompts[a]=f,f}_createRegisteredTool(a,b,c,d,e,f,g,h,i){j$(a);let j={title:b,description:c,inputSchema:j4(d),outputSchema:j4(e),annotations:f,execution:g,_meta:h,handler:i,enabled:!0,disable:()=>j.update({enabled:!1}),enable:()=>j.update({enabled:!0}),remove:()=>j.update({name:null}),update:b=>{void 0!==b.name&&b.name!==a&&("string"==typeof b.name&&j$(b.name),delete this._registeredTools[a],b.name&&(this._registeredTools[b.name]=j)),void 0!==b.title&&(j.title=b.title),void 0!==b.description&&(j.description=b.description),void 0!==b.paramsSchema&&(j.inputSchema=fR(b.paramsSchema)),void 0!==b.callback&&(j.handler=b.callback),void 0!==b.annotations&&(j.annotations=b.annotations),void 0!==b._meta&&(j._meta=b._meta),void 0!==b.enabled&&(j.enabled=b.enabled),this.sendToolListChanged()}};return this._registeredTools[a]=j,this.setToolRequestHandlers(),this.sendToolListChanged(),j}tool(a,...b){let c,d,e,f;if(this._registeredTools[a])throw Error(`Tool ${a} is already registered`);if("string"==typeof b[0]&&(c=b.shift()),b.length>1){let a=b[0];j3(a)?(d=b.shift(),b.length>1&&"object"==typeof b[0]&&null!==b[0]&&!j3(b[0])&&(f=b.shift())):"object"==typeof a&&null!==a&&(f=b.shift())}let g=b[0];return this._createRegisteredTool(a,void 0,c,d,e,f,{taskSupport:"forbidden"},void 0,g)}registerTool(a,b,c){if(this._registeredTools[a])throw Error(`Tool ${a} is already registered`);let{title:d,description:e,inputSchema:f,outputSchema:g,annotations:h,_meta:i}=b;return this._createRegisteredTool(a,d,e,f,g,h,{taskSupport:"forbidden"},i,c)}prompt(a,...b){let c,d;if(this._registeredPrompts[a])throw Error(`Prompt ${a} is already registered`);"string"==typeof b[0]&&(c=b.shift()),b.length>1&&(d=b.shift());let e=b[0],f=this._createRegisteredPrompt(a,void 0,c,d,e);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),f}registerPrompt(a,b,c){if(this._registeredPrompts[a])throw Error(`Prompt ${a} is already registered`);let{title:d,description:e,argsSchema:f}=b,g=this._createRegisteredPrompt(a,d,e,f,c);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),g}isConnected(){return void 0!==this.server.transport}async sendLoggingMessage(a,b){return this.server.sendLoggingMessage(a,b)}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}}var j1={type:"object",properties:{}};function j2(a){return null!==a&&"object"==typeof a&&"parse"in a&&"function"==typeof a.parse&&"safeParse"in a&&"function"==typeof a.safeParse}function j3(a){return"object"==typeof a&&null!==a&&!("_def"in a||"_zod"in a||j2(a))&&(0===Object.keys(a).length||Object.values(a).some(j2))}function j4(a){if(a)return j3(a)?fR(a):a}function j5(a){let b=fU(a),c=null==b?void 0:b.method;if(!c)throw Error("Schema is missing a method literal");let d=fX(c);if("string"==typeof d)return d;throw Error("Schema method literal must be a string")}function j6(a){return{completion:{values:a.slice(0,100),total:a.length,hasMore:a.length>100}}}var j7={completion:{values:[],hasMore:!1}};function j8(a,b,c,d){return{name:a,description:b,inputSchema:c,handler:d}}function j9(a){let b=new j0({name:a.name,version:a.version??"1.0.0"},{capabilities:{tools:a.tools?{}:void 0}});return a.tools&&a.tools.forEach(a=>{b.tool(a.name,a.description,a.inputSchema,a.handler)}),{type:"sdk",name:a.name,instance:b}}}};